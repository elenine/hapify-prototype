<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Wishes Creator - InviteGen</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="text-2xl hover:scale-110 transition-transform">üé®</a>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent">
                            InviteGen
                        </h1>
                        <p class="text-xs text-gray-500">Birthday Wishes</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="previewFullscreen()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üëÅÔ∏è Preview
                    </button>
                    <button onclick="generateQR()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üì± QR Code
                    </button>
                    <button onclick="publishProject()" class="px-4 py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-lg text-sm font-medium hover:shadow-lg transition">
                        üöÄ Publish
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex h-[calc(100vh-73px)]">
        <!-- Left Panel - Editor -->
        <div class="w-full lg:w-5/12 bg-white border-r overflow-y-auto">
            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Design Birthday Wishes</h2>
                    <p class="text-sm text-gray-600 mt-1">Create a memorable birthday celebration</p>
                </div>

                <!-- Sections Container -->
                <div id="sectionsContainer" class="space-y-4">
                    <!-- Sections will be added here dynamically -->
                </div>

                <!-- Add Section Button -->
                <button onclick="openSectionModal()" class="w-full mt-6 py-4 border-2 border-dashed border-gray-300 rounded-xl text-pink-600 font-semibold hover:border-pink-400 hover:bg-pink-50 transition flex items-center justify-center gap-2">
                    <span class="text-xl">+</span>
                    Add Section
                </button>
            </div>
        </div>

        <!-- Right Panel - Preview -->
        <div class="hidden lg:flex w-7/12 bg-gradient-to-br from-gray-100 to-gray-200 p-8 overflow-y-auto justify-center">
            <div class="h-fit">
                <div class="flex justify-between items-center mb-6 max-w-md mx-auto">
                    <h3 class="text-lg font-semibold text-gray-700">Live Preview</h3>
                    <div class="flex gap-2">
                        <button onclick="setDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn active" data-device="mobile">
                            üì±
                        </button>
                        <button onclick="setDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn" data-device="tablet">
                            üíª
                        </button>
                    </div>
                </div>

                <!-- Mobile Frame -->
                <div id="mobileFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl mx-auto">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="previewContent">
                        <div class="flex items-center justify-center h-full text-center p-8">
                            <div>
                                <div class="text-6xl mb-4">üéÇ</div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                                <p class="text-gray-600 text-sm">Add sections to build your birthday wishes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

                <!-- Add Section Modal -->
    <div id="sectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="p-6 border-b flex justify-between items-center bg-white">
                <h3 class="text-2xl font-bold">Add New Section</h3>
                <button onclick="closeSectionModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>

            <!-- Tab Navigation -->
            <div class="border-b flex bg-gray-50">
                <button class="flex-1 px-6 py-4 text-sm font-medium modal-tab-btn active" onclick="switchModalTab(event, 'most-used')">
                    ‚≠ê Most Used
                </button>
                <button class="flex-1 px-6 py-4 text-sm font-medium modal-tab-btn" onclick="switchModalTab(event, 'more')">
                    ‚ûï More Sections
                </button>
            </div>

            <!-- Tab Content Container -->
            <div class="overflow-y-auto flex-1">
                <!-- Most Used Tab -->
                <div class="modal-tab-content p-6" data-modal-tab="most-used">
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <button data-section-type="hero" onclick="addSection('hero')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üéÇ</div>
                            <div class="font-semibold text-sm">Hero Header</div>
                        </button>
                        <button data-section-type="celebrant" onclick="addSection('celebrant')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üéâ</div>
                            <div class="font-semibold text-sm">Celebrant Info</div>
                        </button>
                        <button data-section-type="party" onclick="addSection('party')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üéà</div>
                            <div class="font-semibold text-sm">Party Details</div>
                        </button>
                        <button data-section-type="gallery" onclick="addSection('gallery')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üñºÔ∏è</div>
                            <div class="font-semibold text-sm">Photo Gallery</div>
                        </button>
                        <button data-section-type="rsvp" onclick="addSection('rsvp')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">‚úâÔ∏è</div>
                            <div class="font-semibold text-sm">RSVP</div>
                        </button>
                    </div>
                </div>

                <!-- More Sections Tab -->
                <div class="modal-tab-content p-6 hidden" data-modal-tab="more">
                    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                        <button data-section-type="wishes" onclick="addSection('wishes')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üíù</div>
                            <div class="font-semibold text-sm">Birthday Wishes</div>
                        </button>
                        <button data-section-type="message" onclick="addSection('message')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üí¨</div>
                            <div class="font-semibold text-sm">Special Message</div>
                        </button>
                        <button data-section-type="countdown" onclick="addSection('countdown')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">‚è∞</div>
                            <div class="font-semibold text-sm">Countdown</div>
                        </button>
                        <button data-section-type="gifts" onclick="addSection('gifts')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üéÅ</div>
                            <div class="font-semibold text-sm">Gift Registry</div>
                        </button>
                        <button data-section-type="theme" onclick="addSection('theme')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üé®</div>
                            <div class="font-semibold text-sm">Party Theme</div>
                        </button>
                        <button data-section-type="schedule" onclick="addSection('schedule')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üìÖ</div>
                            <div class="font-semibold text-sm">Event Schedule</div>
                        </button>
                        <button data-section-type="dressCode" onclick="addSection('dressCode')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üëî</div>
                            <div class="font-semibold text-sm">Dress Code</div>
                        </button>
                        <button data-section-type="directions" onclick="addSection('directions')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üó∫Ô∏è</div>
                            <div class="font-semibold text-sm">Directions</div>
                        </button>
                        <button data-section-type="food" onclick="addSection('food')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üç∞</div>
                            <div class="font-semibold text-sm">Food & Drinks</div>
                        </button>
                        <button data-section-type="activities" onclick="addSection('activities')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üéÆ</div>
                            <div class="font-semibold text-sm">Games & Activities</div>
                        </button>
                        <button data-section-type="contact" onclick="addSection('contact')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üìû</div>
                            <div class="font-semibold text-sm">Contact Info</div>
                        </button>
                        <button data-section-type="accommodations" onclick="addSection('accommodations')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üè®</div>
                            <div class="font-semibold text-sm">Accommodations</div>
                        </button>
                        <button data-section-type="socialMedia" onclick="addSection('socialMedia')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üì±</div>
                            <div class="font-semibold text-sm">Social Media</div>
                        </button>
                        <button data-section-type="specialInstructions" onclick="addSection('specialInstructions')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">‚ö†Ô∏è</div>
                            <div class="font-semibold text-sm">Special Instructions</div>
                        </button>
                        <button data-section-type="tribute" onclick="addSection('tribute')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üíñ</div>
                            <div class="font-semibold text-sm">Tribute/Story</div>
                        </button>
                        <button data-section-type="video" onclick="addSection('video')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üé•</div>
                            <div class="font-semibold text-sm">Video Message</div>
                        </button>
                        <button data-section-type="faq" onclick="addSection('faq')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">‚ùì</div>
                            <div class="font-semibold text-sm">FAQ</div>
                        </button>
                        <button data-section-type="thankYou" onclick="addSection('thankYou')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üôè</div>
                            <div class="font-semibold text-sm">Thank You</div>
                        </button>
                        <button data-section-type="memories" onclick="addSection('memories')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-pink-500 hover:bg-pink-50 transition text-center">
                            <div class="text-4xl mb-2">üì∏</div>
                            <div class="font-semibold text-sm">Photo Memories</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Preview Button (Mobile Only) -->
    <button onclick="openMobilePreview()" class="lg:hidden fixed bottom-6 right-6 z-40 w-14 h-14 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-full shadow-lg hover:shadow-xl transition flex items-center justify-center text-2xl">
        üëÅÔ∏è
    </button>

    <!-- Mobile Preview Modal -->
    <div id="mobilePreviewModal" class="hidden fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4">
        <div class="w-full h-full flex flex-col">
            <!-- Modal Header -->
            <div class="flex justify-between items-center mb-4 px-2">
                <h3 class="text-lg font-semibold text-white">Live Preview</h3>
                <button onclick="closeMobilePreview()" class="text-white hover:text-gray-300 text-3xl w-10 h-10 flex items-center justify-center">√ó</button>
            </div>

            <!-- Device Toggle -->
            <div class="flex gap-2 justify-center mb-4">
                <button onclick="setMobilePreviewDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn active" data-device="mobile">
                    üì± Mobile
                </button>
                <button onclick="setMobilePreviewDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn" data-device="tablet">
                    üíª Tablet
                </button>
            </div>

            <!-- Mobile Frame -->
            <div class="flex-1 flex items-center justify-center overflow-auto">
                <div id="mobilePreviewFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="mobilePreviewContent">
                        <!-- Preview content will be copied here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="qrModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">QR Code Generated</h3>
                <button onclick="closeQRModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>
            <div class="text-center">
                <div class="w-64 h-64 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4">
                    <div class="text-center">
                        <div class="text-5xl mb-2">üì±</div>
                        <div class="text-sm text-gray-600">QR Code</div>
                    </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg mb-4 font-mono text-sm break-all" id="shareUrl">
                    https://invitegen.com/view/birthday123
                </div>
                <button onclick="copyUrl()" class="w-full bg-pink-600 text-white py-3 rounded-lg font-semibold hover:bg-pink-700 transition">
                    üìã Copy URL
                </button>
            </div>
        </div>
    </div>

    <script>
        let sectionCounter = 0;

        const sectionTemplates = {
            layout: {
                name: 'üé® Page Layout',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div class="text-sm text-gray-600">
                            <p>This section controls the overall styling and appearance of your entire invitation page.</p>
                            <p class="mt-2">Use the <strong>Style</strong> tab to customize colors, fonts, and layout.</p>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Primary Color</label>
                            <input type="color" value="#9333ea" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="primaryColor" oninput="updatePreview()">
                            <p class="text-xs text-gray-500 mt-1">Used for headings and accents</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Secondary Color</label>
                            <input type="color" value="#ec4899" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="secondaryColor" oninput="updatePreview()">
                            <p class="text-xs text-gray-500 mt-1">Used for secondary elements</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bgColor" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" value="#1f2937" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="textColor" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Font Family</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 section-style" data-style="fontFamily" onchange="updatePreview()">
                                <option value="system-ui, -apple-system, sans-serif">System Default</option>
                                <option value="Georgia, serif">Georgia (Serif)</option>
                                <option value="'Times New Roman', serif">Times New Roman</option>
                                <option value="'Courier New', monospace">Courier New</option>
                                <option value="Arial, sans-serif">Arial</option>
                                <option value="'Comic Sans MS', cursive">Comic Sans</option>
                                <option value="'Brush Script MT', cursive">Brush Script</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Border Radius</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 section-style" data-style="borderRadius" onchange="updatePreview()">
                                <option value="0px">Square (No Radius)</option>
                                <option value="4px">Small (4px)</option>
                                <option value="8px" selected>Medium (8px)</option>
                                <option value="16px">Large (16px)</option>
                                <option value="24px">Extra Large (24px)</option>
                                <option value="9999px">Pill Shape</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Spacing</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 section-style" data-style="spacing" onchange="updatePreview()">
                                <option value="compact">Compact</option>
                                <option value="normal" selected>Normal</option>
                                <option value="relaxed">Relaxed</option>
                                <option value="spacious">Spacious</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => '' // Layout section doesn't render visible content
            },
            hero: {
                name: 'üéÇ Hero Header',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Birthday Person's Name</label>
                            <input type="text" placeholder="Sarah" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent section-data" data-field="name" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Age (Optional)</label>
                            <input type="number" placeholder="25" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent section-data" data-field="age" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Celebration Message</label>
                            <input type="text" placeholder="Happy Birthday!" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent section-data" data-field="message" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cover Photo</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-pink-400 cursor-pointer" onclick="this.querySelector('input').click()">
                                <div class="text-3xl mb-2">üì∏</div>
                                <div class="text-sm text-gray-600">Click to upload</div>
                                <input type="file" class="hidden section-data" data-field="image" accept="image/*" onchange="handleImageUpload(this)">
                            </div>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ec4899" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="text" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="text-center py-16 px-6" style="background: ${style.bg || '#ec4899'}; color: ${style.text || '#ffffff'}">
                        ${data.image ? `<img src="${data.image}" class="w-32 h-32 rounded-full mx-auto mb-6 object-cover border-4 border-white">` : '<div class="w-32 h-32 rounded-full mx-auto mb-6 bg-white bg-opacity-20"></div>'}
                        <div class="text-6xl mb-4">üéÇ</div>
                        <h1 class="text-3xl font-bold mb-2">${data.message || 'Happy Birthday!'}</h1>
                        <p class="text-4xl font-bold">${data.name || 'Name'}</p>
                        ${data.age ? `<p class="text-5xl font-bold mt-4">${data.age}</p>` : ''}
                    </div>
                `
            },
            celebrant: {
                name: 'üéâ Celebrant Info',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                            <input type="text" placeholder="Sarah Johnson" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="fullname" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Birthday Date</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="birthdate" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">About</label>
                            <textarea placeholder="Tell us about the birthday person..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="about" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto text-center">
                            <h2 class="text-2xl font-bold mb-6">About the Celebrant</h2>
                            <div class="p-6 bg-pink-50 rounded-lg">
                                <div class="text-4xl mb-3">üéâ</div>
                                <div class="font-bold text-lg mb-2">${data.fullname || 'Full Name'}</div>
                                ${data.birthdate ? `<div class="text-sm text-gray-600 mb-3">Born: ${new Date(data.birthdate).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})}</div>` : ''}
                                ${data.about ? `<p class="text-sm text-gray-600 leading-relaxed mt-4">${data.about}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            party: {
                name: 'üéà Party Details',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Party Date</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="date" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Party Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="time" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Venue Name</label>
                            <input type="text" placeholder="Party Hall" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="venue" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                            <textarea placeholder="Full venue address..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="address" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fdf2f8'}">
                        <h2 class="text-2xl font-bold text-center mb-8">Party Details</h2>
                        <div class="max-w-md mx-auto space-y-4">
                            ${data.date ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üìÖ</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Date</div>
                                    <div class="font-medium">${new Date(data.date).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})}</div>
                                </div>
                            </div>` : ''}
                            ${data.time ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üïê</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Time</div>
                                    <div class="font-medium">${data.time}</div>
                                </div>
                            </div>` : ''}
                            ${data.venue ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üéà</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Venue</div>
                                    <div class="font-medium">${data.venue}</div>
                                </div>
                            </div>` : ''}
                            ${data.address ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üìç</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Address</div>
                                    <div class="font-medium text-sm">${data.address}</div>
                                </div>
                            </div>` : ''}
                        </div>
                    </div>
                `
            },
            message: {
                name: 'üí¨ Special Message',
                allowMultiple: true,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message Title</label>
                            <input type="text" placeholder="A Special Message" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Your Message</label>
                            <textarea placeholder="Write your birthday wishes..." rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <h2 class="text-2xl font-bold mb-6">${data.title || 'A Special Message'}</h2>
                            <p class="text-gray-600 leading-relaxed">${data.message || 'Write your birthday wishes here...'}</p>
                        </div>
                    </div>
                `
            },
            gallery: {
                name: 'üñºÔ∏è Photo Gallery',
                allowMultiple: true,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gallery Title</label>
                            <input type="text" placeholder="Birthday Memories" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Photos</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-pink-400 cursor-pointer">
                                <div class="text-3xl mb-2">üì∏</div>
                                <div class="text-sm text-gray-600">Click to upload multiple photos</div>
                            </div>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#f9fafb" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#f9fafb'}">
                        <h2 class="text-2xl font-bold text-center mb-8">${data.title || 'Photo Gallery'}</h2>
                        <div class="max-w-md mx-auto text-center">
                            <div class="text-5xl mb-4">üñºÔ∏è</div>
                            <p class="text-gray-500 text-sm">Photos will appear here</p>
                        </div>
                    </div>
                `
            },
            gifts: {
                name: 'üéÅ Gift Registry',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Registry Title</label>
                            <input type="text" placeholder="Gift Registry" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Registry Link (Optional)</label>
                            <input type="url" placeholder="https://..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="link" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea placeholder="Your presence is the best gift..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üéÅ</div>
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Gift Registry'}</h2>
                            <p class="text-gray-600 mb-6">${data.message || 'Your presence is the best gift, but if you wish to give something...'}</p>
                            ${data.link ? `<a href="${data.link}" target="_blank" class="inline-block bg-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-pink-700 transition">View Registry</a>` : ''}
                        </div>
                    </div>
                `
            },
            rsvp: {
                name: '‚úâÔ∏è RSVP',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">RSVP Title</label>
                            <input type="text" placeholder="Please RSVP" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea placeholder="Let us know if you can join..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Please RSVP'}</h2>
                            <p class="text-gray-600 mb-6">${data.message || "Let us know if you can join the celebration"}</p>
                            <button class="bg-pink-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-pink-700 transition">
                                RSVP Now
                            </button>
                        </div>
                    </div>
                `
            },
            countdown: {
                name: '‚è∞ Countdown',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Countdown Title</label>
                            <input type="text" placeholder="Days Until Birthday" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Target Date</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="date" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    let countdown = '';
                    if (data.date) {
                        const target = new Date(data.date);
                        const now = new Date();
                        const diff = Math.floor((target - now) / (1000 * 60 * 60 * 24));
                        countdown = diff > 0 ? `<div class="text-6xl font-bold text-pink-600 mb-2">${diff}</div><div class="text-lg text-gray-600">Days to go!</div>` : '<div class="text-2xl font-bold text-pink-600">It\'s Today! üéâ</div>';
                    }
                    return `
                        <div class="py-12 px-6 text-center" style="background: ${style.bg || '#ffffff'}">
                            <div class="max-w-md mx-auto">
                                <h2 class="text-2xl font-bold mb-6">${data.title || 'Countdown'}</h2>
                                <div class="text-5xl mb-4">‚è∞</div>
                                ${countdown || '<p class="text-gray-500">Set a date to see countdown</p>'}
                            </div>
                        </div>
                    `;
                }
            },
            wishes: {
                name: 'üíù Birthday Wishes',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Birthday Wishes Wall" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea placeholder="Leave your birthday wishes..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="description" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#f9fafb" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#f9fafb'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üíù</div>
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Birthday Wishes Wall'}</h2>
                            <p class="text-gray-600 mb-6">${data.description || 'Share your birthday wishes and messages'}</p>
                            <button class="bg-pink-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-pink-700 transition">
                                Leave a Wish
                            </button>
                        </div>
                    </div>
                `
            },
            theme: {
                name: 'üé® Party Theme',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Theme Name</label>
                            <input type="text" placeholder="Tropical Paradise" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="themeName" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Theme Description</label>
                            <textarea placeholder="Join us for a tropical celebration..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="description" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Theme Image</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-pink-400 cursor-pointer" onclick="this.querySelector('input').click()">
                                <div class="text-3xl mb-2">üñºÔ∏è</div>
                                <div class="text-sm text-gray-600">Click to upload theme image</div>
                                <input type="file" class="hidden section-data" data-field="image" accept="image/*" onchange="handleImageUpload(this)">
                            </div>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto text-center">
                            <div class="text-5xl mb-4">üé®</div>
                            <h2 class="text-2xl font-bold mb-4">${data.themeName || 'Party Theme'}</h2>
                            ${data.image ? `<img src="${data.image}" class="w-full h-48 object-cover rounded-lg mb-4">` : ''}
                            <p class="text-gray-600 leading-relaxed">${data.description || 'Come dressed for the theme!'}</p>
                        </div>
                    </div>
                `
            },
            schedule: {
                name: 'üìÖ Event Schedule',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Schedule Title</label>
                            <input type="text" placeholder="Timeline" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 1 Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="time1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 1 Name</label>
                            <input type="text" placeholder="Arrival & Cocktails" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="event1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 2 Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="time2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 2 Name</label>
                            <input type="text" placeholder="Dinner" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="event2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 3 Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="time3" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Event 3 Name</label>
                            <input type="text" placeholder="Cake & Dancing" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="event3" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <h2 class="text-2xl font-bold text-center mb-8">${data.title || 'Event Schedule'}</h2>
                            <div class="space-y-4">
                                ${data.time1 && data.event1 ? `
                                <div class="flex items-center gap-4 p-4 bg-pink-50 rounded-lg">
                                    <div class="text-2xl">üïê</div>
                                    <div class="flex-1">
                                        <div class="font-bold">${data.time1}</div>
                                        <div class="text-sm text-gray-600">${data.event1}</div>
                                    </div>
                                </div>` : ''}
                                ${data.time2 && data.event2 ? `
                                <div class="flex items-center gap-4 p-4 bg-pink-50 rounded-lg">
                                    <div class="text-2xl">üïë</div>
                                    <div class="flex-1">
                                        <div class="font-bold">${data.time2}</div>
                                        <div class="text-sm text-gray-600">${data.event2}</div>
                                    </div>
                                </div>` : ''}
                                ${data.time3 && data.event3 ? `
                                <div class="flex items-center gap-4 p-4 bg-pink-50 rounded-lg">
                                    <div class="text-2xl">üïí</div>
                                    <div class="flex-1">
                                        <div class="font-bold">${data.time3}</div>
                                        <div class="text-sm text-gray-600">${data.event3}</div>
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            dressCode: {
                name: 'üëî Dress Code',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Dress Code</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="code" onchange="updatePreview()">
                                <option value="">Select dress code...</option>
                                <option value="Casual">Casual</option>
                                <option value="Smart Casual">Smart Casual</option>
                                <option value="Business Casual">Business Casual</option>
                                <option value="Cocktail Attire">Cocktail Attire</option>
                                <option value="Formal">Formal</option>
                                <option value="Black Tie">Black Tie</option>
                                <option value="Costume Party">Costume Party</option>
                                <option value="Themed">Themed</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Details</label>
                            <textarea placeholder="Please wear comfortable shoes for dancing..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="details" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üëî</div>
                            <h2 class="text-2xl font-bold mb-4">Dress Code</h2>
                            ${data.code ? `<div class="text-xl font-semibold text-pink-600 mb-3">${data.code}</div>` : ''}
                            ${data.details ? `<p class="text-gray-600">${data.details}</p>` : ''}
                        </div>
                    </div>
                `
            },
            directions: {
                name: 'üó∫Ô∏è Directions',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location Name</label>
                            <input type="text" placeholder="Sunset Beach Resort" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="location" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Full Address</label>
                            <textarea placeholder="123 Main Street..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="address" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Google Maps Link</label>
                            <input type="url" placeholder="https://maps.google.com/..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="mapLink" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Parking Instructions</label>
                            <textarea placeholder="Free parking available..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="parking" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-6">
                                <div class="text-5xl mb-4">üó∫Ô∏è</div>
                                <h2 class="text-2xl font-bold">Getting There</h2>
                            </div>
                            ${data.location ? `<div class="text-lg font-semibold mb-2">${data.location}</div>` : ''}
                            ${data.address ? `<div class="text-gray-600 mb-4">${data.address}</div>` : ''}
                            ${data.mapLink ? `<a href="${data.mapLink}" target="_blank" class="inline-block bg-pink-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-pink-700 transition mb-4">Open in Maps üìç</a>` : ''}
                            ${data.parking ? `<div class="mt-4 p-4 bg-gray-50 rounded-lg"><div class="text-sm font-medium mb-1">üÖøÔ∏è Parking</div><div class="text-sm text-gray-600">${data.parking}</div></div>` : ''}
                        </div>
                    </div>
                `
            },
            food: {
                name: 'üç∞ Food & Drinks',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Menu" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Food Description</label>
                            <textarea placeholder="Delicious buffet, appetizers, main course..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="foodDetails" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Drinks Description</label>
                            <textarea placeholder="Open bar, soft drinks, cocktails..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="drinkDetails" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Dietary Options</label>
                            <input type="text" placeholder="Vegetarian, vegan, gluten-free available" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="dietary" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-8">
                                <div class="text-5xl mb-4">üç∞</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Food & Drinks'}</h2>
                            </div>
                            <div class="space-y-4">
                                ${data.foodDetails ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold mb-2">üçΩÔ∏è Food</div>
                                    <p class="text-sm text-gray-600">${data.foodDetails}</p>
                                </div>` : ''}
                                ${data.drinkDetails ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold mb-2">ü•Ç Drinks</div>
                                    <p class="text-sm text-gray-600">${data.drinkDetails}</p>
                                </div>` : ''}
                                ${data.dietary ? `
                                <div class="text-center text-sm text-gray-600 pt-4">
                                    <span class="font-medium">Dietary Options:</span> ${data.dietary}
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            activities: {
                name: 'üéÆ Games & Activities',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Fun & Games" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Activity 1</label>
                            <input type="text" placeholder="Photo Booth" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="activity1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Activity 2</label>
                            <input type="text" placeholder="Karaoke" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="activity2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Activity 3</label>
                            <input type="text" placeholder="Dance Floor" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="activity3" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Info</label>
                            <textarea placeholder="Special games, entertainment details..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="details" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#f9fafb" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#f9fafb'}">
                        <div class="max-w-md mx-auto text-center">
                            <div class="text-5xl mb-4">üéÆ</div>
                            <h2 class="text-2xl font-bold mb-8">${data.title || 'Games & Activities'}</h2>
                            <div class="grid grid-cols-1 gap-3">
                                ${data.activity1 ? `<div class="p-4 bg-pink-50 rounded-lg font-medium">üéØ ${data.activity1}</div>` : ''}
                                ${data.activity2 ? `<div class="p-4 bg-pink-50 rounded-lg font-medium">üé§ ${data.activity2}</div>` : ''}
                                ${data.activity3 ? `<div class="p-4 bg-pink-50 rounded-lg font-medium">üíÉ ${data.activity3}</div>` : ''}
                            </div>
                            ${data.details ? `<p class="text-gray-600 text-sm mt-6">${data.details}</p>` : ''}
                        </div>
                    </div>
                `
            },
            contact: {
                name: 'üìû Contact Info',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Contact Person</label>
                            <input type="text" placeholder="John Doe" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="name" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" placeholder="+1 (555) 123-4567" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="phone" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                            <input type="email" placeholder="contact@email.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="email" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Message</label>
                            <textarea placeholder="Feel free to reach out with any questions..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto text-center">
                            <div class="text-5xl mb-4">üìû</div>
                            <h2 class="text-2xl font-bold mb-6">Questions?</h2>
                            ${data.name ? `<div class="font-semibold text-lg mb-4">${data.name}</div>` : ''}
                            <div class="space-y-3">
                                ${data.phone ? `
                                <a href="tel:${data.phone}" class="flex items-center justify-center gap-3 p-3 bg-pink-50 rounded-lg hover:bg-pink-100 transition">
                                    <span>üì±</span>
                                    <span class="font-medium">${data.phone}</span>
                                </a>` : ''}
                                ${data.email ? `
                                <a href="mailto:${data.email}" class="flex items-center justify-center gap-3 p-3 bg-pink-50 rounded-lg hover:bg-pink-100 transition">
                                    <span>‚úâÔ∏è</span>
                                    <span class="font-medium">${data.email}</span>
                                </a>` : ''}
                            </div>
                            ${data.message ? `<p class="text-gray-600 text-sm mt-6">${data.message}</p>` : ''}
                        </div>
                    </div>
                `
            },
            accommodations: {
                name: 'üè® Accommodations',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Where to Stay" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hotel 1 Name</label>
                            <input type="text" placeholder="Grand Hotel" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="hotel1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hotel 1 Details</label>
                            <input type="text" placeholder="5 miles away, discount code: PARTY2024" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="hotel1Details" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hotel 2 Name</label>
                            <input type="text" placeholder="Comfort Inn" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="hotel2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Hotel 2 Details</label>
                            <input type="text" placeholder="3 miles away, complimentary breakfast" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="hotel2Details" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-8">
                                <div class="text-5xl mb-4">üè®</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Where to Stay'}</h2>
                            </div>
                            <div class="space-y-4">
                                ${data.hotel1 ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold text-lg mb-1">${data.hotel1}</div>
                                    ${data.hotel1Details ? `<p class="text-sm text-gray-600">${data.hotel1Details}</p>` : ''}
                                </div>` : ''}
                                ${data.hotel2 ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold text-lg mb-1">${data.hotel2}</div>
                                    ${data.hotel2Details ? `<p class="text-sm text-gray-600">${data.hotel2Details}</p>` : ''}
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            socialMedia: {
                name: 'üì± Social Media',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Party Hashtag</label>
                            <input type="text" placeholder="#SarahTurns30" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="hashtag" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea placeholder="Share your photos and memories..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Instagram Handle (Optional)</label>
                            <input type="text" placeholder="@birthdayparty" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="instagram" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#f9fafb" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#f9fafb'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üì±</div>
                            <h2 class="text-2xl font-bold mb-4">Share the Celebration</h2>
                            ${data.message ? `<p class="text-gray-600 mb-4">${data.message}</p>` : ''}
                            ${data.hashtag ? `<div class="text-2xl font-bold text-pink-600 mb-3">${data.hashtag}</div>` : ''}
                            ${data.instagram ? `<div class="text-gray-600">${data.instagram}</div>` : ''}
                        </div>
                    </div>
                `
            },
            specialInstructions: {
                name: '‚ö†Ô∏è Special Instructions',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" placeholder="Important Information" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Instructions</label>
                            <textarea placeholder="This is a surprise party! Please arrive by 6:45 PM..." rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="instructions" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Icon Type</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="iconType" onchange="updatePreview()">
                                <option value="‚ö†Ô∏è">Warning (‚ö†Ô∏è)</option>
                                <option value="ü§´">Surprise (ü§´)</option>
                                <option value="‚ÑπÔ∏è">Info (‚ÑπÔ∏è)</option>
                                <option value="‚≠ê">Important (‚≠ê)</option>
                            </select>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fef3c7" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fef3c7'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-6">
                                <div class="text-5xl mb-4">${data.iconType || '‚ö†Ô∏è'}</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Important Information'}</h2>
                            </div>
                            ${data.instructions ? `<p class="text-gray-700 leading-relaxed">${data.instructions.replace(/\n/g, '<br>')}</p>` : ''}
                        </div>
                    </div>
                `
            },
            tribute: {
                name: 'üíñ Tribute/Story',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" placeholder="A Special Tribute" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Story/Message</label>
                            <textarea placeholder="Share a heartfelt story or tribute..." rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="story" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Author (Optional)</label>
                            <input type="text" placeholder="From the family" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="author" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto text-center">
                            <div class="text-5xl mb-4">üíñ</div>
                            <h2 class="text-2xl font-bold mb-6">${data.title || 'A Special Tribute'}</h2>
                            ${data.story ? `<p class="text-gray-700 leading-relaxed text-left mb-4 italic">"${data.story}"</p>` : ''}
                            ${data.author ? `<p class="text-gray-600 text-sm">‚Äî ${data.author}</p>` : ''}
                        </div>
                    </div>
                `
            },
            video: {
                name: 'üé• Video Message',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Watch Our Message" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Video URL</label>
                            <input type="url" placeholder="https://youtube.com/watch?v=..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="videoUrl" oninput="updatePreview()">
                            <p class="text-xs text-gray-500 mt-1">YouTube, Vimeo, or direct video link</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                            <textarea placeholder="Check out this special video message..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="description" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üé•</div>
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Video Message'}</h2>
                            ${data.description ? `<p class="text-gray-600 mb-6">${data.description}</p>` : ''}
                            ${data.videoUrl ? `
                            <a href="${data.videoUrl}" target="_blank" class="inline-block bg-pink-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-pink-700 transition">
                                ‚ñ∂Ô∏è Watch Video
                            </a>` : '<p class="text-gray-400 text-sm">Video link will appear here</p>'}
                        </div>
                    </div>
                `
            },
            faq: {
                name: '‚ùì FAQ',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Frequently Asked Questions" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Question 1</label>
                            <input type="text" placeholder="What should I wear?" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="q1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Answer 1</label>
                            <textarea placeholder="Casual attire is perfect..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="a1" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Question 2</label>
                            <input type="text" placeholder="Can I bring a plus one?" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="q2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Answer 2</label>
                            <textarea placeholder="Yes, please mention in your RSVP..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="a2" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Question 3</label>
                            <input type="text" placeholder="Is there parking?" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="q3" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Answer 3</label>
                            <textarea placeholder="Yes, free parking available..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="a3" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#f9fafb" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#f9fafb'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-8">
                                <div class="text-5xl mb-4">‚ùì</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Frequently Asked Questions'}</h2>
                            </div>
                            <div class="space-y-4">
                                ${data.q1 ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold mb-2">Q: ${data.q1}</div>
                                    ${data.a1 ? `<p class="text-sm text-gray-600">A: ${data.a1}</p>` : ''}
                                </div>` : ''}
                                ${data.q2 ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold mb-2">Q: ${data.q2}</div>
                                    ${data.a2 ? `<p class="text-sm text-gray-600">A: ${data.a2}</p>` : ''}
                                </div>` : ''}
                                ${data.q3 ? `
                                <div class="p-4 bg-white rounded-lg">
                                    <div class="font-semibold mb-2">Q: ${data.q3}</div>
                                    ${data.a3 ? `<p class="text-sm text-gray-600">A: ${data.a3}</p>` : ''}
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            thankYou: {
                name: 'üôè Thank You',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title</label>
                            <input type="text" placeholder="Thank You" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thank You Message</label>
                            <textarea placeholder="Thank you for celebrating with me..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Signature (Optional)</label>
                            <input type="text" placeholder="With love, Sarah" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="signature" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fdf2f8" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fdf2f8'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üôè</div>
                            <h2 class="text-2xl font-bold mb-6">${data.title || 'Thank You'}</h2>
                            ${data.message ? `<p class="text-gray-700 leading-relaxed mb-4">${data.message}</p>` : ''}
                            ${data.signature ? `<p class="text-pink-600 font-semibold text-lg">${data.signature}</p>` : ''}
                        </div>
                    </div>
                `
            },
            memories: {
                name: 'üì∏ Photo Memories',
                allowMultiple: false,
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Through the Years" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 1 Year</label>
                            <input type="text" placeholder="1995" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="year1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 1 Description</label>
                            <input type="text" placeholder="Born in California" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="desc1" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 2 Year</label>
                            <input type="text" placeholder="2000" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="year2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 2 Description</label>
                            <input type="text" placeholder="Started kindergarten" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="desc2" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 3 Year</label>
                            <input type="text" placeholder="2025" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="year3" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone 3 Description</label>
                            <input type="text" placeholder="Turning 30!" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 section-data" data-field="desc3" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-8">
                                <div class="text-5xl mb-4">üì∏</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Through the Years'}</h2>
                            </div>
                            <div class="space-y-6">
                                ${data.year1 ? `
                                <div class="flex items-start gap-4">
                                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="font-bold text-pink-600">${data.year1}</span>
                                    </div>
                                    <div class="pt-4">
                                        <p class="text-gray-700">${data.desc1 || ''}</p>
                                    </div>
                                </div>` : ''}
                                ${data.year2 ? `
                                <div class="flex items-start gap-4">
                                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="font-bold text-pink-600">${data.year2}</span>
                                    </div>
                                    <div class="pt-4">
                                        <p class="text-gray-700">${data.desc2 || ''}</p>
                                    </div>
                                </div>` : ''}
                                ${data.year3 ? `
                                <div class="flex items-start gap-4">
                                    <div class="w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center flex-shrink-0">
                                        <span class="font-bold text-pink-600">${data.year3}</span>
                                    </div>
                                    <div class="pt-4">
                                        <p class="text-gray-700">${data.desc3 || ''}</p>
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                `
            }
        };

        function openSectionModal() {
            updateSectionAvailability();
            document.getElementById('sectionModal').classList.remove('hidden');
        }

        function updateSectionAvailability() {
            // Get all currently added sections
            const addedSections = {};
            document.querySelectorAll('.section-item').forEach(section => {
                const type = section.dataset.type;
                addedSections[type] = (addedSections[type] || 0) + 1;
            });

            // Update each section button in the modal
            document.querySelectorAll('[data-section-type]').forEach(button => {
                const type = button.dataset.sectionType;
                const template = sectionTemplates[type];

                if (!template) return;

                const isAdded = addedSections[type] > 0;
                const allowMultiple = template.allowMultiple !== false; // Default to true if not specified

                if (isAdded && !allowMultiple) {
                    // Disable button
                    button.disabled = true;
                    button.classList.add('opacity-50', 'cursor-not-allowed', 'bg-gray-100');
                    button.classList.remove('hover:border-purple-500', 'hover:bg-purple-50');

                    // Add "Added" badge
                    if (!button.querySelector('.added-badge')) {
                        const badge = document.createElement('span');
                        badge.className = 'added-badge absolute top-2 right-2 text-xs bg-green-500 text-white px-2 py-1 rounded';
                        badge.textContent = '‚úì Added';
                        button.style.position = 'relative';
                        button.appendChild(badge);
                    }
                } else {
                    // Enable button
                    button.disabled = false;
                    button.classList.remove('opacity-50', 'cursor-not-allowed', 'bg-gray-100');
                    button.classList.add('hover:border-purple-500', 'hover:bg-purple-50');

                    // Remove "Added" badge if it exists
                    const badge = button.querySelector('.added-badge');
                    if (badge) badge.remove();
                }
            });
        }

        
        function switchModalTab(event, tabName) {
            // Remove active class from all tab buttons
            document.querySelectorAll('.modal-tab-btn').forEach(btn => {
                btn.classList.remove('active', 'text-purple-600', 'border-b-2', 'border-purple-600', 'bg-white');
            });

            // Hide all tab contents
            document.querySelectorAll('.modal-tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Activate clicked tab button
            event.target.classList.add('active', 'text-purple-600', 'border-b-2', 'border-purple-600', 'bg-white');

            // Show corresponding tab content
            document.querySelector(`[data-modal-tab="${tabName}"]`).classList.remove('hidden');
        }

        function closeSectionModal() {
            document.getElementById('sectionModal').classList.add('hidden');
        }

        function addSection(type) {
            const template = sectionTemplates[type];
            const id = `section-${sectionCounter++}`;
            const isLayout = type === 'layout';

            // For layout section, hide remove button and drag handle
            const removeButton = isLayout ? '' : `<button onclick="removeSection('${id}')" class="text-gray-400 hover:text-red-600 transition">‚úï</button>`;
            const dragHandle = isLayout ? '' : `<span class="cursor-move text-gray-400">‚ãÆ‚ãÆ</span>`;

            const sectionHTML = `
                <div class="border border-gray-200 rounded-xl overflow-hidden section-item ${isLayout ? 'border-purple-300 bg-purple-50' : ''}" data-id="${id}" data-type="${type}" ${isLayout ? 'data-permanent="true"' : ''}>
                    <div class="bg-gray-50 border-b px-4 py-3 flex justify-between items-center ${isLayout ? 'bg-purple-100' : ''}">
                        <div class="flex items-center gap-2">
                            ${dragHandle}
                            <span class="font-semibold text-sm">${template.name}</span>
                            ${isLayout ? '<span class="ml-2 text-xs bg-purple-200 text-purple-700 px-2 py-1 rounded">Global Settings</span>' : ''}
                        </div>
                        ${removeButton}
                    </div>
                    <div class="border-b flex">
                        <button class="flex-1 px-4 py-3 text-sm font-medium border-r tab-btn active" onclick="switchTab(event, '${id}', 'info')">
                            Info
                        </button>
                        <button class="flex-1 px-4 py-3 text-sm font-medium tab-btn" onclick="switchTab(event, '${id}', 'style')">
                            Style
                        </button>
                    </div>
                    <div class="p-4 tab-content" data-tab="info">
                        ${template.info}
                    </div>
                    <div class="p-4 tab-content hidden" data-tab="style">
                        ${template.style}
                    </div>
                </div>
            `;

            document.getElementById('sectionsContainer').insertAdjacentHTML('beforeend', sectionHTML);
            if (!isLayout) {
                closeSectionModal();
            }
            updatePreview();
        }

        function removeSection(id) {
            if (confirm('Remove this section?')) {
                document.querySelector(`[data-id="${id}"]`).remove();
                updatePreview();
            }
        }

        function switchTab(event, sectionId, tab) {
            const section = document.querySelector(`[data-id="${sectionId}"]`);
            section.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'text-pink-600', 'border-b-2', 'border-pink-600'));
            section.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

            event.target.classList.add('active', 'text-pink-600', 'border-b-2', 'border-pink-600');
            section.querySelector(`[data-tab="${tab}"]`).classList.remove('hidden');
        }

        function getSectionData(section) {
            const data = {};
            const style = {};

            section.querySelectorAll('.section-data').forEach(input => {
                const field = input.dataset.field;
                if (input.type === 'file' && input.dataset.imageData) {
                    data[field] = input.dataset.imageData;
                } else {
                    data[field] = input.value;
                }
            });

            section.querySelectorAll('.section-style').forEach(input => {
                style[input.dataset.style] = input.value;
            });

            return { data, style };
        }

        function updatePreview() {
            const sections = document.querySelectorAll('.section-item');
            let html = '';
            let globalStyles = {};

            // Extract global styles from layout section
            const layoutSection = document.querySelector('[data-type="layout"]');
            if (layoutSection) {
                const { style } = getSectionData(layoutSection);
                globalStyles = style;
            }

            // Apply default global styles if not set
            globalStyles = {
                primaryColor: globalStyles.primaryColor || '#9333ea',
                secondaryColor: globalStyles.secondaryColor || '#ec4899',
                bgColor: globalStyles.bgColor || '#ffffff',
                textColor: globalStyles.textColor || '#1f2937',
                fontFamily: globalStyles.fontFamily || 'system-ui, -apple-system, sans-serif',
                borderRadius: globalStyles.borderRadius || '8px',
                spacing: globalStyles.spacing || 'normal'
            };

            // Calculate spacing values
            const spacingMap = {
                compact: { py: 'py-8', px: 'px-4', gap: 'gap-2' },
                normal: { py: 'py-12', px: 'px-6', gap: 'gap-4' },
                relaxed: { py: 'py-16', px: 'px-8', gap: 'gap-6' },
                spacious: { py: 'py-20', px: 'px-10', gap: 'gap-8' }
            };

            if (sections.length === 0 || sections.length === 1) {
                html = `
                    <div class="flex items-center justify-center h-full text-center p-8">
                        <div>
                            <div class="text-6xl mb-4">üéÇ</div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                            <p class="text-gray-600 text-sm">Add sections to build your birthday wishes</p>
                        </div>
                    </div>
                `;
            } else {
                sections.forEach(section => {
                    const type = section.dataset.type;
                    if (type === 'layout') return; // Skip layout section in rendering
                    const template = sectionTemplates[type];
                    const { data, style } = getSectionData(section);
                    html += template.render(data, style, globalStyles);
                });
            }

            // Wrap content with global styles
            const styledHtml = `
                <div style="font-family: ${globalStyles.fontFamily}; color: ${globalStyles.textColor}; background: ${globalStyles.bgColor};">
                    ${html}
                </div>
            `;

            document.getElementById('previewContent').innerHTML = styledHtml;
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    input.dataset.imageData = e.target.result;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function setDevice(device) {
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-pink-600', 'text-white');
            });
            event.target.classList.add('active', 'bg-pink-600', 'text-white');

            const frame = document.getElementById('mobileFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        function previewFullscreen() {
            window.open('', '_blank');
            alert('Full screen preview would open here');
        }

        function generateQR() {
            document.getElementById('qrModal').classList.remove('hidden');
        }

        function closeQRModal() {
            document.getElementById('qrModal').classList.add('hidden');
        }

        function copyUrl() {
            const url = document.getElementById('shareUrl').textContent;
            navigator.clipboard.writeText(url).then(() => {
                alert('URL copied to clipboard!');
            });
        }

        function publishProject() {
            if (confirm('Publish your birthday wishes?')) {
                alert('‚úÖ Published successfully!\n\nYour birthday page is now live!');
            }
        }

        function openMobilePreview() {
            // Copy preview content to mobile preview modal
            const previewContent = document.getElementById('previewContent').innerHTML;
            document.getElementById('mobilePreviewContent').innerHTML = previewContent;

            // Show the modal
            document.getElementById('mobilePreviewModal').classList.remove('hidden');
        }

        function closeMobilePreview() {
            document.getElementById('mobilePreviewModal').classList.add('hidden');
        }

        function setMobilePreviewDevice(device) {
            // Update active button
            document.querySelectorAll('.mobile-preview-device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-pink-600', 'text-white');
            });
            event.target.classList.add('active', 'bg-pink-600', 'text-white');

            // Update frame size
            const frame = document.getElementById('mobilePreviewFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        // Initialize with default sections on page load
        function initializeDefaultSections() {
            // Add default sections here based on template type
            const defaultSections = ['hero', 'celebrant', 'party', 'rsvp'];
            defaultSections.forEach(sectionType => addSection(sectionType));
        }

        // Load default sections when page loads
        window.addEventListener('DOMContentLoaded', initializeDefaultSections);

        
        // Initialize layout section on page load
        function initializeLayout() {
            addSection('layout');
        }

        // Close modals on outside click
        document.getElementById('sectionModal').addEventListener('click', (e) => {
            if (e.target.id === 'sectionModal') closeSectionModal();
        });
        document.getElementById('qrModal').addEventListener('click', (e) => {
            if (e.target.id === 'qrModal') closeQRModal();
        });
        document.getElementById('mobilePreviewModal').addEventListener('click', (e) => {
            if (e.target.id === 'mobilePreviewModal') closeMobilePreview();
        });

        // Run initialization
        initializeLayout();
    </script>
</body>
</html>
