<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anniversary Wishes - InviteGen</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="text-2xl hover:scale-110 transition-transform">üé®</a>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-red-500 to-red-700 bg-clip-text text-transparent">
                            InviteGen
                        </h1>
                        <p class="text-xs text-gray-500">Anniversary Wishes</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="previewFullscreen()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üëÅÔ∏è Preview
                    </button>
                    <button onclick="generateQR()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üì± QR Code
                    </button>
                    <button onclick="publishProject()" class="px-4 py-2 bg-gradient-to-r from-red-500 to-red-700 text-white rounded-lg text-sm font-medium hover:shadow-lg transition">
                        üöÄ Publish
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex h-[calc(100vh-73px)]">
        <!-- Left Panel - Editor -->
        <div class="w-full lg:w-5/12 bg-white border-r overflow-y-auto">
            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Design Anniversary Wishes</h2>
                    <p class="text-sm text-gray-600 mt-1">Celebrate years of love together</p>
                </div>

                <!-- Sections Container -->
                <div id="sectionsContainer" class="space-y-4">
                    <!-- Sections will be added here dynamically -->
                </div>

                <!-- Add Section Button -->
                <button onclick="openSectionModal()" class="w-full mt-6 py-4 border-2 border-dashed border-gray-300 rounded-xl text-red-600 font-semibold hover:border-red-400 hover:bg-red-50 transition flex items-center justify-center gap-2">
                    <span class="text-xl">+</span>
                    Add Section
                </button>
            </div>
        </div>

        <!-- Right Panel - Preview -->
        <div class="hidden lg:flex w-7/12 bg-gradient-to-br from-gray-100 to-gray-200 p-8 overflow-y-auto justify-center">
            <div class="h-fit">
                <div class="flex justify-between items-center mb-6 max-w-md mx-auto">
                    <h3 class="text-lg font-semibold text-gray-700">Live Preview</h3>
                    <div class="flex gap-2">
                        <button onclick="setDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn active" data-device="mobile">
                            üì±
                        </button>
                        <button onclick="setDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn" data-device="tablet">
                            üíª
                        </button>
                    </div>
                </div>

                <!-- Mobile Frame -->
                <div id="mobileFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl mx-auto">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="previewContent">
                        <div class="flex items-center justify-center h-full text-center p-8">
                            <div>
                                <div class="text-6xl mb-4">‚ù§Ô∏è</div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                                <p class="text-gray-600 text-sm">Add sections to build your anniversary wishes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Section Modal -->
    <div id="sectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b flex justify-between items-center sticky top-0 bg-white">
                <h3 class="text-2xl font-bold">Add New Section</h3>
                <button onclick="closeSectionModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>
            <div class="p-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <button onclick="addSection('hero')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">‚ù§Ô∏è</div>
                    <div class="font-semibold text-sm">Hero Header</div>
                </button>
                <button onclick="addSection('milestone')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üéä</div>
                    <div class="font-semibold text-sm">Milestone Info</div>
                </button>
                <button onclick="addSection('journey')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üõ§Ô∏è</div>
                    <div class="font-semibold text-sm">Journey Together</div>
                </button>
                <button onclick="addSection('lovestory')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üíï</div>
                    <div class="font-semibold text-sm">Love Story</div>
                </button>
                <button onclick="addSection('celebration')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üéâ</div>
                    <div class="font-semibold text-sm">Celebration Details</div>
                </button>
                <button onclick="addSection('vowrenewal')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üíç</div>
                    <div class="font-semibold text-sm">Vow Renewal</div>
                </button>
                <button onclick="addSection('rsvp')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">‚úâÔ∏è</div>
                    <div class="font-semibold text-sm">RSVP</div>
                </button>
                <button onclick="addSection('gallery')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üì∏</div>
                    <div class="font-semibold text-sm">Memory Gallery</div>
                </button>
                <button onclick="addSection('thankyou')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition text-center">
                    <div class="text-4xl mb-2">üôè</div>
                    <div class="font-semibold text-sm">Thank You</div>
                </button>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="qrModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">QR Code Generated</h3>
                <button onclick="closeQRModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>
            <div class="text-center">
                <div class="w-64 h-64 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4">
                    <div class="text-center">
                        <div class="text-5xl mb-2">üì±</div>
                        <div class="text-sm text-gray-600">QR Code</div>
                    </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg mb-4 font-mono text-sm break-all" id="shareUrl">
                    https://invitegen.com/view/anniversary123
                </div>
                <button onclick="copyUrl()" class="w-full bg-red-500 text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition">
                    üìã Copy URL
                </button>
            </div>
        </div>
    </div>

    <script>
        let sectionCounter = 0;

        const sectionTemplates = {
            hero: {
                name: '‚ù§Ô∏è Hero Header',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Couple Names</label>
                            <input type="text" placeholder="John & Jane Smith" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent section-data" data-field="names" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Title Text</label>
                            <input type="text" placeholder="Happy Anniversary" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cover Photo</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-red-400 cursor-pointer" onclick="this.querySelector('input').click()">
                                <div class="text-3xl mb-2">üì∏</div>
                                <div class="text-sm text-gray-600">Click to upload couple photo</div>
                                <input type="file" class="hidden section-data" data-field="image" accept="image/*" onchange="handleImageUpload(this)">
                            </div>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ef4444" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="text" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="text-center py-16 px-6" style="background: ${style.bg || '#ef4444'}; color: ${style.text || '#ffffff'}">
                        ${data.image ? `<img src="${data.image}" class="w-32 h-32 rounded-full mx-auto mb-6 object-cover border-4 border-white">` : '<div class="text-6xl mb-4">‚ù§Ô∏è</div>'}
                        <h1 class="text-3xl font-bold mb-2">${data.title || 'Happy Anniversary'}</h1>
                        <p class="text-xl">${data.names || "Couple Names"}</p>
                    </div>
                `
            },
            milestone: {
                name: 'üéä Milestone Info',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Years Together</label>
                            <input type="number" placeholder="25" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="years" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Wedding Date</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="weddingdate" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestone Description</label>
                            <textarea placeholder="Celebrating a quarter century of love..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="description" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto text-center">
                            <h2 class="text-2xl font-bold mb-6">Milestone</h2>
                            <div class="p-8 bg-red-50 rounded-lg">
                                <div class="text-6xl font-bold text-red-600 mb-2">${data.years || '0'}</div>
                                <div class="text-xl font-semibold mb-4">Years Together</div>
                                ${data.weddingdate ? `<div class="text-sm text-gray-600 mb-4">Since ${new Date(data.weddingdate).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})}</div>` : ''}
                                ${data.description ? `<p class="text-gray-700 mt-4">${data.description}</p>` : ''}
                            </div>
                        </div>
                    </div>
                `
            },
            journey: {
                name: 'üõ§Ô∏è Journey Together',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Our Journey" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Journey Highlights (one per line)</label>
                            <textarea placeholder="First met in college&#10;Got engaged in Paris&#10;Welcomed our first child&#10;Built our dream home" rows="5" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="highlights" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fef2f2" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fef2f2'}">
                        <h2 class="text-2xl font-bold text-center mb-8">${data.title || 'Our Journey'}</h2>
                        <div class="max-w-md mx-auto space-y-4">
                            ${data.highlights ? data.highlights.split('\n').filter(h => h.trim()).map(highlight => `
                                <div class="flex items-start gap-3 p-4 bg-white rounded-lg">
                                    <div class="text-red-600 mt-1">‚ù§Ô∏è</div>
                                    <div>${highlight}</div>
                                </div>
                            `).join('') : '<p class="text-center text-gray-500">Add journey highlights</p>'}
                        </div>
                    </div>
                `
            },
            lovestory: {
                name: 'üíï Love Story',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Story Title</label>
                            <input type="text" placeholder="How We Met" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Your Love Story</label>
                            <textarea placeholder="Share your beautiful love story..." rows="6" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="story" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-center mb-6">
                                <div class="text-5xl mb-3">üíï</div>
                                <h2 class="text-2xl font-bold">${data.title || 'Our Love Story'}</h2>
                            </div>
                            <div class="p-6 bg-red-50 rounded-lg">
                                <p class="text-gray-700 leading-relaxed">${data.story || 'Share your beautiful love story here...'}</p>
                            </div>
                        </div>
                    </div>
                `
            },
            celebration: {
                name: 'üéâ Celebration Details',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Celebration Date</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="date" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="time" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Venue Name</label>
                            <input type="text" placeholder="The Grand Ballroom" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="venue" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                            <textarea placeholder="Full venue address..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="address" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fef2f2" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#fef2f2'}">
                        <h2 class="text-2xl font-bold text-center mb-8">Celebration Details</h2>
                        <div class="max-w-md mx-auto space-y-4">
                            ${data.date ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üìÖ</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Date</div>
                                    <div class="font-medium">${new Date(data.date).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})}</div>
                                </div>
                            </div>` : ''}
                            ${data.time ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üïê</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Time</div>
                                    <div class="font-medium">${data.time}</div>
                                </div>
                            </div>` : ''}
                            ${data.venue ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üèõÔ∏è</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Venue</div>
                                    <div class="font-medium">${data.venue}</div>
                                </div>
                            </div>` : ''}
                            ${data.address ? `
                            <div class="flex items-start gap-4 p-4 bg-white rounded-lg">
                                <div class="text-2xl">üìç</div>
                                <div>
                                    <div class="text-xs text-gray-500 mb-1">Address</div>
                                    <div class="text-sm">${data.address}</div>
                                </div>
                            </div>` : ''}
                        </div>
                    </div>
                `
            },
            vowrenewal: {
                name: 'üíç Vow Renewal',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" placeholder="Renewing Our Vows" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ceremony Time</label>
                            <input type="time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="time" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Special Message</label>
                            <textarea placeholder="Join us as we renew our commitment..." rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üíç</div>
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Vow Renewal'}</h2>
                            ${data.time ? `<p class="text-lg text-gray-700 mb-4">Ceremony at ${data.time}</p>` : ''}
                            ${data.message ? `<p class="text-gray-600 px-4">${data.message}</p>` : ''}
                        </div>
                    </div>
                `
            },
            rsvp: {
                name: '‚úâÔ∏è RSVP',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">RSVP Title</label>
                            <input type="text" placeholder="Join Our Celebration" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                            <textarea placeholder="Please let us know if you can join us..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">RSVP Deadline</label>
                            <input type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="deadline" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fef2f2" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fef2f2'}">
                        <div class="max-w-md mx-auto">
                            <h2 class="text-2xl font-bold mb-4">${data.title || 'Please RSVP'}</h2>
                            <p class="text-gray-600 mb-6">${data.message || "Let us know if you can join our celebration"}</p>
                            ${data.deadline ? `<p class="text-sm text-gray-500 mb-6">Please respond by ${new Date(data.deadline).toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'})}</p>` : ''}
                            <button class="bg-red-500 text-white px-8 py-3 rounded-lg font-semibold hover:bg-red-600 transition">
                                RSVP Now
                            </button>
                        </div>
                    </div>
                `
            },
            gallery: {
                name: 'üì∏ Memory Gallery',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gallery Title</label>
                            <input type="text" placeholder="Our Memories" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="title" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gallery Description</label>
                            <textarea placeholder="A collection of our favorite moments..." rows="2" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="description" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Upload Photos</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-red-400 cursor-pointer">
                                <div class="text-3xl mb-2">üì∏</div>
                                <div class="text-sm text-gray-600">Click to upload photos</div>
                            </div>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#ffffff" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6" style="background: ${style.bg || '#ffffff'}">
                        <div class="max-w-md mx-auto">
                            <h2 class="text-2xl font-bold text-center mb-4">${data.title || 'Memory Gallery'}</h2>
                            ${data.description ? `<p class="text-center text-gray-600 mb-6">${data.description}</p>` : ''}
                            <div class="grid grid-cols-2 gap-4">
                                <div class="aspect-square bg-red-100 rounded-lg flex items-center justify-center">
                                    <span class="text-4xl">üì∑</span>
                                </div>
                                <div class="aspect-square bg-red-100 rounded-lg flex items-center justify-center">
                                    <span class="text-4xl">üì∑</span>
                                </div>
                                <div class="aspect-square bg-red-100 rounded-lg flex items-center justify-center">
                                    <span class="text-4xl">üì∑</span>
                                </div>
                                <div class="aspect-square bg-red-100 rounded-lg flex items-center justify-center">
                                    <span class="text-4xl">üì∑</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `
            },
            thankyou: {
                name: 'üôè Thank You',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thank You Message</label>
                            <textarea placeholder="Thank you for celebrating with us..." rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="message" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Closing Note</label>
                            <input type="text" placeholder="With love," class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 section-data" data-field="closing" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" value="#fef2f2" class="w-full h-12 rounded-lg cursor-pointer section-style" data-style="bg" oninput="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => `
                    <div class="py-12 px-6 text-center" style="background: ${style.bg || '#fef2f2'}">
                        <div class="max-w-md mx-auto">
                            <div class="text-5xl mb-4">üôè</div>
                            <h2 class="text-2xl font-bold mb-6">Thank You</h2>
                            <p class="text-gray-700 text-lg mb-6">${data.message || 'Thank you for celebrating with us and being part of our journey.'}</p>
                            ${data.closing ? `<p class="text-gray-600 italic">${data.closing}</p>` : ''}
                        </div>
                    </div>
                `
            }
        };

        function openSectionModal() {
            document.getElementById('sectionModal').classList.remove('hidden');
        }

        function closeSectionModal() {
            document.getElementById('sectionModal').classList.add('hidden');
        }

        function addSection(type) {
            const template = sectionTemplates[type];
            const id = `section-${sectionCounter++}`;

            const sectionHTML = `
                <div class="border border-gray-200 rounded-xl overflow-hidden section-item" data-id="${id}" data-type="${type}">
                    <div class="bg-gray-50 border-b px-4 py-3 flex justify-between items-center">
                        <div class="flex items-center gap-2">
                            <span class="cursor-move text-gray-400">‚ãÆ‚ãÆ</span>
                            <span class="font-semibold text-sm">${template.name}</span>
                        </div>
                        <button onclick="removeSection('${id}')" class="text-gray-400 hover:text-red-600 transition">‚úï</button>
                    </div>
                    <div class="border-b flex">
                        <button class="flex-1 px-4 py-3 text-sm font-medium border-r tab-btn active" onclick="switchTab(event, '${id}', 'info')">
                            Info
                        </button>
                        <button class="flex-1 px-4 py-3 text-sm font-medium tab-btn" onclick="switchTab(event, '${id}', 'style')">
                            Style
                        </button>
                    </div>
                    <div class="p-4 tab-content" data-tab="info">
                        ${template.info}
                    </div>
                    <div class="p-4 tab-content hidden" data-tab="style">
                        ${template.style}
                    </div>
                </div>
            `;

            document.getElementById('sectionsContainer').insertAdjacentHTML('beforeend', sectionHTML);
            closeSectionModal();
            updatePreview();
        }

        function removeSection(id) {
            if (confirm('Remove this section?')) {
                document.querySelector(`[data-id="${id}"]`).remove();
                updatePreview();
            }
        }

        function switchTab(event, sectionId, tab) {
            const section = document.querySelector(`[data-id="${sectionId}"]`);
            section.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'text-red-600', 'border-b-2', 'border-red-600'));
            section.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

            event.target.classList.add('active', 'text-red-600', 'border-b-2', 'border-red-600');
            section.querySelector(`[data-tab="${tab}"]`).classList.remove('hidden');
        }

        function getSectionData(section) {
            const data = {};
            const style = {};

            section.querySelectorAll('.section-data').forEach(input => {
                const field = input.dataset.field;
                if (input.type === 'file' && input.dataset.imageData) {
                    data[field] = input.dataset.imageData;
                } else {
                    data[field] = input.value;
                }
            });

            section.querySelectorAll('.section-style').forEach(input => {
                style[input.dataset.style] = input.value;
            });

            return { data, style };
        }

        function updatePreview() {
            const sections = document.querySelectorAll('.section-item');
            let html = '';

            if (sections.length === 0) {
                html = `
                    <div class="flex items-center justify-center h-full text-center p-8">
                        <div>
                            <div class="text-6xl mb-4">‚ù§Ô∏è</div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                            <p class="text-gray-600 text-sm">Add sections to build your anniversary wishes</p>
                        </div>
                    </div>
                `;
            } else {
                sections.forEach(section => {
                    const type = section.dataset.type;
                    const template = sectionTemplates[type];
                    const { data, style } = getSectionData(section);
                    html += template.render(data, style);
                });
            }

            document.getElementById('previewContent').innerHTML = html;
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    input.dataset.imageData = e.target.result;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function setDevice(device) {
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-red-500', 'text-white');
            });
            event.target.classList.add('active', 'bg-red-500', 'text-white');

            const frame = document.getElementById('mobileFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        function previewFullscreen() {
            window.open('', '_blank');
            alert('Full screen preview would open here');
        }

        function generateQR() {
            document.getElementById('qrModal').classList.remove('hidden');
        }

        function closeQRModal() {
            document.getElementById('qrModal').classList.add('hidden');
        }

        function copyUrl() {
            const url = document.getElementById('shareUrl').textContent;
            navigator.clipboard.writeText(url).then(() => {
                alert('URL copied to clipboard!');
            });
        }

        function publishProject() {
            if (confirm('Publish your anniversary wishes?')) {
                alert('‚úÖ Published successfully!\n\nYour anniversary page is now live!');
            }
        }

        // Initialize with default sections on page load
        function initializeDefaultSections() {
            // Add default sections here based on template type
            const defaultSections = ['hero', 'milestone', 'celebration', 'rsvp'];
            defaultSections.forEach(sectionType => addSection(sectionType));
        }

        // Load default sections when page loads
        window.addEventListener('DOMContentLoaded', initializeDefaultSections);

        // Close modals on outside click
        document.getElementById('sectionModal').addEventListener('click', (e) => {
            if (e.target.id === 'sectionModal') closeSectionModal();
        });
        document.getElementById('qrModal').addEventListener('click', (e) => {
            if (e.target.id === 'qrModal') closeQRModal();
        });
    </script>
</body>
</html>
