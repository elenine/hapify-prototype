<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Well Soon Card - InviteGen</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="text-2xl hover:scale-110 transition-transform">üé®</a>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-green-400 to-teal-500 bg-clip-text text-transparent">
                            InviteGen
                        </h1>
                        <p class="text-xs text-gray-500">Get Well Soon Card</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="previewFullscreen()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üëÅÔ∏è Preview
                    </button>
                    <button onclick="generateQR()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üì± Share
                    </button>
                    <button onclick="publishProject()" class="px-4 py-2 bg-gradient-to-r from-green-400 to-teal-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition">
                        ‚úì Complete
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex h-[calc(100vh-73px)]">
        <!-- Left Panel - Editor -->
        <div class="w-full lg:w-5/12 bg-white border-r overflow-y-auto">
            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Create Get Well Soon Card</h2>
                    <p class="text-sm text-gray-600 mt-1">Send healing wishes and support</p>
                </div>

                <!-- Sections Container -->
                <div id="sectionsContainer" class="space-y-4">
                    <!-- Sections will be added here dynamically -->
                </div>

                <!-- Add Section Button -->
                <button onclick="openSectionModal()" class="w-full mt-6 py-4 border-2 border-dashed border-gray-300 rounded-xl text-green-600 font-semibold hover:border-green-400 hover:bg-green-50 transition flex items-center justify-center gap-2">
                    <span class="text-xl">+</span>
                    Add Section
                </button>
            </div>
        </div>

        <!-- Right Panel - Preview -->
        <div class="hidden lg:flex w-7/12 bg-gradient-to-br from-gray-100 to-gray-200 p-8 overflow-y-auto justify-center">
            <div class="h-fit">
                <div class="flex justify-between items-center mb-6 max-w-md mx-auto">
                    <h3 class="text-lg font-semibold text-gray-700">Live Preview</h3>
                    <div class="flex gap-2">
                        <button onclick="setDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn active" data-device="mobile">
                            üì±
                        </button>
                        <button onclick="setDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn" data-device="tablet">
                            üíª
                        </button>
                    </div>
                </div>

                <!-- Mobile Frame -->
                <div id="mobileFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl mx-auto">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="previewContent">
                        <div class="flex items-center justify-center h-full text-center p-8">
                            <div>
                                <div class="text-6xl mb-4">üå∫</div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                                <p class="text-gray-600 text-sm">Add sections to create your get well soon card</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Section Modal -->
    <div id="sectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-2xl font-bold">Add New Section</h3>
                <button onclick="closeSectionModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>

            <!-- Content -->
            <div class="overflow-y-auto flex-1 p-6">
                <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <button onclick="addSection('hero')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üå∫</div>
                        <div class="font-semibold text-sm">Cover Message</div>
                    </button>
                    <button onclick="addSection('healingMessage')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üíö</div>
                        <div class="font-semibold text-sm">Healing Wishes</div>
                    </button>
                    <button onclick="addSection('photo')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üì∑</div>
                        <div class="font-semibold text-sm">Photo</div>
                    </button>
                    <button onclick="addSection('supportMessage')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">ü§ù</div>
                        <div class="font-semibold text-sm">Support Message</div>
                    </button>
                    <button onclick="addSection('memories')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">‚ú®</div>
                        <div class="font-semibold text-sm">Happy Memories</div>
                    </button>
                    <button onclick="addSection('quote')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üí≠</div>
                        <div class="font-semibold text-sm">Inspirational Quote</div>
                    </button>
                    <button onclick="addSection('humor')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üòä</div>
                        <div class="font-semibold text-sm">Light Humor</div>
                    </button>
                    <button onclick="addSection('thoughts')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">üôè</div>
                        <div class="font-semibold text-sm">Positive Thoughts</div>
                    </button>
                    <button onclick="addSection('signature')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition text-center">
                        <div class="text-4xl mb-2">‚úçÔ∏è</div>
                        <div class="font-semibold text-sm">Signature</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Preview Button (Mobile Only) -->
    <button onclick="openMobilePreview()" class="lg:hidden fixed bottom-6 right-6 z-40 w-14 h-14 bg-gradient-to-r from-green-400 to-teal-500 text-white rounded-full shadow-lg hover:shadow-xl transition flex items-center justify-center text-2xl">
        üëÅÔ∏è
    </button>

    <!-- Mobile Preview Modal -->
    <div id="mobilePreviewModal" class="hidden fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4">
        <div class="w-full h-full flex flex-col">
            <!-- Modal Header -->
            <div class="flex justify-between items-center mb-4 px-2">
                <h3 class="text-lg font-semibold text-white">Live Preview</h3>
                <button onclick="closeMobilePreview()" class="text-white hover:text-gray-300 text-3xl w-10 h-10 flex items-center justify-center">√ó</button>
            </div>

            <!-- Device Toggle -->
            <div class="flex gap-2 justify-center mb-4">
                <button onclick="setMobilePreviewDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn active" data-device="mobile">
                    üì± Mobile
                </button>
                <button onclick="setMobilePreviewDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn" data-device="tablet">
                    üíª Tablet
                </button>
            </div>

            <!-- Mobile Frame -->
            <div class="flex-1 flex items-center justify-center overflow-auto">
                <div id="mobilePreviewFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="mobilePreviewContent">
                        <!-- Preview content will be copied here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="qrModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Share Your Card</h3>
                <button onclick="closeQRModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>
            <div class="text-center">
                <div class="w-64 h-64 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4">
                    <div class="text-center">
                        <div class="text-5xl mb-2">üå∫</div>
                        <div class="text-sm text-gray-600">QR Code</div>
                    </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg mb-4 font-mono text-sm break-all" id="shareUrl">
                    https://invitegen.com/cards/getwellsoon123
                </div>
                <button onclick="copyUrl()" class="w-full bg-green-500 text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition mb-2">
                    üìã Copy Link
                </button>
                <p class="text-xs text-gray-500">Share this link with your loved one</p>
            </div>
        </div>
    </div>

    <!-- Load Shared Components -->
    <script src="components/photo.component.js"></script>
    <script src="components/quote.component.js"></script>
    <script src="components/signature.component.js"></script>

    <script>
        let sectionCounter = 0;

        // Initialize section components if not already done
        window.sectionComponents = window.sectionComponents || {};

        const sectionTemplates = {
            hero: {
                name: 'üå∫ Cover Message',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Recipient's Name</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="name" onchange="updatePreview()" placeholder="Sarah">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Main Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="Wishing you a speedy recovery and sending lots of healing thoughts your way"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Flower/Icon Emoji</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="emoji" onchange="updatePreview()" placeholder="üå∫" value="üå∫">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="centered">Centered Classic</option>
                                <option value="split">Split Design</option>
                                <option value="overlay">Overlay Style</option>
                                <option value="minimal">Minimal Elegant</option>
                                <option value="card">Card Stack</option>
                                <option value="gradient">Gradient Flow</option>
                                <option value="floral">Floral Border</option>
                                <option value="modern">Modern Asymmetric</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#d1fae5" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#065f46" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#10b981" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#d1fae5';
                    const textColor = style.textColor || '#065f46';
                    const accentColor = style.accentColor || '#10b981';
                    const layout = style.layout || 'centered';
                    const name = data.name || 'Friend';
                    const message = data.message || 'Wishing you a speedy recovery';
                    const emoji = data.emoji || 'üå∫';

                    const layouts = {
                        centered: `
                            <div class="min-h-[400px] flex items-center justify-center p-8" style="background-color: ${bgColor}; color: ${textColor};">
                                <div class="text-center max-w-md">
                                    <div class="text-6xl mb-6">${emoji}</div>
                                    <h2 class="text-4xl font-bold mb-4">Get Well Soon</h2>
                                    <h3 class="text-2xl font-semibold mb-6">${name}</h3>
                                    <p class="text-lg leading-relaxed">${message}</p>
                                </div>
                            </div>
                        `,
                        split: `
                            <div class="min-h-[400px] flex flex-col md:flex-row" style="background-color: ${bgColor};">
                                <div class="flex-1 flex items-center justify-center p-8" style="background: linear-gradient(135deg, ${bgColor} 0%, ${accentColor}20 100%);">
                                    <div class="text-9xl">${emoji}</div>
                                </div>
                                <div class="flex-1 flex items-center justify-center p-8" style="color: ${textColor};">
                                    <div>
                                        <h2 class="text-3xl font-bold mb-3">Get Well Soon</h2>
                                        <h3 class="text-2xl font-semibold mb-4" style="color: ${accentColor};">${name}</h3>
                                        <p class="text-base leading-relaxed">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        overlay: `
                            <div class="min-h-[400px] relative overflow-hidden" style="background: linear-gradient(135deg, ${accentColor} 0%, ${bgColor} 100%);">
                                <div class="absolute inset-0 flex items-center justify-center opacity-10">
                                    <div class="text-[20rem]">${emoji}</div>
                                </div>
                                <div class="relative z-10 flex items-center justify-center min-h-[400px] p-8" style="color: ${textColor};">
                                    <div class="text-center bg-white bg-opacity-90 p-8 rounded-2xl shadow-xl max-w-md">
                                        <div class="text-5xl mb-4">${emoji}</div>
                                        <h2 class="text-3xl font-bold mb-3">Get Well Soon</h2>
                                        <h3 class="text-xl font-semibold mb-4" style="color: ${accentColor};">${name}</h3>
                                        <p class="text-base">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        minimal: `
                            <div class="min-h-[400px] flex items-center justify-center p-12" style="background-color: ${bgColor};">
                                <div class="text-center max-w-lg">
                                    <div class="inline-block mb-6 p-6 rounded-full" style="background-color: ${accentColor}20;">
                                        <div class="text-5xl">${emoji}</div>
                                    </div>
                                    <h2 class="text-2xl font-light mb-2" style="color: ${textColor}; opacity: 0.7;">Get Well Soon</h2>
                                    <h3 class="text-3xl font-bold mb-6" style="color: ${accentColor};">${name}</h3>
                                    <div class="w-16 h-1 mx-auto mb-6" style="background-color: ${accentColor};"></div>
                                    <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        card: `
                            <div class="min-h-[400px] flex items-center justify-center p-8" style="background: linear-gradient(to bottom, ${bgColor}, ${accentColor}30);">
                                <div class="relative">
                                    <div class="absolute -top-4 -left-4 w-full h-full rounded-2xl opacity-20" style="background-color: ${accentColor};"></div>
                                    <div class="absolute -top-2 -left-2 w-full h-full rounded-2xl opacity-40" style="background-color: ${accentColor};"></div>
                                    <div class="relative bg-white p-10 rounded-2xl shadow-2xl max-w-md text-center">
                                        <div class="text-6xl mb-4">${emoji}</div>
                                        <h2 class="text-3xl font-bold mb-3" style="color: ${textColor};">Get Well Soon</h2>
                                        <h3 class="text-2xl font-semibold mb-6" style="color: ${accentColor};">${name}</h3>
                                        <p class="text-base leading-relaxed text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        gradient: `
                            <div class="min-h-[400px] relative overflow-hidden" style="background: linear-gradient(45deg, ${bgColor} 0%, ${accentColor}40 50%, ${bgColor} 100%);">
                                <div class="absolute top-0 right-0 w-64 h-64 rounded-full opacity-20 -mr-32 -mt-32" style="background-color: ${accentColor};"></div>
                                <div class="absolute bottom-0 left-0 w-96 h-96 rounded-full opacity-20 -ml-48 -mb-48" style="background-color: ${accentColor};"></div>
                                <div class="relative z-10 flex items-center justify-center min-h-[400px] p-8" style="color: ${textColor};">
                                    <div class="text-center max-w-md">
                                        <div class="text-7xl mb-6 animate-pulse">${emoji}</div>
                                        <h2 class="text-4xl font-bold mb-4">Get Well Soon</h2>
                                        <h3 class="text-2xl font-semibold mb-6 px-6 py-2 rounded-full inline-block" style="background-color: ${accentColor}30;">${name}</h3>
                                        <p class="text-lg leading-relaxed">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        floral: `
                            <div class="min-h-[400px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="relative max-w-lg w-full">
                                    <div class="absolute -top-2 -left-2 text-4xl" style="color: ${accentColor};">${emoji}</div>
                                    <div class="absolute -top-2 -right-2 text-4xl" style="color: ${accentColor};">${emoji}</div>
                                    <div class="absolute -bottom-2 -left-2 text-4xl" style="color: ${accentColor};">${emoji}</div>
                                    <div class="absolute -bottom-2 -right-2 text-4xl" style="color: ${accentColor};">${emoji}</div>
                                    <div class="border-4 rounded-3xl p-10 text-center" style="border-color: ${accentColor}; color: ${textColor};">
                                        <div class="text-6xl mb-4">${emoji}</div>
                                        <h2 class="text-3xl font-bold mb-3">Get Well Soon</h2>
                                        <h3 class="text-2xl font-semibold mb-6" style="color: ${accentColor};">${name}</h3>
                                        <p class="text-base leading-relaxed">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        modern: `
                            <div class="min-h-[400px] flex items-center p-8" style="background-color: ${bgColor};">
                                <div class="w-full max-w-4xl mx-auto grid md:grid-cols-3 gap-8 items-center">
                                    <div class="md:col-span-1 flex justify-center">
                                        <div class="w-32 h-32 rounded-full flex items-center justify-center shadow-2xl" style="background: linear-gradient(135deg, ${accentColor} 0%, ${bgColor} 100%);">
                                            <div class="text-6xl">${emoji}</div>
                                        </div>
                                    </div>
                                    <div class="md:col-span-2" style="color: ${textColor};">
                                        <div class="mb-2 inline-block px-4 py-1 rounded-full text-sm font-semibold" style="background-color: ${accentColor}; color: white;">Get Well Soon</div>
                                        <h3 class="text-4xl font-bold mb-4">${name}</h3>
                                        <div class="w-20 h-1 mb-4" style="background-color: ${accentColor};"></div>
                                        <p class="text-lg leading-relaxed">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.centered;
                }
            },
            healingMessage: {
                name: 'üíö Healing Wishes',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Healing Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="message" rows="4" onchange="updatePreview()" placeholder="I hope each new day brings you closer to a full and speedy recovery. Take care of yourself and know that you're in our thoughts."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="simple">Simple Clean</option>
                                <option value="card">Heart Card</option>
                                <option value="quote">Quote Style</option>
                                <option value="bordered">Bordered Elegant</option>
                                <option value="accent">Accent Bar</option>
                                <option value="floating">Floating Box</option>
                                <option value="wavy">Wavy Background</option>
                                <option value="spotlight">Spotlight</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffffff" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#1f2937" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#10b981" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffffff';
                    const textColor = style.textColor || '#1f2937';
                    const accentColor = style.accentColor || '#10b981';
                    const layout = style.layout || 'simple';
                    const message = data.message || 'Sending healing thoughts your way';

                    const layouts = {
                        simple: `
                            <div class="p-8" style="background-color: ${bgColor}; color: ${textColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-5xl mb-4">üíö</div>
                                    <p class="text-lg leading-relaxed">${message}</p>
                                </div>
                            </div>
                        `,
                        card: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl shadow-xl p-8 border-t-4" style="border-color: ${accentColor};">
                                    <div class="flex items-start gap-4">
                                        <div class="text-4xl flex-shrink-0" style="color: ${accentColor};">üíö</div>
                                        <p class="text-lg leading-relaxed pt-2" style="color: ${textColor};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        quote: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="relative">
                                        <div class="absolute -top-4 -left-4 text-6xl opacity-20" style="color: ${accentColor};">"</div>
                                        <div class="relative pl-8">
                                            <div class="text-3xl mb-4" style="color: ${accentColor};">üíö</div>
                                            <p class="text-xl italic leading-relaxed" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        bordered: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-l-4 border-r-4 pl-6 pr-6 py-8" style="border-color: ${accentColor};">
                                    <div class="text-center mb-4">
                                        <div class="inline-block px-4 py-2 rounded-full" style="background-color: ${accentColor}20;">
                                            <span class="text-3xl">üíö</span>
                                        </div>
                                    </div>
                                    <p class="text-lg leading-relaxed text-center" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        accent: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex gap-4">
                                        <div class="w-2 rounded-full" style="background: linear-gradient(to bottom, ${accentColor}, ${accentColor}50);"></div>
                                        <div class="flex-1">
                                            <div class="text-4xl mb-4" style="color: ${accentColor};">üíö</div>
                                            <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        floating: `
                            <div class="p-8 relative" style="background: linear-gradient(to bottom right, ${bgColor}, ${accentColor}10);">
                                <div class="absolute top-0 right-0 w-32 h-32 rounded-full opacity-10" style="background-color: ${accentColor};"></div>
                                <div class="max-w-lg mx-auto bg-white rounded-xl shadow-2xl p-8 relative z-10">
                                    <div class="text-center">
                                        <div class="w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center" style="background-color: ${accentColor};">
                                            <span class="text-3xl">üíö</span>
                                        </div>
                                        <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        wavy: `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute inset-0" style="background: repeating-linear-gradient(45deg, transparent, transparent 10px, ${accentColor}08 10px, ${accentColor}08 20px);"></div>
                                <div class="max-w-lg mx-auto relative z-10">
                                    <div class="bg-white bg-opacity-90 rounded-2xl p-8 shadow-lg">
                                        <div class="text-center mb-4">
                                            <span class="text-5xl">üíö</span>
                                        </div>
                                        <p class="text-lg leading-relaxed text-center" style="color: ${textColor};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        spotlight: `
                            <div class="p-8 relative" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto relative">
                                    <div class="absolute -inset-4 rounded-full opacity-20 blur-2xl" style="background: radial-gradient(circle, ${accentColor} 0%, transparent 70%);"></div>
                                    <div class="relative text-center">
                                        <div class="inline-block mb-6 p-6 rounded-full shadow-xl" style="background: linear-gradient(135deg, ${accentColor}30, ${accentColor}10);">
                                            <span class="text-5xl">üíö</span>
                                        </div>
                                        <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.simple;
                }
            },
            supportMessage: {
                name: 'ü§ù Support Message',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Support Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="If you need anything at all, please don't hesitate to reach out. I'm here for you."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="centered">Centered Simple</option>
                                <option value="badge">Badge Style</option>
                                <option value="ribbon">Ribbon Banner</option>
                                <option value="box">Box Highlight</option>
                                <option value="underline">Underline Accent</option>
                                <option value="split">Split Panel</option>
                                <option value="callout">Callout Box</option>
                                <option value="bubble">Speech Bubble</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ecfdf5" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#064e3b" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#10b981" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ecfdf5';
                    const textColor = style.textColor || '#064e3b';
                    const accentColor = style.accentColor || '#10b981';
                    const layout = style.layout || 'centered';
                    const message = data.message || "I'm here for you";

                    const layouts = {
                        centered: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">ü§ù</div>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        badge: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-flex items-center gap-3 px-6 py-4 rounded-full shadow-lg mb-4" style="background-color: ${accentColor}; color: white;">
                                        <span class="text-3xl">ü§ù</span>
                                        <span class="font-semibold">We're Here For You</span>
                                    </div>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        ribbon: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-2xl mx-auto">
                                    <div class="relative py-4 px-8 mb-6" style="background-color: ${accentColor};">
                                        <div class="absolute left-0 top-0 w-0 h-0" style="border-top: 28px solid transparent; border-bottom: 28px solid transparent; border-left: 20px solid ${bgColor};"></div>
                                        <div class="absolute right-0 top-0 w-0 h-0" style="border-top: 28px solid transparent; border-bottom: 28px solid transparent; border-right: 20px solid ${bgColor};"></div>
                                        <div class="text-center text-white font-semibold flex items-center justify-center gap-2">
                                            <span class="text-2xl">ü§ù</span>
                                            <span>Support & Care</span>
                                        </div>
                                    </div>
                                    <p class="text-lg text-center" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        box: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-xl p-6 shadow-lg" style="background: linear-gradient(135deg, ${accentColor}20, ${accentColor}05); border-left: 6px solid ${accentColor};">
                                    <div class="flex items-start gap-4">
                                        <div class="text-4xl flex-shrink-0" style="color: ${accentColor};">ü§ù</div>
                                        <div>
                                            <h4 class="font-bold text-lg mb-2" style="color: ${accentColor};">We're Here for You</h4>
                                            <p class="text-base" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        underline: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-5xl mb-3">ü§ù</div>
                                    <h4 class="text-xl font-bold mb-1" style="color: ${accentColor};">Always Here to Help</h4>
                                    <div class="w-24 h-1 mx-auto mb-6" style="background-color: ${accentColor};"></div>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        split: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-2xl mx-auto grid md:grid-cols-5 gap-6 items-center">
                                    <div class="md:col-span-2 flex justify-center">
                                        <div class="w-24 h-24 rounded-full flex items-center justify-center shadow-xl" style="background: linear-gradient(135deg, ${accentColor}, ${accentColor}80);">
                                            <span class="text-5xl">ü§ù</span>
                                        </div>
                                    </div>
                                    <div class="md:col-span-3">
                                        <h4 class="font-bold text-lg mb-2" style="color: ${accentColor};">Support Available</h4>
                                        <p class="text-base" style="color: ${textColor};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        callout: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto relative">
                                    <div class="absolute -inset-1 rounded-lg opacity-30 blur" style="background: linear-gradient(45deg, ${accentColor}, ${accentColor}50);"></div>
                                    <div class="relative bg-white rounded-lg p-6 shadow-xl border-2" style="border-color: ${accentColor};">
                                        <div class="text-center">
                                            <div class="text-4xl mb-3">ü§ù</div>
                                            <div class="inline-block px-4 py-1 rounded-full text-sm font-semibold mb-3" style="background-color: ${accentColor}; color: white;">
                                                We Care
                                            </div>
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        bubble: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="relative bg-white rounded-3xl p-8 shadow-xl" style="border: 3px solid ${accentColor};">
                                        <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 px-4 py-1 rounded-full" style="background-color: ${accentColor};">
                                            <span class="text-2xl">ü§ù</span>
                                        </div>
                                        <div class="pt-4 text-center">
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                        <div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-6 h-6 rotate-45" style="background-color: ${accentColor};"></div>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.centered;
                }
            },
            memories: {
                name: '‚ú® Happy Memories',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Share a Happy Memory</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="memory" rows="4" onchange="updatePreview()" placeholder="Remember that time we..."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="simple">Simple Classic</option>
                                <option value="polaroid">Polaroid Style</option>
                                <option value="scrapbook">Scrapbook</option>
                                <option value="starry">Starry Night</option>
                                <option value="notebook">Notebook Page</option>
                                <option value="frame">Photo Frame</option>
                                <option value="cloud">Cloud Memory</option>
                                <option value="timeline">Timeline Style</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fffbeb" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#78350f" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#f59e0b" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fffbeb';
                    const textColor = style.textColor || '#78350f';
                    const accentColor = style.accentColor || '#f59e0b';
                    const layout = style.layout || 'simple';
                    const memory = data.memory || 'Thinking of all our happy times together';

                    const layouts = {
                        simple: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4" style="color: ${accentColor};">‚ú®</div>
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${textColor};">A Happy Memory</h3>
                                    <p class="italic" style="color: ${textColor};">${memory}</p>
                                </div>
                            </div>
                        `,
                        polaroid: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto">
                                    <div class="bg-white p-4 shadow-2xl transform rotate-2">
                                        <div class="aspect-video rounded mb-4 flex items-center justify-center" style="background: linear-gradient(135deg, ${accentColor}20, ${accentColor}05);">
                                            <span class="text-6xl">‚ú®</span>
                                        </div>
                                        <p class="text-base italic text-center" style="color: ${textColor}; font-family: 'Courier New', monospace;">${memory}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        scrapbook: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto relative">
                                    <div class="absolute -top-2 -right-2 w-12 h-12 rounded-full opacity-30" style="background-color: ${accentColor};"></div>
                                    <div class="absolute -bottom-2 -left-2 w-16 h-16 rounded-full opacity-20" style="background-color: ${accentColor};"></div>
                                    <div class="relative bg-white p-6 rounded-lg shadow-lg border-4 border-dashed" style="border-color: ${accentColor};">
                                        <div class="flex items-center gap-3 mb-3">
                                            <span class="text-3xl">‚ú®</span>
                                            <h3 class="text-lg font-bold" style="color: ${accentColor};">Memory Lane</h3>
                                        </div>
                                        <p class="text-base italic" style="color: ${textColor};">${memory}</p>
                                        <div class="mt-4 flex gap-2">
                                            <div class="w-2 h-2 rounded-full" style="background-color: ${accentColor};"></div>
                                            <div class="w-2 h-2 rounded-full" style="background-color: ${accentColor};"></div>
                                            <div class="w-2 h-2 rounded-full" style="background-color: ${accentColor};"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        starry: `
                            <div class="p-8 relative overflow-hidden" style="background: linear-gradient(to bottom, ${bgColor}, ${accentColor}20);">
                                <div class="absolute top-4 left-4 text-2xl opacity-50" style="color: ${accentColor};">‚ú®</div>
                                <div class="absolute top-12 right-8 text-xl opacity-40" style="color: ${accentColor};">‚ú®</div>
                                <div class="absolute bottom-8 left-12 text-3xl opacity-30" style="color: ${accentColor};">‚ú®</div>
                                <div class="absolute bottom-4 right-4 text-2xl opacity-50" style="color: ${accentColor};">‚ú®</div>
                                <div class="max-w-lg mx-auto relative z-10 text-center">
                                    <div class="text-6xl mb-4">‚ú®</div>
                                    <h3 class="text-2xl font-bold mb-4" style="color: ${accentColor};">Cherished Memory</h3>
                                    <p class="text-lg italic" style="color: ${textColor};">${memory}</p>
                                </div>
                            </div>
                        `,
                        notebook: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-r-lg shadow-xl border-l-8" style="border-color: ${accentColor};">
                                    <div class="p-6" style="background-image: repeating-linear-gradient(transparent, transparent 31px, #e5e7eb 31px, #e5e7eb 32px);">
                                        <div class="flex items-center gap-2 mb-4">
                                            <span class="text-3xl">‚ú®</span>
                                            <h3 class="font-bold text-lg" style="color: ${accentColor};">Memory Note</h3>
                                        </div>
                                        <p class="text-base italic leading-8" style="color: ${textColor}; font-family: 'Courier New', monospace;">${memory}</p>
                                    </div>
                                </div>
                            </div>
                        `,
                        frame: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="p-6 rounded-lg shadow-2xl" style="background: linear-gradient(145deg, ${accentColor}, ${accentColor}cc);">
                                        <div class="bg-white p-6 rounded">
                                            <div class="text-center mb-4">
                                                <div class="inline-block p-3 rounded-full" style="background-color: ${accentColor}20;">
                                                    <span class="text-4xl">‚ú®</span>
                                                </div>
                                            </div>
                                            <h3 class="text-center text-lg font-bold mb-3" style="color: ${accentColor};">Treasured Moment</h3>
                                            <p class="text-center italic" style="color: ${textColor};">${memory}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        cloud: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto relative">
                                    <div class="relative rounded-3xl p-8 shadow-lg" style="background: linear-gradient(135deg, white, ${accentColor}10);">
                                        <div class="absolute -top-3 left-1/4 w-20 h-12 rounded-full opacity-20" style="background-color: ${accentColor};"></div>
                                        <div class="absolute -top-2 left-1/3 w-24 h-14 rounded-full opacity-30" style="background-color: ${accentColor};"></div>
                                        <div class="relative z-10 text-center">
                                            <div class="text-5xl mb-4">‚ú®</div>
                                            <h3 class="text-lg font-semibold mb-3" style="color: ${accentColor};">Dream Memory</h3>
                                            <p class="italic" style="color: ${textColor};">${memory}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        timeline: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex gap-4">
                                    <div class="flex flex-col items-center">
                                        <div class="w-12 h-12 rounded-full flex items-center justify-center shadow-lg" style="background-color: ${accentColor};">
                                            <span class="text-2xl">‚ú®</span>
                                        </div>
                                        <div class="w-1 flex-1 mt-2" style="background: linear-gradient(to bottom, ${accentColor}, transparent);"></div>
                                    </div>
                                    <div class="flex-1 pb-8">
                                        <h3 class="text-lg font-bold mb-2" style="color: ${accentColor};">Special Memory</h3>
                                        <div class="bg-white rounded-lg p-4 shadow-md">
                                            <p class="text-base italic" style="color: ${textColor};">${memory}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.simple;
                }
            },
            humor: {
                name: 'üòä Light Humor',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Lighthearted Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="Don't worry, I've been taking care of your plants... they miss you (and so do I!)"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="cheerful">Cheerful Simple</option>
                                <option value="comic">Comic Strip</option>
                                <option value="sticker">Sticker Style</option>
                                <option value="playful">Playful Bounce</option>
                                <option value="sunshine">Sunshine Bright</option>
                                <option value="balloon">Balloon Pop</option>
                                <option value="doodle">Doodle Border</option>
                                <option value="smile">Big Smile</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#78350f" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#f59e0b" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const textColor = style.textColor || '#78350f';
                    const accentColor = style.accentColor || '#f59e0b';
                    const layout = style.layout || 'cheerful';
                    const message = data.message || 'Sending you a smile!';

                    const layouts = {
                        cheerful: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-5xl mb-4">üòä</div>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        comic: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="relative bg-white rounded-lg p-6 shadow-xl border-4 border-black">
                                        <div class="absolute -top-3 -right-3 w-16 h-16 rounded-full flex items-center justify-center border-4 border-black" style="background-color: ${accentColor};">
                                            <span class="text-3xl">üòä</span>
                                        </div>
                                        <div class="pr-8">
                                            <div class="text-xs font-bold mb-2 uppercase tracking-wide" style="color: ${accentColor};">Ha Ha!</div>
                                            <p class="text-base font-medium" style="color: ${textColor};">${message}</p>
                                        </div>
                                        <div class="absolute -bottom-4 left-8 w-0 h-0" style="border-left: 20px solid transparent; border-right: 0px solid transparent; border-top: 20px solid black;"></div>
                                        <div class="absolute -bottom-3 left-8 w-0 h-0" style="border-left: 17px solid transparent; border-right: 0px solid transparent; border-top: 17px solid white;"></div>
                                    </div>
                                </div>
                            </div>
                        `,
                        sticker: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block transform -rotate-3">
                                        <div class="rounded-full p-8 shadow-2xl border-4" style="background: linear-gradient(135deg, ${accentColor}, ${accentColor}cc); border-color: white;">
                                            <div class="text-6xl mb-3">üòä</div>
                                            <div class="text-sm font-bold text-white uppercase">Smile!</div>
                                        </div>
                                    </div>
                                    <p class="text-lg mt-6" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        playful: `
                            <div class="p-8 relative overflow-hidden" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}20);">
                                <div class="absolute top-4 right-4 text-3xl transform rotate-12">üòä</div>
                                <div class="absolute bottom-8 left-4 text-4xl transform -rotate-12">üòä</div>
                                <div class="max-w-lg mx-auto relative z-10">
                                    <div class="bg-white rounded-2xl p-8 shadow-xl transform hover:rotate-1 transition-transform">
                                        <div class="text-center">
                                            <div class="text-6xl mb-4 animate-bounce">üòä</div>
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        sunshine: `
                            <div class="p-8 relative" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="relative inline-block mb-6">
                                        <div class="absolute inset-0 animate-ping opacity-20">
                                            <div class="w-24 h-24 rounded-full mx-auto" style="background-color: ${accentColor};"></div>
                                        </div>
                                        <div class="relative w-24 h-24 rounded-full mx-auto flex items-center justify-center shadow-xl" style="background: radial-gradient(circle, ${accentColor}, ${accentColor}cc);">
                                            <span class="text-5xl">üòä</span>
                                        </div>
                                    </div>
                                    <h3 class="text-xl font-bold mb-3" style="color: ${accentColor};">Brighten Your Day!</h3>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        balloon: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex justify-center gap-4 mb-6">
                                        <div class="w-16 h-20 rounded-full transform -rotate-6" style="background: linear-gradient(to bottom, ${accentColor}, ${accentColor}dd);"></div>
                                        <div class="w-20 h-24 rounded-full flex items-center justify-center shadow-xl" style="background: linear-gradient(to bottom, ${accentColor}, ${accentColor}cc);">
                                            <span class="text-4xl">üòä</span>
                                        </div>
                                        <div class="w-16 h-20 rounded-full transform rotate-6" style="background: linear-gradient(to bottom, ${accentColor}, ${accentColor}dd);"></div>
                                    </div>
                                    <p class="text-lg text-center" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        doodle: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto relative">
                                    <div class="absolute -top-2 -left-2 text-2xl" style="color: ${accentColor};">üòä</div>
                                    <div class="absolute top-0 -right-2 text-xl" style="color: ${accentColor};">üòä</div>
                                    <div class="absolute -bottom-2 left-4 text-2xl" style="color: ${accentColor};">üòä</div>
                                    <div class="absolute bottom-0 -right-2 text-xl" style="color: ${accentColor};">üòä</div>
                                    <div class="bg-white rounded-xl p-8 shadow-lg border-2 border-dashed" style="border-color: ${accentColor};">
                                        <div class="text-center">
                                            <div class="text-5xl mb-4">üòä</div>
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        smile: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="rounded-3xl p-8 shadow-2xl" style="background: linear-gradient(to bottom right, white, ${accentColor}20);">
                                        <div class="flex items-center gap-6">
                                            <div class="flex-shrink-0">
                                                <div class="w-20 h-20 rounded-full flex items-center justify-center shadow-lg" style="background-color: ${accentColor};">
                                                    <span class="text-5xl">üòä</span>
                                                </div>
                                            </div>
                                            <div class="flex-1">
                                                <div class="inline-block px-4 py-1 rounded-full text-xs font-bold mb-2" style="background-color: ${accentColor}; color: white;">
                                                    A Little Cheer
                                                </div>
                                                <p class="text-base" style="color: ${textColor};">${message}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.cheerful;
                }
            },
            thoughts: {
                name: 'üôè Positive Thoughts',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Prayers/Positive Thoughts</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="Sending positive thoughts and prayers for your quick recovery."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="peaceful">Peaceful Simple</option>
                                <option value="serene">Serene Calm</option>
                                <option value="blessing">Blessing Card</option>
                                <option value="meditation">Meditation</option>
                                <option value="lotus">Lotus Peace</option>
                                <option value="candle">Candle Light</option>
                                <option value="prayer">Prayer Circle</option>
                                <option value="spiritual">Spiritual Glow</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ede9fe" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#5b21b6" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#8b5cf6" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ede9fe';
                    const textColor = style.textColor || '#5b21b6';
                    const accentColor = style.accentColor || '#8b5cf6';
                    const layout = style.layout || 'peaceful';
                    const message = data.message || 'You are in our thoughts and prayers';

                    const layouts = {
                        peaceful: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-5xl mb-4" style="color: ${accentColor};">üôè</div>
                                    <p class="text-lg" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        serene: `
                            <div class="p-8 relative overflow-hidden" style="background: linear-gradient(to bottom, ${bgColor}, ${accentColor}10);">
                                <div class="absolute inset-0 opacity-5">
                                    <div class="absolute top-1/4 left-1/4 w-32 h-32 rounded-full" style="background-color: ${accentColor};"></div>
                                    <div class="absolute bottom-1/4 right-1/4 w-40 h-40 rounded-full" style="background-color: ${accentColor};"></div>
                                </div>
                                <div class="max-w-lg mx-auto relative z-10 text-center">
                                    <div class="inline-block mb-6 p-6 rounded-full" style="background: linear-gradient(135deg, ${accentColor}20, ${accentColor}05);">
                                        <span class="text-5xl">üôè</span>
                                    </div>
                                    <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        blessing: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-8 shadow-xl relative overflow-hidden">
                                        <div class="absolute top-0 right-0 w-32 h-32 opacity-10" style="background: radial-gradient(circle, ${accentColor}, transparent);"></div>
                                        <div class="absolute bottom-0 left-0 w-32 h-32 opacity-10" style="background: radial-gradient(circle, ${accentColor}, transparent);"></div>
                                        <div class="relative z-10 text-center">
                                            <h3 class="text-sm font-semibold uppercase tracking-wide mb-3" style="color: ${accentColor};">Blessings</h3>
                                            <div class="text-5xl mb-4">üôè</div>
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        meditation: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex items-center gap-6">
                                        <div class="flex-shrink-0">
                                            <div class="relative">
                                                <div class="absolute inset-0 rounded-full opacity-20 animate-pulse" style="background-color: ${accentColor};"></div>
                                                <div class="relative w-24 h-24 rounded-full flex items-center justify-center" style="background: linear-gradient(135deg, ${accentColor}30, ${accentColor}10);">
                                                    <span class="text-5xl">üôè</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="flex-1">
                                            <div class="w-12 h-1 mb-3" style="background-color: ${accentColor};"></div>
                                            <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        lotus: `
                            <div class="p-8 relative" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}15);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="relative inline-block mb-6">
                                        <div class="absolute -inset-4 rounded-full opacity-20" style="background: radial-gradient(circle, ${accentColor}, transparent);"></div>
                                        <div class="relative">
                                            <div class="text-6xl mb-2">üôè</div>
                                            <div class="flex justify-center gap-1">
                                                <div class="w-3 h-3 rounded-full" style="background-color: ${accentColor};"></div>
                                                <div class="w-3 h-3 rounded-full" style="background-color: ${accentColor};"></div>
                                                <div class="w-3 h-3 rounded-full" style="background-color: ${accentColor};"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                </div>
                            </div>
                        `,
                        candle: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="relative rounded-3xl p-8 shadow-xl" style="background: linear-gradient(to bottom, ${accentColor}10, ${bgColor});">
                                        <div class="text-center mb-6">
                                            <div class="relative inline-block">
                                                <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-8 h-8 rounded-full opacity-30 blur-sm" style="background-color: ${accentColor};"></div>
                                                <div class="text-5xl">üôè</div>
                                            </div>
                                        </div>
                                        <div class="text-center">
                                            <div class="inline-block px-6 py-2 rounded-full text-sm font-semibold mb-4" style="background-color: ${accentColor}; color: white;">
                                                Light & Peace
                                            </div>
                                            <p class="text-lg" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        prayer: `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="relative">
                                        <div class="absolute inset-0 rounded-full opacity-5" style="background: radial-gradient(circle, ${accentColor}, transparent);"></div>
                                        <div class="relative bg-white rounded-2xl p-8 shadow-lg border-2" style="border-color: ${accentColor};">
                                            <div class="flex flex-col items-center text-center">
                                                <div class="w-20 h-20 rounded-full flex items-center justify-center mb-4 shadow-inner" style="background: linear-gradient(135deg, ${accentColor}20, transparent);">
                                                    <span class="text-4xl">üôè</span>
                                                </div>
                                                <h3 class="text-sm font-bold uppercase tracking-wider mb-4" style="color: ${accentColor};">In Our Prayers</h3>
                                                <p class="text-lg" style="color: ${textColor};">${message}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `,
                        spiritual: `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute inset-0" style="background: repeating-radial-gradient(circle at 50% 50%, transparent 0, transparent 10px, ${accentColor}05 10px, ${accentColor}05 20px);"></div>
                                <div class="max-w-lg mx-auto relative z-10">
                                    <div class="text-center">
                                        <div class="relative inline-block mb-6">
                                            <div class="absolute inset-0 animate-pulse opacity-30 blur-lg" style="background: radial-gradient(circle, ${accentColor}, transparent);"></div>
                                            <div class="relative bg-white rounded-full p-6 shadow-2xl">
                                                <span class="text-6xl">üôè</span>
                                            </div>
                                        </div>
                                        <div class="bg-white bg-opacity-80 rounded-xl p-6 shadow-lg">
                                            <p class="text-lg leading-relaxed" style="color: ${textColor};">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    };

                    return layouts[layout] || layouts.peaceful;
                }
            }
        };

        // Merge shared components into sectionTemplates
        Object.assign(sectionTemplates, window.sectionComponents);

        function openSectionModal() {
            document.getElementById('sectionModal').classList.remove('hidden');
        }

        function closeSectionModal() {
            document.getElementById('sectionModal').classList.add('hidden');
        }

        function addSection(type) {
            const template = sectionTemplates[type];
            const id = `section-${sectionCounter++}`;

            const sectionHTML = `
                <div class="border border-gray-200 rounded-xl overflow-hidden section-item" data-id="${id}" data-type="${type}">
                    <div class="bg-gray-50 border-b px-4 py-3 flex justify-between items-center">
                        <div class="flex items-center gap-2">
                            <span class="cursor-move text-gray-400">‚ãÆ‚ãÆ</span>
                            <span class="font-semibold text-sm">${template.name}</span>
                        </div>
                        <button onclick="removeSection('${id}')" class="text-gray-400 hover:text-red-600 transition">‚úï</button>
                    </div>
                    <div class="border-b flex">
                        <button class="flex-1 px-4 py-3 text-sm font-medium border-r tab-btn active" onclick="switchTab(event, '${id}', 'info')">
                            Info
                        </button>
                        <button class="flex-1 px-4 py-3 text-sm font-medium tab-btn" onclick="switchTab(event, '${id}', 'style')">
                            Style
                        </button>
                    </div>
                    <div class="p-4 tab-content" data-tab="info">
                        ${template.info}
                    </div>
                    <div class="p-4 tab-content hidden" data-tab="style">
                        ${template.style}
                    </div>
                </div>
            `;

            document.getElementById('sectionsContainer').insertAdjacentHTML('beforeend', sectionHTML);
            closeSectionModal();
            updatePreview();
        }

        function removeSection(id) {
            if (confirm('Remove this section?')) {
                document.querySelector(`[data-id="${id}"]`).remove();
                updatePreview();
            }
        }

        function switchTab(event, sectionId, tab) {
            const section = document.querySelector(`[data-id="${sectionId}"]`);
            section.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'text-green-600', 'border-b-2', 'border-green-600'));
            section.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

            event.target.classList.add('active', 'text-green-600', 'border-b-2', 'border-green-600');
            section.querySelector(`[data-tab="${tab}"]`).classList.remove('hidden');
        }

        function getSectionData(section) {
            const data = {};
            const style = {};

            section.querySelectorAll('.section-data').forEach(input => {
                const field = input.dataset.field;
                if (input.type === 'file' && input.dataset.imageData) {
                    data[field] = input.dataset.imageData;
                } else {
                    data[field] = input.value;
                }
            });

            section.querySelectorAll('.section-style').forEach(input => {
                style[input.dataset.style] = input.value;
            });

            return { data, style };
        }

        function updatePreview() {
            const sections = document.querySelectorAll('.section-item');
            let html = '';

            if (sections.length === 0) {
                html = `
                    <div class="flex items-center justify-center h-full text-center p-8">
                        <div>
                            <div class="text-6xl mb-4">üå∫</div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                            <p class="text-gray-600 text-sm">Add sections to create your get well soon card</p>
                        </div>
                    </div>
                `;
            } else {
                sections.forEach(section => {
                    const type = section.dataset.type;
                    const template = sectionTemplates[type];
                    const { data, style } = getSectionData(section);
                    html += template.render(data, style);
                });
            }

            document.getElementById('previewContent').innerHTML = html;

            // Also update mobile preview if it's open
            const mobilePreview = document.getElementById('mobilePreviewContent');
            if (mobilePreview && !document.getElementById('mobilePreviewModal').classList.contains('hidden')) {
                mobilePreview.innerHTML = html;
            }
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    input.dataset.imageData = e.target.result;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function setDevice(device) {
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-green-500', 'text-white');
            });
            event.target.classList.add('active', 'bg-green-500', 'text-white');

            const frame = document.getElementById('mobileFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        function previewFullscreen() {
            window.open('', '_blank');
            alert('Full screen preview would open here');
        }

        function generateQR() {
            document.getElementById('qrModal').classList.remove('hidden');
        }

        function closeQRModal() {
            document.getElementById('qrModal').classList.add('hidden');
        }

        function copyUrl() {
            const url = document.getElementById('shareUrl').textContent;
            navigator.clipboard.writeText(url).then(() => {
                alert('Link copied to clipboard! You can now share it with your loved one.');
            });
        }

        function publishProject() {
            if (confirm('Complete your get well soon card?')) {
                alert('‚úÖ Your card is ready!\n\nYou can now share the link or QR code with your loved one.');
            }
        }

        function openMobilePreview() {
            // Copy preview content to mobile preview modal
            const previewContent = document.getElementById('previewContent').innerHTML;
            document.getElementById('mobilePreviewContent').innerHTML = previewContent;

            // Show the modal
            document.getElementById('mobilePreviewModal').classList.remove('hidden');
        }

        function closeMobilePreview() {
            document.getElementById('mobilePreviewModal').classList.add('hidden');
        }

        function setMobilePreviewDevice(device) {
            // Update active button
            document.querySelectorAll('.mobile-preview-device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-green-500', 'text-white');
            });
            event.target.classList.add('active', 'bg-green-500', 'text-white');

            // Update frame size
            const frame = document.getElementById('mobilePreviewFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        // Close modals on outside click
        document.getElementById('sectionModal').addEventListener('click', (e) => {
            if (e.target.id === 'sectionModal') closeSectionModal();
        });
        document.getElementById('qrModal').addEventListener('click', (e) => {
            if (e.target.id === 'qrModal') closeQRModal();
        });
        document.getElementById('mobilePreviewModal').addEventListener('click', (e) => {
            if (e.target.id === 'mobilePreviewModal') closeMobilePreview();
        });

        // Initialize with a default hero section
        window.addEventListener('DOMContentLoaded', () => {
            addSection('hero');
        });
    </script>
</body>
</html>
