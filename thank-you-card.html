<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thank You Card - InviteGen</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50 border-b">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <a href="index.html" class="text-2xl hover:scale-110 transition-transform">üé®</a>
                    <div>
                        <h1 class="text-xl font-bold bg-gradient-to-r from-amber-400 to-orange-500 bg-clip-text text-transparent">
                            InviteGen
                        </h1>
                        <p class="text-xs text-gray-500">Thank You Card</p>
                    </div>
                </div>
                <div class="flex gap-3">
                    <button onclick="previewFullscreen()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üëÅÔ∏è Preview
                    </button>
                    <button onclick="generateQR()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition">
                        üì± Share
                    </button>
                    <button onclick="publishProject()" class="px-4 py-2 bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-lg text-sm font-medium hover:shadow-lg transition">
                        ‚úì Complete
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="flex h-[calc(100vh-73px)]">
        <!-- Left Panel - Editor -->
        <div class="w-full lg:w-5/12 bg-white border-r overflow-y-auto">
            <div class="p-6">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">Create Thank You Card</h2>
                    <p class="text-sm text-gray-600 mt-1">Express your gratitude and appreciation</p>
                </div>

                <!-- Sections Container -->
                <div id="sectionsContainer" class="space-y-4">
                    <!-- Sections will be added here dynamically -->
                </div>

                <!-- Add Section Button -->
                <button onclick="openSectionModal()" class="w-full mt-6 py-4 border-2 border-dashed border-gray-300 rounded-xl text-amber-600 font-semibold hover:border-amber-400 hover:bg-amber-50 transition flex items-center justify-center gap-2">
                    <span class="text-xl">+</span>
                    Add Section
                </button>
            </div>
        </div>

        <!-- Right Panel - Preview -->
        <div class="hidden lg:flex w-7/12 bg-gradient-to-br from-gray-100 to-gray-200 p-8 overflow-y-auto justify-center">
            <div class="h-fit">
                <div class="flex justify-between items-center mb-6 max-w-md mx-auto">
                    <h3 class="text-lg font-semibold text-gray-700">Live Preview</h3>
                    <div class="flex gap-2">
                        <button onclick="setDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn active" data-device="mobile">
                            üì±
                        </button>
                        <button onclick="setDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition device-btn" data-device="tablet">
                            üíª
                        </button>
                    </div>
                </div>

                <!-- Mobile Frame -->
                <div id="mobileFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl mx-auto">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="previewContent">
                        <div class="flex items-center justify-center h-full text-center p-8">
                            <div>
                                <div class="text-6xl mb-4">üôè</div>
                                <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                                <p class="text-gray-600 text-sm">Add sections to create your thank you card</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Section Modal -->
    <div id="sectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <!-- Header -->
            <div class="p-6 border-b flex justify-between items-center">
                <h3 class="text-2xl font-bold">Add New Section</h3>
                <button onclick="closeSectionModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>

            <!-- Content -->
            <div class="overflow-y-auto flex-1 p-6">
                <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
                    <button onclick="addSection('hero')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üôè</div>
                        <div class="font-semibold text-sm">Cover Message</div>
                    </button>
                    <button onclick="addSection('gratitude')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üíõ</div>
                        <div class="font-semibold text-sm">Gratitude Message</div>
                    </button>
                    <button onclick="addSection('specificReason')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üéØ</div>
                        <div class="font-semibold text-sm">Specific Reason</div>
                    </button>
                    <button onclick="addSection('impact')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üí´</div>
                        <div class="font-semibold text-sm">Impact</div>
                    </button>
                    <button onclick="addSection('photo')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üì∑</div>
                        <div class="font-semibold text-sm">Photo</div>
                    </button>
                    <button onclick="addSection('memory')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">‚ú®</div>
                        <div class="font-semibold text-sm">Special Memory</div>
                    </button>
                    <button onclick="addSection('gift')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üéÅ</div>
                        <div class="font-semibold text-sm">Gift Appreciation</div>
                    </button>
                    <button onclick="addSection('quote')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üí≠</div>
                        <div class="font-semibold text-sm">Gratitude Quote</div>
                    </button>
                    <button onclick="addSection('signature')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">‚úçÔ∏è</div>
                        <div class="font-semibold text-sm">Signature</div>
                    </button>
                    <button onclick="addSection('futureTogether')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üåü</div>
                        <div class="font-semibold text-sm">Future Together</div>
                    </button>
                    <button onclick="addSection('yourQualities')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">‚≠ê</div>
                        <div class="font-semibold text-sm">Your Qualities</div>
                    </button>
                    <button onclick="addSection('personalNote')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üíå</div>
                        <div class="font-semibold text-sm">Personal Note</div>
                    </button>
                    <button onclick="addSection('multipleThanks')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üìù</div>
                        <div class="font-semibold text-sm">Multiple Thanks</div>
                    </button>
                    <button onclick="addSection('meetUp')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">‚òï</div>
                        <div class="font-semibold text-sm">Meet Up Invitation</div>
                    </button>
                    <button onclick="addSection('decorativeDivider')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üå∏</div>
                        <div class="font-semibold text-sm">Decorative Divider</div>
                    </button>
                    <button onclick="addSection('timeline')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üìÖ</div>
                        <div class="font-semibold text-sm">Timeline</div>
                    </button>
                    <button onclick="addSection('groupSignatures')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üë•</div>
                        <div class="font-semibold text-sm">Group Signatures</div>
                    </button>
                    <button onclick="addSection('imageGallery')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üñºÔ∏è</div>
                        <div class="font-semibold text-sm">Image Gallery</div>
                    </button>
                    <button onclick="addSection('bestWishes')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üåà</div>
                        <div class="font-semibold text-sm">Best Wishes</div>
                    </button>
                    <button onclick="addSection('achievement')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üèÜ</div>
                        <div class="font-semibold text-sm">Achievement Celebration</div>
                    </button>
                    <button onclick="addSection('contactInfo')" class="p-6 border-2 border-gray-200 rounded-xl hover:border-amber-500 hover:bg-amber-50 transition text-center">
                        <div class="text-4xl mb-2">üìß</div>
                        <div class="font-semibold text-sm">Contact Information</div>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Preview Button (Mobile Only) -->
    <button onclick="openMobilePreview()" class="lg:hidden fixed bottom-6 right-6 z-40 w-14 h-14 bg-gradient-to-r from-amber-400 to-orange-500 text-white rounded-full shadow-lg hover:shadow-xl transition flex items-center justify-center text-2xl">
        üëÅÔ∏è
    </button>

    <!-- Mobile Preview Modal -->
    <div id="mobilePreviewModal" class="hidden fixed inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4">
        <div class="w-full h-full flex flex-col">
            <!-- Modal Header -->
            <div class="flex justify-between items-center mb-4 px-2">
                <h3 class="text-lg font-semibold text-white">Live Preview</h3>
                <button onclick="closeMobilePreview()" class="text-white hover:text-gray-300 text-3xl w-10 h-10 flex items-center justify-center">√ó</button>
            </div>

            <!-- Device Toggle -->
            <div class="flex gap-2 justify-center mb-4">
                <button onclick="setMobilePreviewDevice('mobile')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn active" data-device="mobile">
                    üì± Mobile
                </button>
                <button onclick="setMobilePreviewDevice('tablet')" class="p-2 bg-white rounded-lg shadow-sm hover:shadow transition mobile-preview-device-btn" data-device="tablet">
                    üíª Tablet
                </button>
            </div>

            <!-- Mobile Frame -->
            <div class="flex-1 flex items-center justify-center overflow-auto">
                <div id="mobilePreviewFrame" class="w-[375px] h-[667px] bg-gray-900 rounded-[36px] p-3 shadow-2xl">
                    <div class="w-full h-full bg-white rounded-[28px] overflow-y-auto" id="mobilePreviewContent">
                        <!-- Preview content will be copied here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Modal -->
    <div id="qrModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full p-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Share Your Card</h3>
                <button onclick="closeQRModal()" class="text-gray-400 hover:text-gray-600 text-2xl">√ó</button>
            </div>
            <div class="text-center">
                <div class="w-64 h-64 mx-auto bg-gray-100 rounded-lg flex items-center justify-center mb-4">
                    <div class="text-center">
                        <div class="text-5xl mb-2">üôè</div>
                        <div class="text-sm text-gray-600">QR Code</div>
                    </div>
                </div>
                <div class="bg-gray-50 p-3 rounded-lg mb-4 font-mono text-sm break-all" id="shareUrl">
                    https://invitegen.com/cards/thankyou123
                </div>
                <button onclick="copyUrl()" class="w-full bg-amber-500 text-white py-3 rounded-lg font-semibold hover:bg-amber-600 transition mb-2">
                    üìã Copy Link
                </button>
                <p class="text-xs text-gray-500">Share this link to express your gratitude</p>
            </div>
        </div>
    </div>

    <!-- Load Shared Components -->
    <script src="components/photo.component.js"></script>
    <script src="components/quote.component.js"></script>
    <script src="components/signature.component.js"></script>

    <script>
        let sectionCounter = 0;

        // Initialize section components if not already done
        window.sectionComponents = window.sectionComponents || {};

        const sectionTemplates = {
            hero: {
                name: 'üôè Cover Message',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Recipient's Name</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="name" onchange="updatePreview()" placeholder="Sarah">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Main Thank You Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="Thank you so much for your kindness and generosity"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Icon Emoji</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="emoji" onchange="updatePreview()" placeholder="üôè" value="üôè">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="classic">Classic Centered</option>
                                <option value="card">Card Style</option>
                                <option value="gradient">Gradient Overlay</option>
                                <option value="minimal">Minimal</option>
                                <option value="elegant">Elegant Border</option>
                                <option value="modernSplit">Modern Split</option>
                                <option value="floatingCard">Floating Card</option>
                                <option value="cornerAccent">Corner Accent</option>
                                <option value="circleFrame">Circle Frame</option>
                                <option value="asymmetric">Asymmetric Modern</option>
                                <option value="ribbon">Ribbon Style</option>
                                <option value="stackedCards">Stacked Cards</option>
                                <option value="waveBackground">Wave Background</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#92400e" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Alignment</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="align" onchange="updatePreview()">
                                <option value="center">Center</option>
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Font Size</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="fontSize" onchange="updatePreview()">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Add Shadow</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="shadow" onchange="updatePreview()">
                                <option value="none">None</option>
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const textColor = style.textColor || '#92400e';
                    const align = style.align || 'center';
                    const layout = style.layout || 'classic';
                    const fontSize = style.fontSize || 'medium';
                    const shadow = style.shadow || 'none';
                    const name = data.name || 'Friend';
                    const message = data.message || 'Thank you so much';
                    const emoji = data.emoji || 'üôè';

                    const fontSizes = {
                        small: { emoji: 'text-4xl', title: 'text-2xl', name: 'text-xl', message: 'text-base' },
                        medium: { emoji: 'text-6xl', title: 'text-3xl', name: 'text-2xl', message: 'text-lg' },
                        large: { emoji: 'text-7xl', title: 'text-4xl', name: 'text-3xl', message: 'text-xl' },
                        xlarge: { emoji: 'text-8xl', title: 'text-5xl', name: 'text-4xl', message: 'text-2xl' }
                    };
                    const sizes = fontSizes[fontSize] || fontSizes.medium;

                    const shadows = {
                        none: '',
                        small: 'box-shadow: 0 1px 2px rgba(0,0,0,0.05);',
                        medium: 'box-shadow: 0 4px 6px rgba(0,0,0,0.1);',
                        large: 'box-shadow: 0 10px 15px rgba(0,0,0,0.15);'
                    };
                    const shadowStyle = shadows[shadow] || '';

                    if (layout === 'card') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="bg-white rounded-2xl p-8 max-w-md w-full" style="text-align: ${align}; color: ${textColor}; ${shadowStyle}">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradient') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8 relative" style="background: linear-gradient(135deg, ${bgColor} 0%, ${textColor}40 100%);">
                                <div style="text-align: ${align}; color: ${textColor}; ${shadowStyle} text-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message} font-medium">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'minimal') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div style="text-align: ${align}; color: ${textColor};">
                                    <div class="${sizes.emoji} mb-6 opacity-70">${emoji}</div>
                                    <h2 class="${sizes.title} font-light mb-3">Thank You</h2>
                                    <h3 class="${sizes.name} font-medium mb-3">${name}</h3>
                                    <p class="${sizes.message} opacity-80">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'elegant') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="border-4 border-double rounded-xl p-8 max-w-md w-full" style="text-align: ${align}; color: ${textColor}; border-color: ${textColor}; ${shadowStyle}">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'modernSplit') {
                        return `
                            <div class="min-h-[300px] flex items-stretch overflow-hidden" style="background-color: ${bgColor};">
                                <div class="w-2/5 flex items-center justify-center p-6" style="background: linear-gradient(135deg, ${textColor}20 0%, ${textColor}40 100%);">
                                    <div class="${sizes.emoji}">${emoji}</div>
                                </div>
                                <div class="w-3/5 flex items-center justify-center p-6" style="color: ${textColor};">
                                    <div style="text-align: ${align};">
                                        <h2 class="${sizes.title} font-bold mb-3">Thank You</h2>
                                        <h3 class="${sizes.name} font-semibold mb-3">${name}</h3>
                                        <p class="${sizes.message}">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingCard') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background: linear-gradient(135deg, ${bgColor} 0%, ${textColor}15 100%);">
                                <div class="bg-white rounded-3xl p-8 max-w-md w-full transform transition-transform hover:scale-105" style="text-align: ${align}; color: ${textColor}; box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 10px 20px rgba(0,0,0,0.1);">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerAccent') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute top-0 right-0 w-32 h-32 rounded-bl-full" style="background-color: ${textColor}; opacity: 0.15;"></div>
                                <div class="absolute bottom-0 left-0 w-24 h-24 rounded-tr-full" style="background-color: ${textColor}; opacity: 0.1;"></div>
                                <div class="relative z-10 max-w-md w-full" style="text-align: ${align}; color: ${textColor};">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'circleFrame') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md w-full">
                                    <div class="w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-6" style="background: linear-gradient(135deg, ${textColor}30 0%, ${textColor}50 100%);">
                                        <div class="${sizes.emoji}">${emoji}</div>
                                    </div>
                                    <div style="text-align: ${align}; color: ${textColor};">
                                        <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                        <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                        <p class="${sizes.message}">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'asymmetric') {
                        return `
                            <div class="min-h-[300px] flex items-center p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute top-0 right-0 w-48 h-full" style="background: linear-gradient(90deg, transparent 0%, ${textColor}10 100%); transform: skewX(-15deg); transform-origin: top;"></div>
                                <div class="relative z-10 max-w-md pl-4" style="color: ${textColor};">
                                    <div class="${sizes.emoji} mb-4" style="text-align: left;">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4" style="text-align: left;">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4" style="text-align: left;">${name}</h3>
                                    <p class="${sizes.message}" style="text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbon') {
                        return `
                            <div class="min-h-[300px] flex flex-col items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="relative mb-8">
                                    <div class="px-8 py-3 rounded-lg relative" style="background-color: ${textColor}; color: white;">
                                        <h2 class="${sizes.title} font-bold">Thank You</h2>
                                        <div class="absolute -bottom-2 left-0 w-0 h-0 border-t-8 border-l-8 border-transparent" style="border-t-color: ${textColor}; opacity: 0.7;"></div>
                                        <div class="absolute -bottom-2 right-0 w-0 h-0 border-t-8 border-r-8 border-transparent" style="border-t-color: ${textColor}; opacity: 0.7;"></div>
                                    </div>
                                </div>
                                <div style="text-align: ${align}; color: ${textColor};">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'stackedCards') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor};">
                                <div class="relative max-w-md w-full">
                                    <div class="absolute inset-0 bg-white rounded-2xl transform rotate-2 opacity-30" style="box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>
                                    <div class="absolute inset-0 bg-white rounded-2xl transform -rotate-1 opacity-50" style="box-shadow: 0 4px 6px rgba(0,0,0,0.1);"></div>
                                    <div class="relative bg-white rounded-2xl p-8" style="text-align: ${align}; color: ${textColor}; box-shadow: 0 10px 25px rgba(0,0,0,0.15);">
                                        <div class="${sizes.emoji} mb-4">${emoji}</div>
                                        <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                        <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                        <p class="${sizes.message}">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'waveBackground') {
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <svg class="absolute inset-0 w-full h-full" preserveAspectRatio="none" viewBox="0 0 1200 320">
                                    <path fill="${textColor}" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,138.7C960,139,1056,117,1152,117.3C1248,117,1344,139,1392,149.3L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                                </svg>
                                <div class="relative z-10 max-w-md w-full" style="text-align: ${align}; color: ${textColor};">
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        // classic
                        return `
                            <div class="min-h-[300px] flex items-center justify-center p-8" style="background-color: ${bgColor}; color: ${textColor}; text-align: ${align}; ${shadowStyle}">
                                <div>
                                    <div class="${sizes.emoji} mb-4">${emoji}</div>
                                    <h2 class="${sizes.title} font-bold mb-4">Thank You</h2>
                                    <h3 class="${sizes.name} font-semibold mb-4">${name}</h3>
                                    <p class="${sizes.message}">${message}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            gratitude: {
                name: 'üíõ Gratitude Message',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Detailed Gratitude Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="message" rows="5" onchange="updatePreview()" placeholder="I am truly grateful for your support and kindness. Your thoughtfulness has meant the world to me..."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="simple">Simple</option>
                                <option value="boxed">Boxed</option>
                                <option value="quote">Quote Style</option>
                                <option value="sidebar">Icon Sidebar</option>
                                <option value="highlighted">Highlighted</option>
                                <option value="paperCard">Paper Card</option>
                                <option value="cornerHeart">Corner Heart</option>
                                <option value="gradientBox">Gradient Box</option>
                                <option value="doubleBorder">Double Border</option>
                                <option value="floatingText">Floating Text</option>
                                <option value="heartFrame">Heart Frame</option>
                                <option value="ribbonTop">Ribbon Top</option>
                                <option value="coloredPanel">Colored Panel</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffffff" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="textColor" value="#1f2937" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Font Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="fontStyle" onchange="updatePreview()">
                                <option value="normal">Normal</option>
                                <option value="italic">Italic</option>
                                <option value="serif">Serif</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Alignment</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="align" onchange="updatePreview()">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                                <option value="right">Right</option>
                                <option value="justify">Justify</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffffff';
                    const textColor = style.textColor || '#1f2937';
                    const layout = style.layout || 'simple';
                    const fontStyle = style.fontStyle || 'normal';
                    const align = style.align || 'left';
                    const message = data.message || 'I am truly grateful for everything you have done';

                    const fontClass = fontStyle === 'italic' ? 'italic' : fontStyle === 'serif' ? 'font-serif' : '';

                    if (layout === 'boxed') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-amber-50 rounded-2xl p-8 border border-amber-200" style="color: ${textColor};">
                                    <div class="text-4xl mb-4 text-center">üíõ</div>
                                    <p class="text-lg leading-relaxed ${fontClass}" style="text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'quote') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-l-4 border-amber-500 pl-6 pr-4 py-2">
                                    <div class="flex items-start gap-4">
                                        <div class="text-4xl">üíõ</div>
                                        <p class="text-lg leading-relaxed italic ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'sidebar') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex gap-6">
                                    <div class="text-5xl flex-shrink-0">üíõ</div>
                                    <div>
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'highlighted') {
                        return `
                            <div class="p-8" style="background: linear-gradient(to bottom, ${bgColor} 0%, #fef3c7 50%, ${bgColor} 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üíõ</div>
                                    <div class="bg-amber-100 rounded-xl p-6 inline-block">
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'paperCard') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-lg p-8 border-2 border-amber-200" style="box-shadow: 4px 4px 0px #f59e0b;">
                                    <div class="text-4xl mb-4 text-center">üíõ</div>
                                    <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerHeart') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-8 -right-8 text-9xl opacity-10">üíõ</div>
                                <div class="absolute -bottom-8 -left-8 text-8xl opacity-10">üíõ</div>
                                <div class="max-w-lg mx-auto relative z-10">
                                    <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradientBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-2xl p-8" style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);">
                                    <div class="text-4xl mb-4 text-center">üíõ</div>
                                    <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'doubleBorder') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double border-amber-400 rounded-2xl p-8">
                                    <div class="border-2 border-amber-300 rounded-xl p-6">
                                        <div class="text-4xl mb-4 text-center">üíõ</div>
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingText') {
                        return `
                            <div class="p-8 relative" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block bg-white rounded-full w-20 h-20 flex items-center justify-center mb-6" style="box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);">
                                        <div class="text-5xl">üíõ</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-8" style="box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'heartFrame') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex justify-center gap-2 mb-4">
                                        <span class="text-3xl">üíõ</span>
                                        <span class="text-3xl">üíõ</span>
                                        <span class="text-3xl">üíõ</span>
                                    </div>
                                    <div class="bg-amber-50 rounded-xl p-8 border-l-4 border-r-4 border-amber-400">
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                    <div class="flex justify-center gap-2 mt-4">
                                        <span class="text-3xl">üíõ</span>
                                        <span class="text-3xl">üíõ</span>
                                        <span class="text-3xl">üíõ</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonTop') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-gradient-to-r from-amber-400 to-orange-400 text-white text-center py-3 rounded-t-xl mb-0">
                                        <div class="text-4xl">üíõ</div>
                                    </div>
                                    <div class="bg-white border-2 border-t-0 border-amber-300 rounded-b-xl p-8">
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'coloredPanel') {
                        return `
                            <div class="p-8 flex items-stretch min-h-[200px]" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex items-stretch rounded-xl overflow-hidden" style="box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div class="bg-gradient-to-b from-amber-300 to-orange-400 w-16 flex items-center justify-center flex-shrink-0">
                                        <div class="text-4xl transform -rotate-90">üíõ</div>
                                    </div>
                                    <div class="bg-white p-8 flex-1 flex items-center">
                                        <p class="text-lg leading-relaxed ${fontClass}" style="color: ${textColor}; text-align: ${align};">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        // simple
                        return `
                            <div class="p-8" style="background-color: ${bgColor}; color: ${textColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üíõ</div>
                                    <p class="text-lg leading-relaxed ${fontClass}" style="text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            specificReason: {
                name: 'üéØ Specific Reason',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">What are you thanking them for?</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="reason" rows="4" onchange="updatePreview()" placeholder="Thank you for helping me move to my new apartment. Your time and effort made the day so much easier and more enjoyable."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="standard">Standard</option>
                                <option value="card">Card</option>
                                <option value="accent">Accent Border</option>
                                <option value="split">Split Layout</option>
                                <option value="targetBox">Target Box</option>
                                <option value="cornerTarget">Corner Target</option>
                                <option value="shadedBox">Shaded Box</option>
                                <option value="iconCircle">Icon Circle</option>
                                <option value="topBanner">Top Banner</option>
                                <option value="dualTone">Dual Tone</option>
                                <option value="bulletPoint">Bullet Point</option>
                                <option value="frameStyle">Frame Style</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fffbeb" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#f59e0b" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Alignment</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="align" onchange="updatePreview()">
                                <option value="left">Left</option>
                                <option value="center">Center</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fffbeb';
                    const accentColor = style.accentColor || '#f59e0b';
                    const layout = style.layout || 'standard';
                    const align = style.align || 'left';
                    const reason = data.reason || 'Thank you for your help';

                    if (layout === 'card') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-xl p-6 shadow-lg" style="text-align: ${align};">
                                    <div class="text-4xl mb-4">üéØ</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                    <p class="text-gray-700">${reason}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'accent') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-l-4 pl-6" style="border-color: ${accentColor}; text-align: ${align};">
                                    <div class="text-4xl mb-4">üéØ</div>
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${accentColor};">What You Did</h3>
                                    <p class="text-gray-700">${reason}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'split') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex gap-6 items-start">
                                    <div class="text-5xl flex-shrink-0" style="color: ${accentColor};">üéØ</div>
                                    <div style="text-align: ${align};">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                        <p class="text-gray-700">${reason}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'targetBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-xl p-6" style="background: linear-gradient(135deg, ${accentColor}20 0%, ${accentColor}05 100%); border: 3px solid ${accentColor}40;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block rounded-full p-3" style="background-color: ${accentColor}20;">
                                            <div class="text-4xl">üéØ</div>
                                        </div>
                                    </div>
                                    <div style="text-align: ${align};">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                        <p class="text-gray-700">${reason}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerTarget') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute top-4 right-4 text-7xl opacity-20">üéØ</div>
                                <div class="max-w-lg mx-auto relative z-10" style="text-align: ${align};">
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${accentColor};">What You Did</h3>
                                    <p class="text-gray-700">${reason}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'shadedBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 relative" style="box-shadow: 8px 8px 0px ${accentColor}30;">
                                    <div class="text-4xl mb-4 text-center">üéØ</div>
                                    <div style="text-align: ${align};">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                        <p class="text-gray-700">${reason}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'iconCircle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex items-start gap-4">
                                        <div class="flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center text-3xl" style="background-color: ${accentColor};">
                                            üéØ
                                        </div>
                                        <div class="flex-1" style="text-align: ${align};">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                            <p class="text-gray-700">${reason}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'topBanner') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-center py-4 mb-4 rounded-t-xl" style="background-color: ${accentColor};">
                                        <div class="text-5xl">üéØ</div>
                                    </div>
                                    <div class="bg-white rounded-b-xl p-6 border-2 border-t-0" style="border-color: ${accentColor}40; text-align: ${align};">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                        <p class="text-gray-700">${reason}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'dualTone') {
                        return `
                            <div class="p-8 flex min-h-[200px]" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex rounded-xl overflow-hidden" style="box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <div class="w-1/3 flex items-center justify-center p-4" style="background-color: ${accentColor};">
                                        <div class="text-6xl">üéØ</div>
                                    </div>
                                    <div class="w-2/3 bg-white p-6 flex flex-col justify-center" style="text-align: ${align};">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                        <p class="text-gray-700">${reason}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'bulletPoint') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex items-start gap-4">
                                        <div class="text-5xl mt-1" style="color: ${accentColor};">üéØ</div>
                                        <div class="flex-1 border-l-4 pl-4" style="border-color: ${accentColor}; text-align: ${align};">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                            <p class="text-gray-700">${reason}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'frameStyle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-1" style="border-color: ${accentColor};">
                                    <div class="border-2 rounded-xl p-6" style="border-color: ${accentColor}40;">
                                        <div class="text-4xl mb-4 text-center">üéØ</div>
                                        <div style="text-align: ${align};">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                            <p class="text-gray-700">${reason}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto" style="text-align: ${align};">
                                    <div class="text-4xl mb-4">üéØ</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">What You Did</h3>
                                    <p class="text-gray-700">${reason}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            impact: {
                name: 'üí´ Impact',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">How did their action impact you?</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="impact" rows="4" onchange="updatePreview()" placeholder="Your support during this difficult time has given me strength and hope. I couldn't have gotten through it without you."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="standard">Standard</option>
                                <option value="highlighted">Highlighted</option>
                                <option value="bordered">Bordered</option>
                                <option value="bubbles">Speech Bubble</option>
                                <option value="glowCard">Glow Card</option>
                                <option value="cornerStar">Corner Star</option>
                                <option value="shadowBox">Shadow Box</option>
                                <option value="gradientSplit">Gradient Split</option>
                                <option value="iconCircle">Icon Circle</option>
                                <option value="wavyBorder">Wavy Border</option>
                                <option value="doubleFrame">Double Frame</option>
                                <option value="floatingImpact">Floating Impact</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Highlight Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="highlightColor" value="#fbbf24" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="textStyle" onchange="updatePreview()">
                                <option value="normal">Normal</option>
                                <option value="italic">Italic</option>
                                <option value="bold">Bold</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const highlightColor = style.highlightColor || '#fbbf24';
                    const layout = style.layout || 'standard';
                    const textStyle = style.textStyle || 'normal';
                    const impact = data.impact || 'Your kindness has made a real difference';

                    const textClass = textStyle === 'italic' ? 'italic' : textStyle === 'bold' ? 'font-bold' : '';

                    if (layout === 'highlighted') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-xl p-6" style="background-color: ${highlightColor}20;">
                                    <div class="text-4xl mb-4 text-center">üí´</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900 text-center">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'bordered') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-2 rounded-xl p-6" style="border-color: ${highlightColor};">
                                    <div class="text-4xl mb-4">üí´</div>
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${highlightColor};">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'bubbles') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üí´</div>
                                    <div class="bg-white rounded-3xl p-6 shadow-md relative">
                                        <div class="absolute -bottom-2 left-8 w-4 h-4 bg-white transform rotate-45"></div>
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">The Impact</h3>
                                        <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'glowCard') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 40px ${highlightColor}40;">
                                    <div class="text-4xl mb-4 text-center">üí´</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${highlightColor};">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerStar') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-4 -right-4 text-8xl opacity-15">üí´</div>
                                <div class="max-w-lg mx-auto relative z-10">
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${highlightColor};">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'shadowBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 10px 10px 0px ${highlightColor}30;">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="text-4xl">üí´</div>
                                        <h3 class="text-xl font-semibold text-gray-900">The Impact</h3>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradientSplit') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-2xl overflow-hidden" style="background: linear-gradient(135deg, ${highlightColor}20 0%, transparent 100%);">
                                    <div class="p-6">
                                        <div class="flex items-start gap-4">
                                            <div class="text-5xl" style="color: ${highlightColor};">üí´</div>
                                            <div>
                                                <h3 class="text-xl font-semibold mb-3 text-gray-900">The Impact</h3>
                                                <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'iconCircle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex items-start gap-4">
                                        <div class="flex-shrink-0 w-16 h-16 rounded-full flex items-center justify-center text-3xl" style="background-color: ${highlightColor};">
                                            üí´
                                        </div>
                                        <div class="flex-1">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">The Impact</h3>
                                            <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'wavyBorder') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-dashed rounded-3xl p-6" style="border-color: ${highlightColor};">
                                    <div class="text-center mb-4">
                                        <div class="inline-block rounded-full p-3" style="background-color: ${highlightColor}20;">
                                            <div class="text-4xl">üí´</div>
                                        </div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-center text-gray-900">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'doubleFrame') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${highlightColor};">
                                    <div class="border-2 rounded-xl p-6" style="border-color: ${highlightColor}60;">
                                        <div class="text-4xl mb-4 text-center">üí´</div>
                                        <h3 class="text-xl font-semibold mb-3 text-center text-gray-900">The Impact</h3>
                                        <p class="text-gray-700 leading-relaxed text-center ${textClass}">${impact}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingImpact') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block bg-white rounded-full w-24 h-24 flex items-center justify-center mb-6" style="box-shadow: 0 15px 40px ${highlightColor}30;">
                                        <div class="text-6xl">üí´</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6" style="box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">The Impact</h3>
                                        <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4">üí´</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">The Impact</h3>
                                    <p class="text-gray-700 leading-relaxed ${textClass}">${impact}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            memory: {
                name: '‚ú® Special Memory',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Share a Special Memory</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="memory" rows="4" onchange="updatePreview()" placeholder="I'll always remember the time we spent together that day..."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="standard">Standard</option>
                                <option value="journal">Journal Style</option>
                                <option value="vintage">Vintage Card</option>
                                <option value="modern">Modern Minimal</option>
                                <option value="polaroid">Polaroid Photo</option>
                                <option value="dreamCloud">Dream Cloud</option>
                                <option value="scrapbook">Scrapbook Style</option>
                                <option value="starryNight">Starry Night</option>
                                <option value="memoryBox">Memory Box</option>
                                <option value="glowMemory">Glow Memory</option>
                                <option value="cornerSparkle">Corner Sparkle</option>
                                <option value="floatingMemory">Floating Memory</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffedd5" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="textStyle" onchange="updatePreview()">
                                <option value="italic">Italic</option>
                                <option value="normal">Normal</option>
                                <option value="serif">Serif</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffedd5';
                    const layout = style.layout || 'standard';
                    const textStyle = style.textStyle || 'italic';
                    const memory = data.memory || 'I cherish the memories we have created together';

                    const textClass = textStyle === 'italic' ? 'italic' : textStyle === 'serif' ? 'font-serif italic' : '';

                    if (layout === 'journal') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow border-l-4 border-amber-500">
                                    <div class="flex items-start gap-4">
                                        <div class="text-4xl">‚ú®</div>
                                        <div>
                                            <h3 class="text-lg font-semibold mb-2 text-gray-900">A Special Memory</h3>
                                            <p class="text-gray-700 ${textClass} leading-relaxed">${memory}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'vintage') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-amber-50 p-8 rounded border-4 border-double border-amber-600">
                                    <div class="text-4xl mb-4 text-center">‚ú®</div>
                                    <h3 class="text-xl font-serif font-semibold mb-3 text-gray-900 text-center">A Special Memory</h3>
                                    <p class="text-gray-700 font-serif ${textClass}">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'modern') {
                        return `
                            <div class="p-8" style="background: linear-gradient(to bottom, ${bgColor}, transparent);">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-3xl mb-3 opacity-60">‚ú®</div>
                                    <p class="text-gray-800 text-lg ${textClass} leading-relaxed pl-4 border-l-2 border-amber-400">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'polaroid') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white p-4 rounded-lg shadow-xl">
                                    <div class="bg-amber-50 rounded p-6 mb-4">
                                        <div class="text-4xl text-center mb-2">‚ú®</div>
                                    </div>
                                    <h3 class="text-lg font-semibold text-gray-900 text-center mb-2">A Special Memory</h3>
                                    <p class="text-gray-700 text-sm ${textClass} text-center">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'dreamCloud') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-full p-8" style="box-shadow: 0 10px 50px rgba(251, 146, 60, 0.2);">
                                    <div class="text-center">
                                        <div class="text-4xl mb-3">‚ú®</div>
                                        <h3 class="text-lg font-semibold mb-3 text-gray-900">A Special Memory</h3>
                                        <p class="text-gray-700 ${textClass}">${memory}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'scrapbook') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white p-6 rounded-lg relative" style="box-shadow: 3px 3px 0px #fb923c, 6px 6px 0px #fed7aa; transform: rotate(-1deg);">
                                        <div class="absolute -top-3 -right-3 text-3xl transform rotate-12">‚ú®</div>
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">A Special Memory</h3>
                                        <p class="text-gray-700 ${textClass}">${memory}</p>
                                        <div class="absolute -bottom-2 -left-2 text-2xl transform -rotate-12">‚ú®</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starryNight') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background: linear-gradient(135deg, #1e3a8a 0%, #312e81 100%);">
                                <div class="absolute top-4 right-8 text-2xl opacity-70">‚ú®</div>
                                <div class="absolute top-12 left-12 text-xl opacity-60">‚ú®</div>
                                <div class="absolute bottom-8 right-16 text-3xl opacity-80">‚ú®</div>
                                <div class="max-w-lg mx-auto bg-white bg-opacity-95 rounded-2xl p-6 relative z-10">
                                    <div class="text-4xl mb-4 text-center">‚ú®</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900 text-center">A Special Memory</h3>
                                    <p class="text-gray-700 ${textClass}">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'memoryBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-amber-300 rounded-2xl p-1 bg-amber-100">
                                    <div class="bg-white rounded-xl p-6">
                                        <div class="flex items-center gap-3 mb-4">
                                            <div class="text-4xl">‚ú®</div>
                                            <h3 class="text-xl font-semibold text-gray-900">A Special Memory</h3>
                                        </div>
                                        <p class="text-gray-700 ${textClass}">${memory}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'glowMemory') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6" style="box-shadow: 0 0 50px rgba(251, 146, 60, 0.3);">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-5xl animate-pulse">‚ú®</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900 text-center">A Special Memory</h3>
                                    <p class="text-gray-700 ${textClass} text-center">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerSparkle') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-6 -left-6 text-9xl opacity-10 transform rotate-45">‚ú®</div>
                                <div class="absolute -bottom-6 -right-6 text-8xl opacity-10 transform -rotate-45">‚ú®</div>
                                <div class="max-w-lg mx-auto relative z-10 bg-white rounded-xl p-6 shadow-lg">
                                    <h3 class="text-xl font-semibold mb-3 text-amber-600">A Special Memory</h3>
                                    <p class="text-gray-700 ${textClass}">${memory}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingMemory') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block bg-gradient-to-br from-amber-400 to-orange-500 rounded-full w-20 h-20 flex items-center justify-center mb-6" style="box-shadow: 0 15px 35px rgba(251, 146, 60, 0.4);">
                                        <div class="text-5xl">‚ú®</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6" style="box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">A Special Memory</h3>
                                        <p class="text-gray-700 ${textClass}">${memory}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4">‚ú®</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">A Special Memory</h3>
                                    <p class="text-gray-700 ${textClass}">${memory}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            gift: {
                name: 'üéÅ Gift Appreciation',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gift Description</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="giftName" onchange="updatePreview()" placeholder="the beautiful necklace">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">How you're enjoying/using it</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="enjoyment" rows="3" onchange="updatePreview()" placeholder="I wear it every day and think of you. It goes perfectly with everything!"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="centered">Centered</option>
                                <option value="card">Gift Card</option>
                                <option value="banner">Banner</option>
                                <option value="split">Split Layout</option>
                                <option value="ribbonBox">Ribbon Box</option>
                                <option value="wrappedGift">Wrapped Gift</option>
                                <option value="giftTag">Gift Tag</option>
                                <option value="cornerBow">Corner Bow</option>
                                <option value="giftBurst">Gift Burst</option>
                                <option value="floatingGift">Floating Gift</option>
                                <option value="presentStack">Present Stack</option>
                                <option value="giftGlow">Gift Glow</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fed7aa" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#ea580c" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fed7aa';
                    const accentColor = style.accentColor || '#ea580c';
                    const layout = style.layout || 'centered';
                    const giftName = data.giftName || 'the wonderful gift';
                    const enjoyment = data.enjoyment || 'I absolutely love it!';

                    if (layout === 'card') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-xl">
                                    <div class="text-5xl mb-6 text-center">üéÅ</div>
                                    <h3 class="text-2xl font-bold mb-4 text-center" style="color: ${accentColor};">Thank you for<br/>${giftName}</h3>
                                    <p class="text-gray-700 text-center">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'banner') {
                        return `
                            <div class="p-8" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}30);">
                                <div class="max-w-lg mx-auto text-center text-white">
                                    <div class="text-5xl mb-4">üéÅ</div>
                                    <h3 class="text-2xl font-bold mb-3">Thank you for ${giftName}</h3>
                                    <p class="text-lg font-medium">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'split') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto flex items-center gap-6">
                                    <div class="text-6xl flex-shrink-0">üéÅ</div>
                                    <div>
                                        <h3 class="text-xl font-semibold mb-2" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                        <p class="text-gray-700">${enjoyment}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 border-4 border-dashed" style="border-color: ${accentColor};">
                                    <div class="relative">
                                        <div class="absolute -top-10 left-1/2 transform -translate-x-1/2 text-6xl">üéÄ</div>
                                        <div class="text-center pt-8">
                                            <div class="text-5xl mb-4">üéÅ</div>
                                            <h3 class="text-xl font-semibold mb-3" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                            <p class="text-gray-700">${enjoyment}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'wrappedGift') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-white to-orange-50 rounded-2xl p-6 relative overflow-hidden">
                                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-full" style="background-color: ${accentColor};"></div>
                                    <div class="absolute top-1/2 left-0 transform -translate-y-1/2 w-full h-8" style="background-color: ${accentColor};"></div>
                                    <div class="relative z-10 bg-white bg-opacity-90 rounded-xl p-6">
                                        <div class="text-5xl mb-4 text-center">üéÅ</div>
                                        <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                        <p class="text-gray-700 text-center">${enjoyment}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'giftTag') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-tr-3xl rounded-br-3xl rounded-bl-3xl p-6 shadow-lg relative" style="border-top: 4px solid ${accentColor};">
                                        <div class="absolute -top-6 left-6 w-12 h-12 rounded-full flex items-center justify-center text-3xl" style="background-color: ${accentColor};">
                                            üéÅ
                                        </div>
                                        <div class="pt-6">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">Thank you for ${giftName}</h3>
                                            <p class="text-gray-700">${enjoyment}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerBow') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-8 -right-8 text-9xl opacity-20 transform rotate-12">üéÄ</div>
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative z-10">
                                    <div class="text-5xl mb-4 text-center">üéÅ</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                    <p class="text-gray-700 text-center">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'giftBurst') {
                        return `
                            <div class="p-8" style="background: radial-gradient(circle, ${bgColor} 0%, ${accentColor}20 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block relative">
                                        <div class="text-7xl mb-4">üéÅ</div>
                                        <div class="absolute -top-2 -right-2 text-3xl">‚ú®</div>
                                        <div class="absolute -bottom-2 -left-2 text-3xl">‚ú®</div>
                                    </div>
                                    <h3 class="text-2xl font-bold mb-3" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                    <p class="text-gray-700">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingGift') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-24 h-24 flex items-center justify-center mb-6" style="background-color: ${accentColor}; box-shadow: 0 15px 40px ${accentColor}50;">
                                        <div class="text-6xl">üéÅ</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">Thank you for ${giftName}</h3>
                                        <p class="text-gray-700">${enjoyment}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'presentStack') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-6 transform -rotate-1 shadow-md mb-2">
                                        <div class="bg-orange-50 rounded-xl p-6 transform rotate-1">
                                            <div class="flex items-center gap-4">
                                                <div class="text-5xl">üéÅ</div>
                                                <div>
                                                    <h3 class="text-xl font-semibold mb-2" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                                    <p class="text-gray-700">${enjoyment}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'giftGlow') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 60px ${accentColor}40;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-6xl animate-pulse">üéÅ</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Thank you for ${giftName}</h3>
                                    <p class="text-gray-700 text-center">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üéÅ</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">Thank you for ${giftName}</h3>
                                    <p class="text-gray-700">${enjoyment}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            futureTogether: {
                name: 'üåü Future Together',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Looking Forward Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="message" rows="4" onchange="updatePreview()" placeholder="I'm looking forward to creating more wonderful memories together. Let's catch up soon!"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="centered">Centered</option>
                                <option value="optimistic">Optimistic Card</option>
                                <option value="bright">Bright Banner</option>
                                <option value="starryPath">Starry Path</option>
                                <option value="horizonGlow">Horizon Glow</option>
                                <option value="dreamBubble">Dream Bubble</option>
                                <option value="shiningFuture">Shining Future</option>
                                <option value="hopefulBanner">Hopeful Banner</option>
                                <option value="starCircle">Star Circle</option>
                                <option value="gradientHope">Gradient Hope</option>
                                <option value="floatingStars">Floating Stars</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#fbbf24" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const accentColor = style.accentColor || '#fbbf24';
                    const layout = style.layout || 'centered';
                    const message = data.message || 'Looking forward to spending more time together!';

                    if (layout === 'optimistic') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-lg text-center">
                                    <div class="text-5xl mb-4">üåü</div>
                                    <h3 class="text-2xl font-bold mb-4" style="color: ${accentColor};">Looking Forward</h3>
                                    <p class="text-gray-700 leading-relaxed">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'bright') {
                        return `
                            <div class="p-8" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}40);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-6xl mb-4">üåü</div>
                                    <h3 class="text-2xl font-bold mb-4 text-gray-900">Looking Forward</h3>
                                    <p class="text-gray-800 text-lg font-medium">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starryPath') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute top-8 left-1/4 text-3xl opacity-30">üåü</div>
                                <div class="absolute top-16 right-1/3 text-2xl opacity-40">‚ú®</div>
                                <div class="absolute bottom-12 left-1/3 text-4xl opacity-25">üåü</div>
                                <div class="max-w-lg mx-auto relative z-10 bg-white rounded-2xl p-6 shadow-lg">
                                    <div class="text-5xl mb-4 text-center">üåü</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Looking Forward</h3>
                                    <p class="text-gray-700 text-center">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'horizonGlow') {
                        return `
                            <div class="p-8" style="background: linear-gradient(to bottom, ${accentColor}20 0%, ${bgColor} 50%, ${accentColor}10 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-6xl mb-4">üåü</div>
                                    <h3 class="text-2xl font-bold mb-4 text-gray-900">Looking Forward</h3>
                                    <p class="text-gray-700 text-lg">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'dreamBubble') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-full p-8 text-center" style="box-shadow: 0 10px 60px ${accentColor}30;">
                                        <div class="text-5xl mb-4">üåü</div>
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">Looking Forward</h3>
                                        <p class="text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'shiningFuture') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-yellow-50 to-amber-50 rounded-2xl p-6 border-2 border-dashed" style="border-color: ${accentColor};">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="text-5xl">üåü</div>
                                        <h3 class="text-xl font-semibold text-gray-900">Looking Forward</h3>
                                    </div>
                                    <p class="text-gray-700">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'hopefulBanner') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-2 shadow-lg">
                                        <div class="rounded-xl p-6" style="background: linear-gradient(135deg, ${accentColor}20 0%, transparent 100%);">
                                            <div class="text-5xl mb-4 text-center">üåü</div>
                                            <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Looking Forward</h3>
                                            <p class="text-gray-700 text-center">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starCircle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="flex items-start gap-4">
                                        <div class="flex-shrink-0 w-20 h-20 rounded-full flex items-center justify-center text-4xl" style="background-color: ${accentColor};">
                                            üåü
                                        </div>
                                        <div class="flex-1 pt-2">
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">Looking Forward</h3>
                                            <p class="text-gray-700">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradientHope') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-2xl p-6" style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fdba74 100%);">
                                    <div class="bg-white bg-opacity-90 rounded-xl p-6">
                                        <div class="text-5xl mb-4 text-center">üåü</div>
                                        <h3 class="text-xl font-semibold mb-3 text-center text-gray-900">Looking Forward</h3>
                                        <p class="text-gray-700 text-center">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingStars') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-24 h-24 flex items-center justify-center mb-6" style="background: linear-gradient(135deg, ${accentColor} 0%, #fcd34d 100%); box-shadow: 0 20px 50px ${accentColor}40;">
                                        <div class="text-6xl">üåü</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">Looking Forward</h3>
                                        <p class="text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üåü</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">Looking Forward</h3>
                                    <p class="text-gray-700">${message}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            yourQualities: {
                name: '‚≠ê Your Qualities',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">What You Appreciate About Them</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="qualities" rows="5" onchange="updatePreview()" placeholder="Your kindness, generosity, and thoughtfulness never cease to amaze me. You're always there when someone needs help, and your positive energy lights up every room."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="standard">Standard</option>
                                <option value="highlighted">Highlighted Box</option>
                                <option value="stars">Star Border</option>
                                <option value="starBurst">Star Burst</option>
                                <option value="goldenFrame">Golden Frame</option>
                                <option value="shiningQualities">Shining Qualities</option>
                                <option value="starGlow">Star Glow</option>
                                <option value="constellationBox">Constellation Box</option>
                                <option value="ribbonStar">Ribbon Star</option>
                                <option value="floatingStar">Floating Star</option>
                                <option value="starryBackground">Starry Background</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fffbeb" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Star Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="starColor" value="#fbbf24" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fffbeb';
                    const starColor = style.starColor || '#fbbf24';
                    const layout = style.layout || 'standard';
                    const qualities = data.qualities || 'Your kindness and generosity are truly inspiring';

                    if (layout === 'highlighted') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-xl p-6" style="background-color: ${starColor}20;">
                                    <div class="text-4xl mb-4 text-center">‚≠ê</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${starColor};">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed text-center">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'stars') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-2 rounded-xl p-6" style="border-color: ${starColor};">
                                    <div class="text-center mb-3">
                                        <span class="text-3xl" style="color: ${starColor};">‚≠ê ‚≠ê ‚≠ê</span>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900 text-center">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starBurst') {
                        return `
                            <div class="p-8" style="background: radial-gradient(circle, ${bgColor} 0%, ${starColor}15 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block relative mb-4">
                                        <div class="text-7xl">‚≠ê</div>
                                        <div class="absolute -top-2 -right-2 text-2xl">‚ú®</div>
                                        <div class="absolute -bottom-2 -left-2 text-2xl">‚ú®</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'goldenFrame') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${starColor};">
                                    <div class="border-2 rounded-xl p-6" style="border-color: ${starColor}60;">
                                        <div class="text-4xl mb-4 text-center">‚≠ê</div>
                                        <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${starColor};">What Makes You Special</h3>
                                        <p class="text-gray-700 leading-relaxed text-center">${qualities}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'shiningQualities') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-yellow-50 to-amber-50 rounded-2xl p-6">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="text-5xl">‚≠ê</div>
                                        <h3 class="text-xl font-semibold" style="color: ${starColor};">What Makes You Special</h3>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starGlow') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 50px ${starColor}30;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-6xl animate-pulse">‚≠ê</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${starColor};">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed text-center">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'constellationBox') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute top-4 right-8 text-2xl opacity-20">‚≠ê</div>
                                <div class="absolute top-12 left-12 text-3xl opacity-25">‚≠ê</div>
                                <div class="absolute bottom-8 right-16 text-xl opacity-20">‚≠ê</div>
                                <div class="absolute bottom-12 left-20 text-2xl opacity-15">‚≠ê</div>
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative z-10">
                                    <div class="text-5xl mb-4 text-center">‚≠ê</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center text-gray-900">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonStar') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 border-t-4" style="border-color: ${starColor}; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
                                    <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 w-12 h-12 rounded-full flex items-center justify-center text-3xl" style="background-color: ${starColor};">
                                        ‚≠ê
                                    </div>
                                    <div class="pt-6">
                                        <h3 class="text-xl font-semibold mb-3 text-center text-gray-900">What Makes You Special</h3>
                                        <p class="text-gray-700 leading-relaxed text-center">${qualities}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingStar') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-24 h-24 flex items-center justify-center mb-6" style="background-color: ${starColor}; box-shadow: 0 20px 50px ${starColor}40;">
                                        <div class="text-6xl">‚≠ê</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">What Makes You Special</h3>
                                        <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starryBackground') {
                        return `
                            <div class="p-8 relative" style="background: linear-gradient(135deg, ${starColor}10 0%, ${bgColor} 50%, ${starColor}10 100%);">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-md">
                                    <div class="flex items-start gap-4">
                                        <div class="text-5xl flex-shrink-0" style="color: ${starColor};">‚≠ê</div>
                                        <div>
                                            <h3 class="text-xl font-semibold mb-3 text-gray-900">What Makes You Special</h3>
                                            <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">‚≠ê</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900 text-center">What Makes You Special</h3>
                                    <p class="text-gray-700 leading-relaxed">${qualities}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            personalNote: {
                name: 'üíå Personal Note',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Personal Heartfelt Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="note" rows="5" onchange="updatePreview()" placeholder="I wanted to take a moment to let you know how much you mean to me. Your friendship has been a true blessing in my life."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="bordered">Bordered</option>
                                <option value="letter">Letter Style</option>
                                <option value="card">Card Style</option>
                                <option value="loveEnvelope">Love Envelope</option>
                                <option value="heartFrame">Heart Frame</option>
                                <option value="sealedLetter">Sealed Letter</option>
                                <option value="romanticCard">Romantic Card</option>
                                <option value="cornerHeart">Corner Heart</option>
                                <option value="floatingNote">Floating Note</option>
                                <option value="ribbonNote">Ribbon Note</option>
                                <option value="heartGlow">Heart Glow</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fff1f2" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Border Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="borderColor" value="#fb7185" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Border Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="borderStyle" onchange="updatePreview()">
                                <option value="dashed">Dashed</option>
                                <option value="solid">Solid</option>
                                <option value="double">Double</option>
                                <option value="dotted">Dotted</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fff1f2';
                    const borderColor = style.borderColor || '#fb7185';
                    const borderStyle = style.borderStyle || 'dashed';
                    const layout = style.layout || 'bordered';
                    const note = data.note || 'You mean so much to me';

                    if (layout === 'letter') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white p-8 rounded shadow-lg">
                                    <div class="text-4xl mb-4">üíå</div>
                                    <p class="text-gray-700 leading-relaxed italic font-serif">${note}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'card') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-xl text-center">
                                    <div class="text-5xl mb-4">üíå</div>
                                    <p class="text-gray-700 leading-relaxed italic">${note}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'loveEnvelope') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
                                    <div class="h-16 relative" style="background: linear-gradient(135deg, ${borderColor} 0%, ${borderColor}80 100%);">
                                        <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 text-5xl">üíå</div>
                                    </div>
                                    <div class="p-8 pt-12">
                                        <p class="text-gray-700 leading-relaxed italic text-center">${note}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'heartFrame') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${borderColor};">
                                    <div class="flex items-center justify-center gap-2 mb-4">
                                        <span class="text-3xl">üíï</span>
                                        <span class="text-4xl">üíå</span>
                                        <span class="text-3xl">üíï</span>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed italic text-center">${note}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'sealedLetter') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-lg p-8 shadow-lg relative">
                                    <div class="absolute -top-4 right-8 w-12 h-12 rounded-full flex items-center justify-center text-3xl" style="background-color: ${borderColor};">
                                        üíå
                                    </div>
                                    <div class="border-l-4 pl-6" style="border-color: ${borderColor};">
                                        <p class="text-gray-700 leading-relaxed italic">${note}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'romanticCard') {
                        return `
                            <div class="p-8" style="background: linear-gradient(135deg, ${bgColor} 0%, ${borderColor}10 100%);">
                                <div class="max-w-lg mx-auto bg-white bg-opacity-95 rounded-2xl p-8 shadow-xl">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-6xl">üíå</div>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed italic text-center">${note}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerHeart') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-6 -right-6 text-9xl opacity-10">üíï</div>
                                <div class="absolute -bottom-6 -left-6 text-8xl opacity-10">üíï</div>
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative z-10">
                                    <div class="text-4xl mb-4 text-center">üíå</div>
                                    <p class="text-gray-700 leading-relaxed italic text-center">${note}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingNote') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-24 h-24 flex items-center justify-center mb-6" style="background-color: ${borderColor}; box-shadow: 0 20px 50px ${borderColor}40;">
                                        <div class="text-6xl">üíå</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <p class="text-gray-700 leading-relaxed italic">${note}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonNote') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-6 relative overflow-hidden shadow-lg">
                                        <div class="absolute top-0 right-8 w-8 h-full" style="background-color: ${borderColor}30;"></div>
                                        <div class="absolute -top-2 right-8 text-4xl">üéÄ</div>
                                        <div class="relative z-10">
                                            <div class="text-4xl mb-4">üíå</div>
                                            <p class="text-gray-700 leading-relaxed italic">${note}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'heartGlow') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 60px ${borderColor}30;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-6xl animate-pulse">üíå</div>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed italic text-center">${note}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto p-6 border-2" style="border-style: ${borderStyle}; border-color: ${borderColor};">
                                    <div class="text-4xl mb-4 text-center">üíå</div>
                                    <p class="text-gray-700 leading-relaxed italic">${note}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            multipleThanks: {
                name: 'üìù Multiple Thanks',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Thank You For... (one per line)</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="items" rows="6" onchange="updatePreview()" placeholder="Always being there when I need you&#10;Your thoughtful gifts&#10;Making me laugh when I'm down&#10;Being such a wonderful friend&#10;Your constant support"></textarea>
                            <p class="text-xs text-gray-500 mt-1">Enter each item on a new line</p>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="list">Simple List</option>
                                <option value="boxes">Individual Boxes</option>
                                <option value="numbered">Numbered List</option>
                                <option value="columns">Two Columns</option>
                                <option value="cards">Card Style</option>
                                <option value="checkboxes">Checkbox Style</option>
                                <option value="bubbles">Speech Bubbles</option>
                                <option value="timeline">Timeline Style</option>
                                <option value="tags">Tag Cloud</option>
                                <option value="gradientCards">Gradient Cards</option>
                                <option value="stickyNotes">Sticky Notes</option>
                                <option value="ribbonList">Ribbon List</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffffff" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">List Icon</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="listStyle" onchange="updatePreview()">
                                <option value="checkmark">Checkmarks ‚úì</option>
                                <option value="heart">Hearts ‚ù§Ô∏è</option>
                                <option value="star">Stars ‚≠ê</option>
                                <option value="bullet">Bullets ‚Ä¢</option>
                                <option value="hands">Hands üôè</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#f59e0b" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffffff';
                    const accentColor = style.accentColor || '#f59e0b';
                    const listStyle = style.listStyle || 'checkmark';
                    const layout = style.layout || 'list';
                    const items = data.items || 'Your kindness\nYour support\nYour friendship';

                    const icons = {
                        checkmark: '‚úì',
                        heart: '‚ù§Ô∏è',
                        star: '‚≠ê',
                        bullet: '‚Ä¢',
                        hands: 'üôè'
                    };
                    const icon = icons[listStyle] || '‚úì';

                    const itemsArray = items.split('\n').filter(item => item.trim());

                    if (layout === 'boxes') {
                        const itemBoxes = itemsArray.map(item =>
                            `<div class="bg-amber-50 rounded-lg p-4 border-l-4" style="border-color: ${accentColor};">
                                <div class="flex items-start gap-3">
                                    <span class="text-xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="flex-1 text-gray-700">${item.trim()}</span>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="space-y-3">
                                        ${itemBoxes}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'numbered') {
                        const itemList = itemsArray.map((item, index) =>
                            `<li class="flex items-start gap-4 mb-3">
                                <span class="flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-bold" style="background-color: ${accentColor};">${index + 1}</span>
                                <span class="flex-1 text-gray-700 pt-1">${item.trim()}</span>
                            </li>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <ul class="text-gray-700">
                                        ${itemList}
                                    </ul>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'columns') {
                        const mid = Math.ceil(itemsArray.length / 2);
                        const col1 = itemsArray.slice(0, mid).map(item =>
                            `<li class="flex items-start gap-3 mb-2"><span style="color: ${accentColor};" class="text-xl">${icon}</span><span class="flex-1">${item.trim()}</span></li>`
                        ).join('');
                        const col2 = itemsArray.slice(mid).map(item =>
                            `<li class="flex items-start gap-3 mb-2"><span style="color: ${accentColor};" class="text-xl">${icon}</span><span class="flex-1">${item.trim()}</span></li>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-2xl mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="grid grid-cols-2 gap-8">
                                        <ul class="text-gray-700">${col1}</ul>
                                        <ul class="text-gray-700">${col2}</ul>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cards') {
                        const itemCards = itemsArray.map(item =>
                            `<div class="bg-white rounded-xl p-4 shadow-md border-t-2" style="border-color: ${accentColor};">
                                <div class="flex items-center gap-3">
                                    <span class="text-2xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="text-gray-700 font-medium">${item.trim()}</span>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="grid gap-3">
                                        ${itemCards}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'checkboxes') {
                        const itemList = itemsArray.map(item =>
                            `<li class="flex items-start gap-3 mb-3">
                                <div class="flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center" style="border-color: ${accentColor}; background-color: ${accentColor};">
                                    <span class="text-white text-sm">‚úì</span>
                                </div>
                                <span class="flex-1 text-gray-700">${item.trim()}</span>
                            </li>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <ul class="text-gray-700">
                                        ${itemList}
                                    </ul>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'bubbles') {
                        const itemBubbles = itemsArray.map(item =>
                            `<div class="bg-white rounded-3xl p-4 shadow-md relative">
                                <div class="flex items-center gap-3">
                                    <span class="text-xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="text-gray-700">${item.trim()}</span>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="space-y-3">
                                        ${itemBubbles}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'timeline') {
                        const itemTimeline = itemsArray.map((item, index) =>
                            `<div class="flex items-start gap-4">
                                <div class="flex flex-col items-center">
                                    <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: ${accentColor};">
                                        <span class="text-white">${icon}</span>
                                    </div>
                                    ${index < itemsArray.length - 1 ? `<div class="w-1 h-12" style="background-color: ${accentColor}40;"></div>` : ''}
                                </div>
                                <div class="flex-1 pt-2">
                                    <p class="text-gray-700">${item.trim()}</p>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="space-y-2">
                                        ${itemTimeline}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'tags') {
                        const itemTags = itemsArray.map(item =>
                            `<span class="inline-block px-4 py-2 rounded-full text-sm font-medium text-white m-1" style="background-color: ${accentColor};">
                                ${icon} ${item.trim()}
                            </span>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900">Thank You For...</h3>
                                    <div class="flex flex-wrap justify-center">
                                        ${itemTags}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradientCards') {
                        const itemCards = itemsArray.map((item, index) =>
                            `<div class="rounded-xl p-4 shadow-md" style="background: linear-gradient(135deg, ${accentColor}20 0%, ${accentColor}05 100%);">
                                <div class="flex items-center gap-3">
                                    <span class="text-2xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="text-gray-700 font-medium">${item.trim()}</span>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="grid gap-3">
                                        ${itemCards}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'stickyNotes') {
                        const colors = ['#fef3c7', '#fed7aa', '#fdba74', '#fef3c7', '#fed7aa'];
                        const itemNotes = itemsArray.map((item, index) =>
                            `<div class="rounded-lg p-4 shadow-md transform rotate-${index % 2 === 0 ? '1' : '-1'}" style="background-color: ${colors[index % colors.length]};">
                                <div class="flex items-start gap-3">
                                    <span class="text-xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="text-gray-700">${item.trim()}</span>
                                </div>
                            </div>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <div class="grid gap-3">
                                        ${itemNotes}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonList') {
                        const itemList = itemsArray.map(item =>
                            `<li class="relative pl-6 mb-3">
                                <div class="absolute left-0 top-0 w-4 h-full rounded-r" style="background-color: ${accentColor};"></div>
                                <div class="flex items-start gap-3">
                                    <span class="text-xl" style="color: ${accentColor};">${icon}</span>
                                    <span class="flex-1 text-gray-700">${item.trim()}</span>
                                </div>
                            </li>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">Thank You For...</h3>
                                    <ul class="text-gray-700">
                                        ${itemList}
                                    </ul>
                                </div>
                            </div>
                        `;
                    } else {
                        const itemList = itemsArray.map(item =>
                            `<li class="flex items-start gap-3 mb-2"><span style="color: ${accentColor};" class="text-xl">${icon}</span><span class="flex-1">${item.trim()}</span></li>`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìù</div>
                                    <h3 class="text-xl font-semibold mb-4 text-gray-900 text-center">Thank You For...</h3>
                                    <ul class="text-gray-700">
                                        ${itemList}
                                    </ul>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            meetUp: {
                name: '‚òï Meet Up Invitation',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Invitation Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="message" rows="3" onchange="updatePreview()" placeholder="Would love to grab coffee and catch up soon! How about next weekend?"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Activity Icon</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="icon" onchange="updatePreview()" placeholder="‚òï" value="‚òï">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="simple">Simple</option>
                                <option value="card">Invitation Card</option>
                                <option value="banner">Banner Style</option>
                                <option value="badge">Badge Style</option>
                                <option value="cozyInvite">Cozy Invitation</option>
                                <option value="coffeeCup">Coffee Cup</option>
                                <option value="callout">Call Out Box</option>
                                <option value="ticketStyle">Ticket Style</option>
                                <option value="floatingInvite">Floating Invite</option>
                                <option value="speechBubble">Speech Bubble</option>
                                <option value="cornerIcon">Corner Icon</option>
                                <option value="glowInvite">Glow Invite</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#f59e0b" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Alignment</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="align" onchange="updatePreview()">
                                <option value="center">Center</option>
                                <option value="left">Left</option>
                                <option value="right">Right</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const accentColor = style.accentColor || '#f59e0b';
                    const align = style.align || 'center';
                    const layout = style.layout || 'simple';
                    const message = data.message || 'Let\'s meet up soon!';
                    const icon = data.icon || '‚òï';

                    if (layout === 'card') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-xl text-center">
                                    <div class="text-6xl mb-4">${icon}</div>
                                    <h3 class="text-2xl font-bold mb-4" style="color: ${accentColor};">Let's Connect</h3>
                                    <p class="text-gray-700 text-lg">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'banner') {
                        return `
                            <div class="p-8" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}40);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-7xl mb-4">${icon}</div>
                                    <h3 class="text-2xl font-bold mb-3 text-gray-900">Let's Connect</h3>
                                    <p class="text-gray-800 text-lg font-medium">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'badge') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto">
                                    <div class="bg-white rounded-xl p-6 shadow-lg border-l-4" style="border-color: ${accentColor}; text-align: ${align};">
                                        <div class="flex items-center gap-4">
                                            <div class="text-5xl flex-shrink-0">${icon}</div>
                                            <div class="flex-1">
                                                <h3 class="text-xl font-bold mb-2" style="color: ${accentColor};">Let's Connect</h3>
                                                <p class="text-gray-700">${message}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cozyInvite') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border-2 border-dashed" style="border-color: ${accentColor};">
                                    <div class="text-6xl mb-4 text-center">${icon}</div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Let's Connect</h3>
                                    <p class="text-gray-700 text-center">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'coffeeCup') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-6 shadow-xl overflow-hidden relative">
                                        <div class="absolute -bottom-4 -right-4 text-9xl opacity-10">${icon}</div>
                                        <div class="relative z-10" style="text-align: ${align};">
                                            <div class="text-5xl mb-4">${icon}</div>
                                            <h3 class="text-xl font-semibold mb-3" style="color: ${accentColor};">Let's Connect</h3>
                                            <p class="text-gray-700">${message}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'callout') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${accentColor};">
                                    <div class="flex items-center gap-4 mb-4">
                                        <div class="text-5xl">${icon}</div>
                                        <h3 class="text-xl font-bold" style="color: ${accentColor};">Let's Connect</h3>
                                    </div>
                                    <p class="text-gray-700" style="text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ticketStyle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-lg p-6 shadow-lg border-l-8 border-r-8 border-dashed" style="border-color: ${accentColor};">
                                    <div class="text-center">
                                        <div class="text-6xl mb-4">${icon}</div>
                                        <h3 class="text-2xl font-bold mb-3" style="color: ${accentColor};">Let's Connect</h3>
                                        <p class="text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingInvite') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-24 h-24 flex items-center justify-center mb-6" style="background-color: ${accentColor}; box-shadow: 0 20px 50px ${accentColor}40;">
                                        <div class="text-6xl">${icon}</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-xl font-semibold mb-3 text-gray-900">Let's Connect</h3>
                                        <p class="text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'speechBubble') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-3xl p-6 shadow-lg relative">
                                        <div class="absolute -bottom-3 left-12 w-6 h-6 bg-white transform rotate-45"></div>
                                        <div class="flex items-center gap-4 mb-3">
                                            <div class="text-4xl">${icon}</div>
                                            <h3 class="text-xl font-semibold" style="color: ${accentColor};">Let's Connect</h3>
                                        </div>
                                        <p class="text-gray-700">${message}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerIcon') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-6 -right-6 text-9xl opacity-15">${icon}</div>
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative z-10">
                                    <h3 class="text-xl font-semibold mb-3" style="color: ${accentColor}; text-align: ${align};">Let's Connect</h3>
                                    <p class="text-gray-700" style="text-align: ${align};">${message}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'glowInvite') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 60px ${accentColor}30;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-7xl animate-pulse">${icon}</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-3 text-center" style="color: ${accentColor};">Let's Connect</h3>
                                    <p class="text-gray-700 text-center">${message}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor}; text-align: ${align};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-5xl mb-4">${icon}</div>
                                    <h3 class="text-xl font-semibold mb-3 text-gray-900">Let's Connect</h3>
                                    <p class="text-gray-700">${message}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            decorativeDivider: {
                name: 'üå∏ Decorative Divider',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Decorative Icon/Pattern</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="pattern" onchange="updatePreview()" placeholder="üå∏ ‚ú® üå∏" value="üå∏ ‚ú® üå∏">
                            <p class="text-xs text-gray-500 mt-1">Use emojis or symbols to create a decorative pattern</p>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Divider Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="dividerStyle" onchange="updatePreview()">
                                <option value="simple">Simple Pattern</option>
                                <option value="line">Line with Icon</option>
                                <option value="dots">Dotted Line</option>
                                <option value="wave">Wave Pattern</option>
                                <option value="doubleLine">Double Line</option>
                                <option value="circlePattern">Circle Pattern</option>
                                <option value="gradientLine">Gradient Line</option>
                                <option value="zigzag">Zigzag Pattern</option>
                                <option value="ornamental">Ornamental</option>
                                <option value="modernMinimal">Modern Minimal</option>
                                <option value="dashedDouble">Dashed Double</option>
                                <option value="floralSpread">Floral Spread</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffffff" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pattern Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="patternColor" value="#d1d5db" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Divider Size</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="size" onchange="updatePreview()">
                                <option value="small">Small</option>
                                <option value="medium">Medium</option>
                                <option value="large">Large</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffffff';
                    const patternColor = style.patternColor || '#d1d5db';
                    const size = style.size || 'medium';
                    const dividerStyle = style.dividerStyle || 'simple';
                    const pattern = data.pattern || '‚ú® üíõ ‚ú®';

                    const sizeMap = {
                        small: '2rem',
                        medium: '2.5rem',
                        large: '3rem'
                    };
                    const fontSize = sizeMap[size] || '2.5rem';

                    const paddingMap = {
                        small: '1rem',
                        medium: '1.5rem',
                        large: '2rem'
                    };
                    const padding = paddingMap[size] || '1.5rem';

                    if (dividerStyle === 'line') {
                        return `
                            <div class="flex items-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="flex-1 h-px" style="background-color: ${patternColor};"></div>
                                <div class="px-4" style="font-size: ${fontSize}; color: ${patternColor};">${pattern}</div>
                                <div class="flex-1 h-px" style="background-color: ${patternColor};"></div>
                            </div>
                        `;
                    } else if (dividerStyle === 'dots') {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="flex items-center justify-center gap-2">
                                    <span class="w-2 h-2 rounded-full" style="background-color: ${patternColor};"></span>
                                    <span class="w-2 h-2 rounded-full" style="background-color: ${patternColor};"></span>
                                    <span class="w-3 h-3 rounded-full" style="background-color: ${patternColor};"></span>
                                    <span class="w-2 h-2 rounded-full" style="background-color: ${patternColor};"></span>
                                    <span class="w-2 h-2 rounded-full" style="background-color: ${patternColor};"></span>
                                </div>
                            </div>
                        `;
                    } else if (dividerStyle === 'wave') {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div style="font-size: ${fontSize}; color: ${patternColor}; opacity: 0.6;">ÔΩû ÔΩû ÔΩû</div>
                            </div>
                        `;
                    } else if (dividerStyle === 'doubleLine') {
                        return `
                            <div style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="space-y-2">
                                    <div class="h-px" style="background-color: ${patternColor};"></div>
                                    <div class="h-px" style="background-color: ${patternColor}; opacity: 0.5;"></div>
                                </div>
                            </div>
                        `;
                    } else if (dividerStyle === 'circlePattern') {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="flex items-center justify-center gap-3">
                                    <div class="w-3 h-3 rounded-full border-2" style="border-color: ${patternColor};"></div>
                                    <div class="w-4 h-4 rounded-full" style="background-color: ${patternColor};"></div>
                                    <div class="w-3 h-3 rounded-full border-2" style="border-color: ${patternColor};"></div>
                                </div>
                            </div>
                        `;
                    } else if (dividerStyle === 'gradientLine') {
                        return `
                            <div style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="h-1 rounded-full" style="background: linear-gradient(to right, transparent, ${patternColor}, transparent);"></div>
                            </div>
                        `;
                    } else if (dividerStyle === 'zigzag') {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div style="font-size: ${fontSize}; color: ${patternColor}; letter-spacing: 0.2em;">‚àß ‚à® ‚àß ‚à® ‚àß</div>
                            </div>
                        `;
                    } else if (dividerStyle === 'ornamental') {
                        return `
                            <div class="flex items-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="flex-1 h-px" style="background-color: ${patternColor};"></div>
                                <div class="px-6 flex items-center gap-2">
                                    <span style="font-size: ${fontSize}; color: ${patternColor};">‚óÜ</span>
                                    <span style="font-size: ${fontSize}; color: ${patternColor};">${pattern}</span>
                                    <span style="font-size: ${fontSize}; color: ${patternColor};">‚óÜ</span>
                                </div>
                                <div class="flex-1 h-px" style="background-color: ${patternColor};"></div>
                            </div>
                        `;
                    } else if (dividerStyle === 'modernMinimal') {
                        return `
                            <div class="flex items-center justify-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="w-16 h-px" style="background-color: ${patternColor};"></div>
                                <div class="px-4 w-2 h-2 rounded-full" style="background-color: ${patternColor};"></div>
                                <div class="w-16 h-px" style="background-color: ${patternColor};"></div>
                            </div>
                        `;
                    } else if (dividerStyle === 'dashedDouble') {
                        return `
                            <div style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="space-y-2">
                                    <div class="border-t-2 border-dashed" style="border-color: ${patternColor};"></div>
                                    <div class="border-t-2 border-dashed" style="border-color: ${patternColor}; opacity: 0.5;"></div>
                                </div>
                            </div>
                        `;
                    } else if (dividerStyle === 'floralSpread') {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div class="flex items-center justify-center gap-4" style="font-size: ${fontSize}; color: ${patternColor};">
                                    <span class="opacity-60">${pattern}</span>
                                    <span class="opacity-80">${pattern}</span>
                                    <span class="opacity-100">${pattern}</span>
                                    <span class="opacity-80">${pattern}</span>
                                    <span class="opacity-60">${pattern}</span>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="text-center" style="background-color: ${bgColor}; padding: ${padding} 2rem;">
                                <div style="font-size: ${fontSize}; color: ${patternColor}; opacity: 0.6;">${pattern}</div>
                            </div>
                        `;
                    }
                }
            },
            timeline: {
                name: 'üìÖ Timeline',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Timeline Title</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="title" onchange="updatePreview()" placeholder="Our Journey Together" value="Our Journey Together">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Milestones (format: Date | Event, one per line)</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="milestones" rows="6" onchange="updatePreview()" placeholder="2020 | We first met&#10;2021 | You helped me through a tough time&#10;2023 | Celebrated my graduation together&#10;Today | Saying thank you for everything"></textarea>
                            <p class="text-xs text-gray-500 mt-1">Format: Date | Event description</p>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fffbeb" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Timeline Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="timelineStyle" onchange="updatePreview()">
                                <option value="vertical">Vertical</option>
                                <option value="simple">Simple List</option>
                                <option value="cards">Card Timeline</option>
                                <option value="zigzag">Zigzag Path</option>
                                <option value="minimal">Minimal Dots</option>
                                <option value="boxed">Boxed Events</option>
                                <option value="roadmap">Roadmap Style</option>
                                <option value="modern">Modern Timeline</option>
                                <option value="elegant">Elegant Path</option>
                                <option value="colorful">Colorful Journey</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fffbeb';
                    const timelineStyle = style.timelineStyle || 'vertical';
                    const title = data.title || 'Our Journey Together';
                    const milestones = data.milestones || '2023 | We met\n2024 | You were there for me\nToday | Thank you';

                    const items = milestones.split('\n').filter(item => item.trim()).map((item, index, array) => {
                        const parts = item.split('|');
                        const date = parts[0]?.trim() || '';
                        const event = parts[1]?.trim() || item.trim();
                        const isLast = index === array.length - 1;

                        if (timelineStyle === 'vertical') {
                            return `
                                <div class="flex gap-4 mb-4">
                                    <div class="flex flex-col items-center">
                                        <div class="w-3 h-3 bg-amber-500 rounded-full"></div>
                                        ${!isLast ? '<div class="w-0.5 h-full bg-amber-300 mt-1"></div>' : ''}
                                    </div>
                                    <div class="flex-1 pb-4">
                                        <div class="text-sm font-semibold text-amber-700">${date}</div>
                                        <div class="text-gray-700 mt-1">${event}</div>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'cards') {
                            return `
                                <div class="mb-4 flex gap-4 items-center">
                                    <div class="flex-shrink-0 w-20 h-20 rounded-full bg-amber-500 flex items-center justify-center text-white font-bold text-sm">
                                        ${date}
                                    </div>
                                    <div class="flex-1 bg-white rounded-xl p-4 shadow-md">
                                        <p class="text-gray-700">${event}</p>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'zigzag') {
                            const alignRight = index % 2 === 1;
                            return `
                                <div class="mb-6 flex ${alignRight ? 'flex-row-reverse' : 'flex-row'} gap-4 items-center">
                                    <div class="flex-1 ${alignRight ? 'text-right' : 'text-left'}">
                                        <div class="bg-amber-50 rounded-lg p-4 border-l-4 ${alignRight ? 'border-r-4 border-l-0' : ''} border-amber-500">
                                            <div class="text-sm font-bold text-amber-700">${date}</div>
                                            <div class="text-gray-700 mt-1">${event}</div>
                                        </div>
                                    </div>
                                    <div class="w-4 h-4 bg-amber-500 rounded-full flex-shrink-0"></div>
                                    <div class="flex-1"></div>
                                </div>
                            `;
                        } else if (timelineStyle === 'minimal') {
                            return `
                                <div class="mb-4 flex gap-3 items-start">
                                    <div class="w-2 h-2 bg-amber-500 rounded-full mt-2 flex-shrink-0"></div>
                                    <div class="flex-1">
                                        <div class="text-xs font-semibold text-amber-600 uppercase tracking-wide">${date}</div>
                                        <div class="text-gray-700 mt-1">${event}</div>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'boxed') {
                            return `
                                <div class="mb-4">
                                    <div class="border-2 border-amber-300 rounded-xl p-4 bg-amber-50">
                                        <div class="flex items-center gap-3 mb-2">
                                            <div class="px-3 py-1 bg-amber-500 text-white rounded-full text-sm font-bold">${date}</div>
                                        </div>
                                        <p class="text-gray-700">${event}</p>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'roadmap') {
                            return `
                                <div class="mb-6 relative">
                                    <div class="flex items-start gap-4">
                                        <div class="flex flex-col items-center">
                                            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white font-bold text-xs">
                                                ${index + 1}
                                            </div>
                                            ${!isLast ? '<div class="w-1 h-12 bg-gradient-to-b from-amber-400 to-orange-300 mt-2"></div>' : ''}
                                        </div>
                                        <div class="flex-1 pt-2">
                                            <div class="font-bold text-amber-700 mb-1">${date}</div>
                                            <div class="text-gray-700">${event}</div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'modern') {
                            return `
                                <div class="mb-6 flex gap-4">
                                    <div class="flex flex-col items-center">
                                        <div class="w-12 h-12 rounded-full border-4 border-amber-500 bg-white flex items-center justify-center">
                                            <div class="text-xs font-bold text-amber-700">üìÖ</div>
                                        </div>
                                        ${!isLast ? '<div class="w-0.5 h-full bg-gradient-to-b from-amber-500 to-amber-200 mt-2"></div>' : ''}
                                    </div>
                                    <div class="flex-1 pb-4">
                                        <div class="bg-white rounded-xl p-4 shadow-sm border-l-4 border-amber-500">
                                            <div class="text-sm font-bold text-amber-700 mb-2">${date}</div>
                                            <div class="text-gray-700">${event}</div>
                                        </div>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'elegant') {
                            return `
                                <div class="mb-8 flex gap-6 items-start">
                                    <div class="flex-shrink-0 text-right" style="min-width: 80px;">
                                        <div class="inline-block px-3 py-1 bg-gradient-to-r from-amber-400 to-orange-400 text-white rounded-full text-xs font-semibold">
                                            ${date}
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center flex-shrink-0">
                                        <div class="w-4 h-4 bg-amber-500 rounded-full border-4 border-amber-200"></div>
                                        ${!isLast ? '<div class="w-0.5 h-16 bg-amber-300"></div>' : ''}
                                    </div>
                                    <div class="flex-1 pt-0">
                                        <p class="text-gray-700 italic">${event}</p>
                                    </div>
                                </div>
                            `;
                        } else if (timelineStyle === 'colorful') {
                            const colors = ['#f59e0b', '#ef4444', '#10b981', '#3b82f6', '#8b5cf6'];
                            const color = colors[index % colors.length];
                            return `
                                <div class="mb-4">
                                    <div class="rounded-xl p-5 text-white" style="background: linear-gradient(135deg, ${color} 0%, ${color}dd 100%);">
                                        <div class="flex items-center gap-3 mb-2">
                                            <div class="text-2xl">‚Ä¢</div>
                                            <div class="font-bold text-sm opacity-90">${date}</div>
                                        </div>
                                        <p class="ml-7">${event}</p>
                                    </div>
                                </div>
                            `;
                        } else {
                            // simple
                            return `
                                <div class="mb-3">
                                    <span class="font-semibold text-amber-700">${date}</span>
                                    <span class="text-gray-600"> ‚Äî </span>
                                    <span class="text-gray-700">${event}</span>
                                </div>
                            `;
                        }
                    }).join('');

                    return `
                        <div class="p-8" style="background-color: ${bgColor};">
                            <div class="max-w-lg mx-auto">
                                <div class="text-4xl mb-4 text-center">üìÖ</div>
                                <h3 class="text-xl font-semibold mb-6 text-gray-900 text-center">${title}</h3>
                                <div>${items}</div>
                            </div>
                        </div>
                    `;
                }
            },
            groupSignatures: {
                name: 'üë• Group Signatures',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Group Title</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="title" onchange="updatePreview()" placeholder="From All of Us" value="From All of Us">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Signatures (one name per line)</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="signatures" rows="6" onchange="updatePreview()" placeholder="Sarah&#10;Michael&#10;Jennifer&#10;David&#10;Emma"></textarea>
                            <p class="text-xs text-gray-500 mt-1">Each name on a new line</p>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#ffffff" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="grid">Grid</option>
                                <option value="list">List</option>
                                <option value="signatures">Handwritten Style</option>
                                <option value="circles">Circle Avatars</option>
                                <option value="cards">Name Cards</option>
                                <option value="badges">Badge Style</option>
                                <option value="flowing">Flowing Text</option>
                                <option value="stacked">Stacked Names</option>
                                <option value="colorful">Colorful Boxes</option>
                                <option value="elegant">Elegant List</option>
                                <option value="modern">Modern Grid</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#ffffff';
                    const layout = style.layout || 'grid';
                    const title = data.title || 'From All of Us';
                    const signatures = data.signatures || 'Sarah\nMichael\nJennifer\nDavid';

                    const names = signatures.split('\n').filter(name => name.trim());

                    let namesHTML = '';
                    if (layout === 'grid') {
                        namesHTML = `<div class="grid grid-cols-2 gap-4 mt-4">
                            ${names.map(name => `<div class="text-center p-3 bg-amber-50 rounded-lg"><span class="text-gray-800 font-medium">${name.trim()}</span></div>`).join('')}
                        </div>`;
                    } else if (layout === 'list') {
                        namesHTML = `<div class="mt-4 space-y-2">
                            ${names.map(name => `<div class="text-gray-800">‚Ä¢ ${name.trim()}</div>`).join('')}
                        </div>`;
                    } else if (layout === 'signatures') {
                        namesHTML = `<div class="mt-6 flex flex-wrap gap-6 justify-center">
                            ${names.map(name => `<div class="text-gray-700 font-serif italic text-lg">${name.trim()}</div>`).join('')}
                        </div>`;
                    } else if (layout === 'circles') {
                        namesHTML = `<div class="mt-6 flex flex-wrap gap-4 justify-center">
                            ${names.map(name => {
                                const initial = name.trim()[0] || '?';
                                return `<div class="flex flex-col items-center gap-2">
                                    <div class="w-16 h-16 rounded-full bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white font-bold text-xl">
                                        ${initial}
                                    </div>
                                    <div class="text-sm text-gray-700 font-medium">${name.trim()}</div>
                                </div>`;
                            }).join('')}
                        </div>`;
                    } else if (layout === 'cards') {
                        namesHTML = `<div class="mt-4 grid grid-cols-2 gap-3">
                            ${names.map(name => `
                                <div class="bg-white border-2 border-amber-300 rounded-xl p-4 text-center shadow-sm">
                                    <div class="text-2xl mb-2">üë§</div>
                                    <div class="text-gray-800 font-semibold">${name.trim()}</div>
                                </div>
                            `).join('')}
                        </div>`;
                    } else if (layout === 'badges') {
                        namesHTML = `<div class="mt-6 flex flex-wrap gap-3 justify-center">
                            ${names.map(name => `
                                <div class="px-4 py-2 bg-gradient-to-r from-amber-400 to-orange-400 text-white rounded-full font-semibold text-sm shadow-md">
                                    ${name.trim()}
                                </div>
                            `).join('')}
                        </div>`;
                    } else if (layout === 'flowing') {
                        namesHTML = `<div class="mt-6 text-center text-gray-700 text-lg leading-relaxed">
                            ${names.map((name, i) => name.trim() + (i < names.length - 1 ? '<span class="text-amber-500 mx-2">‚Ä¢</span>' : '')).join('')}
                        </div>`;
                    } else if (layout === 'stacked') {
                        namesHTML = `<div class="mt-4 space-y-3">
                            ${names.map((name, i) => `
                                <div class="bg-amber-50 border-l-4 border-amber-500 p-3 rounded-r-lg transform transition-transform hover:translate-x-2" style="margin-left: ${i * 10}px;">
                                    <span class="text-gray-800 font-medium">${name.trim()}</span>
                                </div>
                            `).join('')}
                        </div>`;
                    } else if (layout === 'colorful') {
                        const colors = [
                            'from-amber-400 to-orange-400',
                            'from-blue-400 to-indigo-400',
                            'from-green-400 to-emerald-400',
                            'from-pink-400 to-rose-400',
                            'from-purple-400 to-violet-400'
                        ];
                        namesHTML = `<div class="mt-4 grid grid-cols-2 gap-3">
                            ${names.map((name, i) => `
                                <div class="bg-gradient-to-br ${colors[i % colors.length]} text-white rounded-xl p-4 text-center font-semibold shadow-md">
                                    ${name.trim()}
                                </div>
                            `).join('')}
                        </div>`;
                    } else if (layout === 'elegant') {
                        namesHTML = `<div class="mt-6 space-y-4">
                            ${names.map(name => `
                                <div class="flex items-center gap-4">
                                    <div class="w-2 h-2 bg-amber-500 rounded-full"></div>
                                    <div class="text-gray-800 font-serif text-lg italic">${name.trim()}</div>
                                </div>
                            `).join('')}
                        </div>`;
                    } else if (layout === 'modern') {
                        namesHTML = `<div class="mt-4 grid grid-cols-2 gap-4">
                            ${names.map(name => `
                                <div class="bg-white rounded-lg p-4 border-2 border-gray-200 hover:border-amber-400 transition-colors shadow-sm">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-amber-400 to-orange-400 flex items-center justify-center text-white font-bold">
                                            ${name.trim()[0] || '?'}
                                        </div>
                                        <div class="text-gray-800 font-medium">${name.trim()}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>`;
                    } else {
                        namesHTML = `<div class="mt-6 flex flex-wrap gap-6 justify-center">
                            ${names.map(name => `<div class="text-gray-700 font-serif italic text-lg">${name.trim()}</div>`).join('')}
                        </div>`;
                    }

                    return `
                        <div class="p-8" style="background-color: ${bgColor};">
                            <div class="max-w-lg mx-auto text-center">
                                <div class="text-4xl mb-4">üë•</div>
                                <h3 class="text-xl font-semibold text-gray-900">${title}</h3>
                                ${namesHTML}
                            </div>
                        </div>
                    `;
                }
            },
            imageGallery: {
                name: 'üñºÔ∏è Image Gallery',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gallery Caption</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="caption" onchange="updatePreview()" placeholder="Memories Together">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Number of Photo Placeholders</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="photoCount" onchange="updatePreview()">
                                <option value="2">2 Photos</option>
                                <option value="3">3 Photos</option>
                                <option value="4" selected>4 Photos</option>
                                <option value="6">6 Photos</option>
                            </select>
                        </div>
                        <p class="text-xs text-gray-500">Photo upload functionality coming soon - placeholders shown for now</p>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#f9fafb" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gallery Layout</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="grid">Grid</option>
                                <option value="masonry">Masonry</option>
                                <option value="polaroid">Polaroid Style</option>
                                <option value="filmStrip">Film Strip</option>
                                <option value="collage">Collage</option>
                                <option value="carousel">Carousel Style</option>
                                <option value="scattered">Scattered Photos</option>
                                <option value="framed">Framed Gallery</option>
                                <option value="modern">Modern Grid</option>
                                <option value="album">Album Style</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#f9fafb';
                    const layout = style.layout || 'grid';
                    const caption = data.caption || 'Our Memories';
                    const photoCount = parseInt(data.photoCount) || 4;

                    const emojis = ['üì∑', 'üé®', 'üåü', 'üí´', '‚ú®', 'üé≠'];
                    const gridClass = photoCount === 2 ? 'grid-cols-2' : photoCount === 3 ? 'grid-cols-3' : 'grid-cols-2';

                    let galleryHTML = '';

                    if (layout === 'grid') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="bg-gray-200 rounded-lg flex items-center justify-center" style="height: 150px;">
                                <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-3">${galleryHTML}</div>`;
                    } else if (layout === 'masonry') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => {
                            const heights = ['120px', '180px', '150px', '140px', '160px', '130px'];
                            return `
                                <div class="bg-gray-200 rounded-lg flex items-center justify-center" style="height: ${heights[i % heights.length]};">
                                    <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                            `;
                        }).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-3">${galleryHTML}</div>`;
                    } else if (layout === 'polaroid') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="bg-white rounded-lg p-3 shadow-lg transform rotate-${i % 2 === 0 ? '2' : '-2'}">
                                <div class="bg-gray-200 rounded flex items-center justify-center" style="height: 140px;">
                                    <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                                <div class="text-center text-gray-500 text-sm mt-3 font-handwriting">Memory #${i + 1}</div>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-4">${galleryHTML}</div>`;
                    } else if (layout === 'filmStrip') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="bg-black p-2 rounded">
                                <div class="bg-gray-200 flex items-center justify-center" style="height: 120px;">
                                    <span class="text-3xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                                <div class="flex gap-1 mt-1">
                                    <div class="w-2 h-2 bg-gray-400"></div>
                                    <div class="w-2 h-2 bg-gray-400"></div>
                                    <div class="w-2 h-2 bg-gray-400"></div>
                                </div>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-2 bg-gray-800 p-3 rounded-xl">${galleryHTML}</div>`;
                    } else if (layout === 'collage') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => {
                            const rotations = ['rotate-1', '-rotate-2', 'rotate-3', '-rotate-1', 'rotate-2', '-rotate-3'];
                            return `
                                <div class="transform ${rotations[i % rotations.length]}">
                                    <div class="bg-gray-200 rounded-xl flex items-center justify-center shadow-md" style="height: 140px;">
                                        <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                    </div>
                                </div>
                            `;
                        }).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-4">${galleryHTML}</div>`;
                    } else if (layout === 'carousel') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => {
                            const scale = i === 0 ? 'scale-110' : 'scale-90 opacity-60';
                            return `
                                <div class="transform ${scale} transition-transform">
                                    <div class="bg-gray-200 rounded-2xl flex items-center justify-center shadow-xl" style="height: 160px;">
                                        <span class="text-5xl opacity-50">${emojis[i % emojis.length]}</span>
                                    </div>
                                </div>
                            `;
                        }).join('');
                        galleryHTML = `<div class="flex gap-4 overflow-x-auto pb-4">${galleryHTML}</div>`;
                    } else if (layout === 'scattered') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => {
                            const positions = ['', 'ml-4', 'ml-8', '-ml-4', 'ml-6', 'ml-2'];
                            const rotations = ['rotate-2', '-rotate-3', 'rotate-1', '-rotate-2', 'rotate-3', '-rotate-1'];
                            return `
                                <div class="transform ${rotations[i % rotations.length]} ${positions[i % positions.length]} mb-4">
                                    <div class="bg-white rounded-lg p-2 shadow-lg inline-block">
                                        <div class="bg-gray-200 rounded flex items-center justify-center" style="width: 140px; height: 140px;">
                                            <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('');
                        galleryHTML = `<div>${galleryHTML}</div>`;
                    } else if (layout === 'framed') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="border-8 border-double border-amber-400 rounded-lg p-2 bg-white shadow-lg">
                                <div class="bg-gray-200 flex items-center justify-center" style="height: 130px;">
                                    <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-4">${galleryHTML}</div>`;
                    } else if (layout === 'modern') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="relative group">
                                <div class="bg-gradient-to-br from-gray-200 to-gray-300 rounded-2xl flex items-center justify-center overflow-hidden" style="height: 150px;">
                                    <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                                <div class="absolute inset-0 bg-black opacity-0 group-hover:opacity-20 transition-opacity rounded-2xl"></div>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-2">${galleryHTML}</div>`;
                    } else if (layout === 'album') {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="bg-amber-50 rounded-xl p-4 border-2 border-amber-200">
                                <div class="bg-gray-200 rounded flex items-center justify-center mb-2" style="height: 120px;">
                                    <span class="text-3xl opacity-50">${emojis[i % emojis.length]}</span>
                                </div>
                                <div class="text-center text-xs text-gray-500">Photo ${i + 1}</div>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-3">${galleryHTML}</div>`;
                    } else {
                        galleryHTML = Array(photoCount).fill(0).map((_, i) => `
                            <div class="bg-gray-200 rounded-lg flex items-center justify-center" style="height: 150px;">
                                <span class="text-4xl opacity-50">${emojis[i % emojis.length]}</span>
                            </div>
                        `).join('');
                        galleryHTML = `<div class="grid ${gridClass} gap-3">${galleryHTML}</div>`;
                    }

                    return `
                        <div class="p-8" style="background-color: ${bgColor};">
                            <div class="max-w-lg mx-auto">
                                <div class="text-4xl mb-4 text-center">üñºÔ∏è</div>
                                ${caption ? `<h3 class="text-xl font-semibold mb-4 text-gray-900 text-center">${caption}</h3>` : ''}
                                ${galleryHTML}
                            </div>
                        </div>
                    `;
                }
            },
            bestWishes: {
                name: 'üåà Best Wishes',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Wishes Title</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="title" onchange="updatePreview()" placeholder="Wishing You All the Best" value="Wishing You All the Best">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Your Wishes</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="wishes" rows="5" onchange="updatePreview()" placeholder="May you continue to spread joy and kindness wherever you go. Wishing you health, happiness, and success in all your future endeavors."></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="centered">Centered</option>
                                <option value="card">Card Style</option>
                                <option value="colorful">Colorful Banner</option>
                                <option value="elegant">Elegant</option>
                                <option value="rainbowGlow">Rainbow Glow</option>
                                <option value="wishingWell">Wishing Well</option>
                                <option value="skyHigh">Sky High</option>
                                <option value="dreamyWishes">Dreamy Wishes</option>
                                <option value="cornerRainbow">Corner Rainbow</option>
                                <option value="floatingWishes">Floating Wishes</option>
                                <option value="gradientBox">Gradient Box</option>
                                <option value="doubleBorder">Double Border</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef3c7" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#fbbf24" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Text Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="textStyle" onchange="updatePreview()">
                                <option value="normal">Normal</option>
                                <option value="italic">Italic</option>
                                <option value="bold">Bold</option>
                            </select>
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef3c7';
                    const accentColor = style.accentColor || '#fbbf24';
                    const textStyle = style.textStyle || 'normal';
                    const layout = style.layout || 'centered';
                    const title = data.title || 'Wishing You All the Best';
                    const wishes = data.wishes || 'May all your dreams come true!';

                    const styleClass = textStyle === 'italic' ? 'italic' : textStyle === 'bold' ? 'font-bold' : '';

                    if (layout === 'card') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-xl text-center">
                                    <div class="text-6xl mb-4">üåà</div>
                                    <h3 class="text-2xl font-bold mb-4" style="color: ${accentColor};">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'colorful') {
                        return `
                            <div class="p-8" style="background: linear-gradient(135deg, ${bgColor}, ${accentColor}40);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-7xl mb-4">üåà</div>
                                    <h3 class="text-3xl font-bold mb-4 text-gray-900">${title}</h3>
                                    <p class="text-gray-800 text-lg font-medium ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'elegant') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-t-4 border-b-4 py-8" style="border-color: ${accentColor};">
                                    <div class="text-5xl mb-4 text-center">üåà</div>
                                    <h3 class="text-xl font-serif font-semibold mb-4 text-gray-900 text-center">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'rainbowGlow') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 60px ${accentColor}40;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-7xl animate-pulse">üåà</div>
                                    </div>
                                    <h3 class="text-xl font-semibold mb-4 text-center" style="color: ${accentColor};">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'wishingWell') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl p-6 border-4 border-double" style="border-color: ${accentColor};">
                                    <div class="text-6xl mb-4 text-center">üåà</div>
                                    <h3 class="text-2xl font-semibold mb-4 text-center text-gray-900">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'skyHigh') {
                        return `
                            <div class="p-8" style="background: linear-gradient(to bottom, ${accentColor}20 0%, ${bgColor} 50%, ${accentColor}10 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-7xl mb-4">üåà</div>
                                    <h3 class="text-2xl font-bold mb-4 text-gray-900">${title}</h3>
                                    <p class="text-gray-700 text-lg leading-relaxed ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'dreamyWishes') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-full p-10 text-center" style="box-shadow: 0 15px 60px ${accentColor}30;">
                                    <div class="text-6xl mb-4">üåà</div>
                                    <h3 class="text-xl font-semibold mb-4 text-gray-900">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'cornerRainbow') {
                        return `
                            <div class="p-8 relative overflow-hidden" style="background-color: ${bgColor};">
                                <div class="absolute -top-8 -right-8 text-9xl opacity-15">üåà</div>
                                <div class="absolute -bottom-8 -left-8 text-8xl opacity-15">üåà</div>
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative z-10">
                                    <div class="text-5xl mb-4 text-center">üåà</div>
                                    <h3 class="text-xl font-semibold mb-4 text-center" style="color: ${accentColor};">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingWishes') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-28 h-28 flex items-center justify-center mb-6" style="background: linear-gradient(135deg, ${accentColor} 0%, #fcd34d 100%); box-shadow: 0 25px 60px ${accentColor}40;">
                                        <div class="text-7xl">üåà</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-xl font-semibold mb-4 text-gray-900">${title}</h3>
                                        <p class="text-gray-700 leading-relaxed ${styleClass}">${wishes}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'gradientBox') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto rounded-2xl p-6" style="background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 50%, #fdba74 100%);">
                                    <div class="bg-white bg-opacity-90 rounded-xl p-6">
                                        <div class="text-6xl mb-4 text-center">üåà</div>
                                        <h3 class="text-xl font-semibold mb-4 text-center text-gray-900">${title}</h3>
                                        <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'doubleBorder') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${accentColor};">
                                    <div class="border-2 rounded-xl p-6" style="border-color: ${accentColor}60;">
                                        <div class="text-6xl mb-4 text-center">üåà</div>
                                        <h3 class="text-xl font-semibold mb-4 text-center text-gray-900">${title}</h3>
                                        <p class="text-gray-700 leading-relaxed text-center ${styleClass}">${wishes}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-5xl mb-4">üåà</div>
                                    <h3 class="text-xl font-semibold mb-4 text-gray-900">${title}</h3>
                                    <p class="text-gray-700 leading-relaxed ${styleClass}">${wishes}</p>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            achievement: {
                name: 'üèÜ Achievement Celebration',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Achievement Title</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="achievement" onchange="updatePreview()" placeholder="Your Amazing Achievement">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Celebration Message</label>
                            <textarea class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 section-data" data-field="message" rows="4" onchange="updatePreview()" placeholder="I'm so proud of everything you've accomplished. Your hard work and dedication truly paid off!"></textarea>
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="celebration">Celebration</option>
                                <option value="trophy">Trophy Card</option>
                                <option value="confetti">Confetti Style</option>
                                <option value="banner">Banner</option>
                                <option value="goldFrame">Gold Frame</option>
                                <option value="podium">Podium Style</option>
                                <option value="victoryCircle">Victory Circle</option>
                                <option value="championBadge">Champion Badge</option>
                                <option value="starBurst">Star Burst</option>
                                <option value="trophyGlow">Trophy Glow</option>
                                <option value="ribbonAward">Ribbon Award</option>
                                <option value="floatingTrophy">Floating Trophy</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#fef9c3" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gold Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="goldColor" value="#fbbf24" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#fef9c3';
                    const goldColor = style.goldColor || '#fbbf24';
                    const layout = style.layout || 'celebration';
                    const achievement = data.achievement || 'Your Success';
                    const message = data.message || 'Congratulations on this amazing achievement!';

                    if (layout === 'trophy') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-md mx-auto bg-white rounded-2xl p-8 shadow-xl text-center">
                                    <div class="text-8xl mb-4">üèÜ</div>
                                    <div class="inline-block px-6 py-2 rounded-full mb-4" style="background-color: ${goldColor}20;">
                                        <h3 class="text-2xl font-bold" style="color: ${goldColor};">${achievement}</h3>
                                    </div>
                                    <p class="text-gray-700 leading-relaxed">${message}</p>
                                    <div class="mt-6 text-3xl">üéâ ‚≠ê üéä</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'confetti') {
                        return `
                            <div class="p-8 relative" style="background: linear-gradient(135deg, ${bgColor}, ${goldColor}30);">
                                <div class="max-w-lg mx-auto text-center relative">
                                    <div class="text-9xl mb-4">üèÜ</div>
                                    <h3 class="text-3xl font-bold mb-4 text-gray-900">${achievement}</h3>
                                    <p class="text-gray-800 text-lg font-medium">${message}</p>
                                    <div class="mt-6 text-4xl">üéâ üéä ‚ú® ‚≠ê üéà</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'banner') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="rounded-xl p-6" style="background-color: ${goldColor}30; border: 3px solid ${goldColor};">
                                        <div class="text-7xl mb-4 text-center">üèÜ</div>
                                        <h3 class="text-2xl font-bold mb-3 text-center" style="color: ${goldColor};">${achievement}</h3>
                                        <p class="text-gray-700 leading-relaxed text-center">${message}</p>
                                        <div class="mt-4 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'goldFrame') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto border-4 border-double rounded-2xl p-6" style="border-color: ${goldColor};">
                                    <div class="border-2 rounded-xl p-6" style="border-color: ${goldColor}80;">
                                        <div class="text-7xl mb-4 text-center">üèÜ</div>
                                        <h3 class="text-2xl font-bold mb-3 text-center" style="color: ${goldColor};">${achievement}</h3>
                                        <p class="text-gray-700 leading-relaxed text-center">${message}</p>
                                        <div class="mt-4 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'podium') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-8 shadow-xl">
                                    <div class="text-center mb-6">
                                        <div class="inline-block px-8 py-4 rounded-t-2xl" style="background-color: ${goldColor};">
                                            <div class="text-7xl">üèÜ</div>
                                        </div>
                                    </div>
                                    <h3 class="text-2xl font-bold mb-3 text-center text-gray-900">${achievement}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center">${message}</p>
                                    <div class="mt-6 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'victoryCircle') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-full p-10 text-center" style="box-shadow: 0 20px 70px ${goldColor}40;">
                                    <div class="text-8xl mb-4">üèÜ</div>
                                    <h3 class="text-2xl font-bold mb-3" style="color: ${goldColor};">${achievement}</h3>
                                    <p class="text-gray-700 leading-relaxed">${message}</p>
                                    <div class="mt-4 text-3xl">üéâ ‚≠ê üéä</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'championBadge') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-6 shadow-lg border-t-8" style="border-color: ${goldColor};">
                                        <div class="flex items-center gap-4 mb-4">
                                            <div class="w-20 h-20 rounded-full flex items-center justify-center text-5xl" style="background-color: ${goldColor};">
                                                üèÜ
                                            </div>
                                            <h3 class="text-2xl font-bold flex-1" style="color: ${goldColor};">${achievement}</h3>
                                        </div>
                                        <p class="text-gray-700 leading-relaxed">${message}</p>
                                        <div class="mt-4 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'starBurst') {
                        return `
                            <div class="p-8" style="background: radial-gradient(circle, ${bgColor} 0%, ${goldColor}20 100%);">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="relative inline-block mb-4">
                                        <div class="text-9xl">üèÜ</div>
                                        <div class="absolute -top-2 -right-2 text-4xl">‚≠ê</div>
                                        <div class="absolute -bottom-2 -left-2 text-4xl">‚≠ê</div>
                                        <div class="absolute top-1/2 -left-6 text-3xl">‚ú®</div>
                                        <div class="absolute top-1/2 -right-6 text-3xl">‚ú®</div>
                                    </div>
                                    <h3 class="text-3xl font-bold mb-4 text-gray-900">${achievement}</h3>
                                    <p class="text-gray-700 text-lg leading-relaxed">${message}</p>
                                    <div class="mt-6 text-4xl">üéâ üéä üéà</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'trophyGlow') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6" style="box-shadow: 0 0 70px ${goldColor}50;">
                                    <div class="text-center mb-4">
                                        <div class="inline-block text-9xl animate-pulse">üèÜ</div>
                                    </div>
                                    <h3 class="text-2xl font-bold mb-3 text-center" style="color: ${goldColor};">${achievement}</h3>
                                    <p class="text-gray-700 leading-relaxed text-center">${message}</p>
                                    <div class="mt-6 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'ribbonAward') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto bg-white rounded-2xl p-6 shadow-lg relative overflow-hidden">
                                    <div class="absolute top-0 right-0 w-32 h-32" style="background: linear-gradient(135deg, ${goldColor} 0%, ${goldColor}60 100%); clip-path: polygon(100% 0, 0 0, 100% 100%);"></div>
                                    <div class="absolute top-2 right-2 text-4xl">üèÜ</div>
                                    <div class="relative z-10 pt-8">
                                        <h3 class="text-2xl font-bold mb-3 text-center text-gray-900">${achievement}</h3>
                                        <p class="text-gray-700 leading-relaxed text-center">${message}</p>
                                        <div class="mt-6 text-3xl text-center">üéâ ‚≠ê üéä</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floatingTrophy') {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="inline-block rounded-full w-32 h-32 flex items-center justify-center mb-6" style="background: linear-gradient(135deg, ${goldColor} 0%, #fcd34d 100%); box-shadow: 0 30px 70px ${goldColor}50;">
                                        <div class="text-8xl">üèÜ</div>
                                    </div>
                                    <div class="bg-white rounded-2xl p-6 shadow-lg">
                                        <h3 class="text-2xl font-bold mb-3 text-gray-900">${achievement}</h3>
                                        <p class="text-gray-700 leading-relaxed">${message}</p>
                                        <div class="mt-4 text-3xl">üéâ ‚≠ê üéä</div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-6xl mb-4">üèÜ</div>
                                    <h3 class="text-2xl font-bold mb-3 text-gray-900">${achievement}</h3>
                                    <p class="text-gray-700 leading-relaxed">${message}</p>
                                    <div class="mt-4 text-3xl">üéâ ‚≠ê üéä</div>
                                </div>
                            </div>
                        `;
                    }
                }
            },
            contactInfo: {
                name: 'üìß Contact Information',
                info: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Section Title</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="title" onchange="updatePreview()" placeholder="Stay in Touch" value="Stay in Touch">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Email (optional)</label>
                            <input type="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="email" onchange="updatePreview()" placeholder="your.email@example.com">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Phone (optional)</label>
                            <input type="tel" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="phone" onchange="updatePreview()" placeholder="+1 (555) 123-4567">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Social Media/Website (optional)</label>
                            <input type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg section-data" data-field="social" onchange="updatePreview()" placeholder="@username or website.com">
                        </div>
                    </div>
                `,
                style: `
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Layout Style</label>
                            <select class="w-full px-4 py-2 border border-gray-300 rounded-lg section-style" data-style="layout" onchange="updatePreview()">
                                <option value="vertical">Vertical List</option>
                                <option value="horizontal">Horizontal</option>
                                <option value="card">Card Style</option>
                                <option value="buttons">Button Style</option>
                                <option value="modern">Modern Icons</option>
                                <option value="elegant">Elegant Cards</option>
                                <option value="minimal">Minimal List</option>
                                <option value="colorful">Colorful Boxes</option>
                                <option value="badge">Badge Style</option>
                                <option value="business">Business Card</option>
                                <option value="floating">Floating Icons</option>
                                <option value="inline">Inline Style</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Background Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="bgColor" value="#f3f4f6" onchange="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Accent Color</label>
                            <input type="color" class="w-full h-10 rounded-lg section-style" data-style="accentColor" value="#3b82f6" onchange="updatePreview()">
                        </div>
                    </div>
                `,
                render: (data, style) => {
                    const bgColor = style.bgColor || '#f3f4f6';
                    const accentColor = style.accentColor || '#3b82f6';
                    const layout = style.layout || 'vertical';
                    const title = data.title || 'Stay in Touch';
                    const email = data.email || '';
                    const phone = data.phone || '';
                    const social = data.social || '';

                    const contacts = [];
                    if (email) contacts.push({ icon: 'üìß', value: email });
                    if (phone) contacts.push({ icon: 'üì±', value: phone });
                    if (social) contacts.push({ icon: 'üåê', value: social });

                    if (contacts.length === 0) {
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900">${title}</h3>
                                    <p class="text-gray-500 mt-4">Add your contact information above</p>
                                </div>
                            </div>
                        `;
                    }

                    if (layout === 'card') {
                        const contactCards = contacts.map(c => `
                            <div class="bg-white rounded-lg p-4 shadow-md">
                                <div class="text-3xl mb-2">${c.icon}</div>
                                <p class="text-gray-700 text-sm break-all">${c.value}</p>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="grid grid-cols-${contacts.length > 2 ? '3' : contacts.length} gap-4">
                                        ${contactCards}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'buttons') {
                        const contactButtons = contacts.map(c => `
                            <div class="inline-block px-6 py-3 rounded-full text-white font-medium" style="background-color: ${accentColor};">
                                ${c.icon} ${c.value}
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="flex flex-wrap gap-3 justify-center">
                                        ${contactButtons}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'horizontal') {
                        const contactItems = contacts.map(c => `
                            <div class="flex items-center gap-2">
                                <span>${c.icon}</span>
                                <span class="text-gray-700">${c.value}</span>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">${title}</h3>
                                    <div class="flex gap-6 justify-center flex-wrap">
                                        ${contactItems}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'modern') {
                        const contactItems = contacts.map(c => `
                            <div class="flex items-center gap-4 p-4 bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow">
                                <div class="w-12 h-12 rounded-full flex items-center justify-center text-2xl" style="background-color: ${accentColor}20;">
                                    ${c.icon}
                                </div>
                                <div class="text-gray-700 font-medium">${c.value}</div>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="text-4xl mb-4 text-center">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6 text-center">${title}</h3>
                                    <div class="space-y-3">
                                        ${contactItems}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'elegant') {
                        const contactCards = contacts.map(c => `
                            <div class="bg-white rounded-2xl p-6 text-center border-2 border-gray-200 hover:border-amber-400 transition-colors shadow-sm">
                                <div class="text-4xl mb-3">${c.icon}</div>
                                <p class="text-gray-700 text-sm break-all">${c.value}</p>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="grid grid-cols-${contacts.length === 1 ? '1' : contacts.length === 2 ? '2' : '3'} gap-4">
                                        ${contactCards}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'minimal') {
                        const contactItems = contacts.map(c => `
                            <div class="flex items-center gap-3 text-sm">
                                <div class="w-1 h-1 rounded-full" style="background-color: ${accentColor};"></div>
                                <span class="text-gray-500">${c.icon}</span>
                                <span class="text-gray-700">${c.value}</span>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="space-y-3 inline-block text-left">
                                        ${contactItems}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'colorful') {
                        const colors = ['from-blue-400 to-blue-600', 'from-green-400 to-green-600', 'from-purple-400 to-purple-600'];
                        const contactBoxes = contacts.map((c, i) => `
                            <div class="bg-gradient-to-br ${colors[i % colors.length]} text-white rounded-xl p-5 text-center shadow-md">
                                <div class="text-3xl mb-2">${c.icon}</div>
                                <p class="text-sm font-medium break-all">${c.value}</p>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="grid grid-cols-${contacts.length === 1 ? '1' : contacts.length === 2 ? '2' : '3'} gap-4">
                                        ${contactBoxes}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'badge') {
                        const contactBadges = contacts.map(c => `
                            <div class="inline-flex items-center gap-2 px-5 py-3 rounded-full border-2 shadow-sm" style="border-color: ${accentColor}; background-color: white;">
                                <span class="text-xl">${c.icon}</span>
                                <span class="text-gray-700 font-medium text-sm">${c.value}</span>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="flex flex-wrap gap-3 justify-center">
                                        ${contactBadges}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'business') {
                        const contactItems = contacts.map(c => `
                            <div class="flex items-center gap-3 border-l-4 pl-4 py-2" style="border-color: ${accentColor};">
                                <span class="text-2xl">${c.icon}</span>
                                <span class="text-gray-700 font-medium">${c.value}</span>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto">
                                    <div class="bg-white rounded-2xl p-8 shadow-xl border-2" style="border-color: ${accentColor};">
                                        <div class="text-4xl mb-4 text-center">üìß</div>
                                        <h3 class="text-xl font-bold text-gray-900 mb-6 text-center">${title}</h3>
                                        <div class="space-y-4">
                                            ${contactItems}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'floating') {
                        const contactFloats = contacts.map(c => `
                            <div class="bg-white rounded-full px-6 py-4 shadow-lg hover:shadow-xl transition-shadow flex items-center gap-3">
                                <div class="text-2xl">${c.icon}</div>
                                <div class="text-gray-700 font-medium">${c.value}</div>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-6">${title}</h3>
                                    <div class="space-y-4 inline-block">
                                        ${contactFloats}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (layout === 'inline') {
                        const contactInline = contacts.map((c, i) =>
                            `${c.icon} ${c.value}${i < contacts.length - 1 ? '<span class="mx-3" style="color: ' + accentColor + ';">‚Ä¢</span>' : ''}`
                        ).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">${title}</h3>
                                    <div class="text-gray-700 text-lg">
                                        ${contactInline}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else {
                        const contactItems = contacts.map(c => `
                            <div class="flex items-center gap-2 justify-center">
                                <span>${c.icon}</span>
                                <span class="text-gray-700">${c.value}</span>
                            </div>
                        `).join('');
                        return `
                            <div class="p-8" style="background-color: ${bgColor};">
                                <div class="max-w-lg mx-auto text-center">
                                    <div class="text-4xl mb-4">üìß</div>
                                    <h3 class="text-xl font-semibold text-gray-900 mb-4">${title}</h3>
                                    <div class="space-y-2">
                                        ${contactItems}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                }
            }
        };

        // Merge shared components into sectionTemplates
        Object.assign(sectionTemplates, window.sectionComponents);

        function openSectionModal() {
            document.getElementById('sectionModal').classList.remove('hidden');
        }

        function closeSectionModal() {
            document.getElementById('sectionModal').classList.add('hidden');
        }

        function addSection(type) {
            const template = sectionTemplates[type];
            const id = `section-${sectionCounter++}`;

            const sectionHTML = `
                <div class="border border-gray-200 rounded-xl overflow-hidden section-item" data-id="${id}" data-type="${type}">
                    <div class="bg-gray-50 border-b px-4 py-3 flex justify-between items-center">
                        <div class="flex items-center gap-2">
                            <span class="cursor-move text-gray-400">‚ãÆ‚ãÆ</span>
                            <span class="font-semibold text-sm">${template.name}</span>
                        </div>
                        <button onclick="removeSection('${id}')" class="text-gray-400 hover:text-red-600 transition">‚úï</button>
                    </div>
                    <div class="border-b flex">
                        <button class="flex-1 px-4 py-3 text-sm font-medium border-r tab-btn active" onclick="switchTab(event, '${id}', 'info')">
                            Info
                        </button>
                        <button class="flex-1 px-4 py-3 text-sm font-medium tab-btn" onclick="switchTab(event, '${id}', 'style')">
                            Style
                        </button>
                    </div>
                    <div class="p-4 tab-content" data-tab="info">
                        ${template.info}
                    </div>
                    <div class="p-4 tab-content hidden" data-tab="style">
                        ${template.style}
                    </div>
                </div>
            `;

            document.getElementById('sectionsContainer').insertAdjacentHTML('beforeend', sectionHTML);
            closeSectionModal();
            updatePreview();
        }

        function removeSection(id) {
            if (confirm('Remove this section?')) {
                document.querySelector(`[data-id="${id}"]`).remove();
                updatePreview();
            }
        }

        function switchTab(event, sectionId, tab) {
            const section = document.querySelector(`[data-id="${sectionId}"]`);
            section.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active', 'text-amber-600', 'border-b-2', 'border-amber-600'));
            section.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));

            event.target.classList.add('active', 'text-amber-600', 'border-b-2', 'border-amber-600');
            section.querySelector(`[data-tab="${tab}"]`).classList.remove('hidden');
        }

        function getSectionData(section) {
            const data = {};
            const style = {};

            section.querySelectorAll('.section-data').forEach(input => {
                const field = input.dataset.field;
                if (input.type === 'file' && input.dataset.imageData) {
                    data[field] = input.dataset.imageData;
                } else {
                    data[field] = input.value;
                }
            });

            section.querySelectorAll('.section-style').forEach(input => {
                style[input.dataset.style] = input.value;
            });

            return { data, style };
        }

        function updatePreview() {
            const sections = document.querySelectorAll('.section-item');
            let html = '';

            if (sections.length === 0) {
                html = `
                    <div class="flex items-center justify-center h-full text-center p-8">
                        <div>
                            <div class="text-6xl mb-4">üôè</div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">Start Creating</h3>
                            <p class="text-gray-600 text-sm">Add sections to create your thank you card</p>
                        </div>
                    </div>
                `;
            } else {
                sections.forEach(section => {
                    const type = section.dataset.type;
                    const template = sectionTemplates[type];
                    const { data, style } = getSectionData(section);
                    html += template.render(data, style);
                });
            }

            document.getElementById('previewContent').innerHTML = html;

            // Also update mobile preview if it's open
            const mobilePreview = document.getElementById('mobilePreviewContent');
            if (mobilePreview && !document.getElementById('mobilePreviewModal').classList.contains('hidden')) {
                mobilePreview.innerHTML = html;
            }
        }

        function handleImageUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    input.dataset.imageData = e.target.result;
                    updatePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function setDevice(device) {
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-amber-500', 'text-white');
            });
            event.target.classList.add('active', 'bg-amber-500', 'text-white');

            const frame = document.getElementById('mobileFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        function previewFullscreen() {
            window.open('', '_blank');
            alert('Full screen preview would open here');
        }

        function generateQR() {
            document.getElementById('qrModal').classList.remove('hidden');
        }

        function closeQRModal() {
            document.getElementById('qrModal').classList.add('hidden');
        }

        function copyUrl() {
            const url = document.getElementById('shareUrl').textContent;
            navigator.clipboard.writeText(url).then(() => {
                alert('Link copied to clipboard! You can now share your thank you card.');
            });
        }

        function publishProject() {
            if (confirm('Complete your thank you card?')) {
                alert('‚úÖ Your thank you card is ready!\n\nYou can now share the link or QR code to express your gratitude.');
            }
        }

        function openMobilePreview() {
            // Copy preview content to mobile preview modal
            const previewContent = document.getElementById('previewContent').innerHTML;
            document.getElementById('mobilePreviewContent').innerHTML = previewContent;

            // Show the modal
            document.getElementById('mobilePreviewModal').classList.remove('hidden');
        }

        function closeMobilePreview() {
            document.getElementById('mobilePreviewModal').classList.add('hidden');
        }

        function setMobilePreviewDevice(device) {
            // Update active button
            document.querySelectorAll('.mobile-preview-device-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-amber-500', 'text-white');
            });
            event.target.classList.add('active', 'bg-amber-500', 'text-white');

            // Update frame size
            const frame = document.getElementById('mobilePreviewFrame');
            if (device === 'tablet') {
                frame.style.width = '768px';
                frame.style.height = '1024px';
            } else {
                frame.style.width = '375px';
                frame.style.height = '667px';
            }
        }

        // Close modals on outside click
        document.getElementById('sectionModal').addEventListener('click', (e) => {
            if (e.target.id === 'sectionModal') closeSectionModal();
        });
        document.getElementById('qrModal').addEventListener('click', (e) => {
            if (e.target.id === 'qrModal') closeQRModal();
        });
        document.getElementById('mobilePreviewModal').addEventListener('click', (e) => {
            if (e.target.id === 'mobilePreviewModal') closeMobilePreview();
        });

        // Initialize with a default hero section
        window.addEventListener('DOMContentLoaded', () => {
            addSection('hero');
        });
    </script>
</body>
</html>
